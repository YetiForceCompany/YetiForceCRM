<div id='openpgpjs_key_manager' class="propform popupdialog">
  <div id='openpgpjs_tabs'> 
    <ul>
      <li><a href='#openpgpjs-tab1'><roundcube:label name="rc_openpgpjs.public_keys" /></a></li>
      <li><a href='#openpgpjs-tab2'><roundcube:label name="rc_openpgpjs.private_keys" /></a></li> 
      <li><a href='#openpgpjs-tab3'><roundcube:label name="rc_openpgpjs.generate_keys" /></a></li>
    </ul> 
    <div id='openpgpjs-tab1'>
      <table id='openpgpjs_pubkeys' class="records-table">
        <thead>
          <tr class='boxtitle'>
            <td><roundcube:label name="rc_openpgpjs.key_id" /></td>
            <td><roundcube:label name="rc_openpgpjs.fingerprint" /></td>
            <td><roundcube:label name="rc_openpgpjs.person" /></td>
            <td><roundcube:label name="rc_openpgpjs.length_alg" /></td>
            <td><roundcube:label name="rc_openpgpjs.status" /></td>
            <td><roundcube:label name="rc_openpgpjs.action" /></td>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <fieldset id="openpgpjs_import">
        <h3><roundcube:label name="rc_openpgpjs.import_public" /></h3>
        <div id="import_pub_error" class="ui-state-error ui-corner-all hidden">
          <span class="ui-icon ui-icon-alert"></span>
          <p></p>
        </div>
        <textarea id='importPubkeyField'></textarea>
        <div class="formbuttons">
          <input type='button' class='button mainaction' value='<roundcube:label name="import" />' onclick='importPubKey($("#openpgpjs_import #importPubkeyField").val()); $("#openpgpjs_import #importPubkeyField").val("");' />
          <input type='button' class='button mainaction' value='<roundcube:label name="search" />' onclick='$("#openpgpjs_key_search").dialog("open");' />
        </div>
      </fieldset>
    </div>
    <div id='openpgpjs-tab2'>
      <table id='openpgpjs_privkeys' class='records-table'>
        <thead>
          <tr class='boxtitle'>
            <td><roundcube:label name="rc_openpgpjs.key_id" /></td>
            <td><roundcube:label name="rc_openpgpjs.fingerprint" /></td>
            <td><roundcube:label name="rc_openpgpjs.person" /></td>
            <td><roundcube:label name="rc_openpgpjs.length_alg" /></td>
            <!--<td><roundcube:label name="rc_openpgpjs.status" /></td>-->
            <td><roundcube:label name="rc_openpgpjs.action" /></td>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <fieldset id="openpgpjs_import">
        <h3><roundcube:label name="rc_openpgpjs.import_private" /></h3>
        <div id="import_priv_error" class="ui-state-error ui-corner-all hidden">
          <span class="ui-icon ui-icon-alert"></span>
          <p></p>
        </div>
        <textarea id='importPrivkeyField'></textarea><br /><br />
        <label for="import_passphrase"><roundcube:label name="rc_openpgpjs.passphrase" />:</label> <input type='password' id='import_passphrase' />
        <div class="formbuttons">
          <input type='button' class='button mainaction' value='<roundcube:label name="rc_openpgpjs.import" />' onclick='importPrivKey($("#importPrivkeyField").val(), $("#import_passphrase").val());' /></p>
        </div>
      </fieldset>
    </div>
    <div id='openpgpjs-tab3'>
      <fieldset>
        <h3><roundcube:label name="rc_openpgpjs.generate_keys" /></h3>
        <div id="generate_key_error" class="ui-state-error ui-corner-all hidden">
          <span class="ui-icon ui-icon-alert"></span>
          <p></p>
        </div>
        <label for="gen_ident"><roundcube:label name="rc_openpgpjs.ident" />:</label> <select id='gen_ident' /></select>
        <label for="gen_passphrase"><roundcube:label name="rc_openpgpjs.passphrase" />:</label> <input type='password' id='gen_passphrase' /> 
        <label for="gen_passphrase_verify"><roundcube:label name="rc_openpgpjs.verify" />:</label> <input type='password' id='gen_passphrase_verify' /> 
        <label for="gen_bits"><roundcube:label name="rc_openpgpjs.bits" />:</label> 
        <select id='gen_bits'>
          <option value='2048'>2048</option>
          <option value='4096'>4096</option>
        </select> 
        <div class="formbuttons">
          <input type='button' class='button mainaction' value='<roundcube:label name="rc_openpgpjs.generate" />' onclick='generate_keypair($("#gen_bits").val(), $("#gen_algo").val());' />
          <input type='button' class='button mainaction hidden' id='import_button' value='<roundcube:label name="rc_openpgpjs.import" />' onclick='importGenerated();' />
        </div>
        <div id='generated_keys'></div>
    </div>
  </div>
</div>
