{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\nVtiger_Detail_Js(\n\t'Competition_Detail_Js',\n\t{},\n\t{\n\t\thierarchyResponseCache: {},\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tlet thisInstance = this,\n\t\t\t\taDeferred = jQuery.Deferred();\n\n\t\t\tif (!$.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).then(function (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/*\n\t\t * function to display the hierarchy response data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tlet callbackFunction = function () {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function (modalContainer) {\n\t\t\t\tApp.Components.Scrollbar.xy($('#hierarchyScroll', modalContainer));\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll', modalContainer).height() > 300) {\n\t\t\t\t\tcallbackFunction();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Registers read count of hierarchy if it is possoble\n\t\t */\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tlet hierarchyButton = $('.js-detail-hierarchy'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tAppConnector.request(params).then(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterShowHierarchy: function () {\n\t\t\tlet thisInstance = this,\n\t\t\t\thierarchyButton = $('.detailViewTitle'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Hierarchy',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail-hierarchy', function () {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getHierarchyResponseData(params).then(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","hierarchyResponseCache","getHierarchyResponseData","params","thisInstance","aDeferred","jQuery","Deferred","$","isEmptyObject","AppConnector","request","then","data","resolve","promise","displayHierarchyResponseData","callbackFunction","app","showScrollBar","height","railVisible","size","showModalWindow","modalContainer","App","Components","Scrollbar","xy","registerHierarchyRecordCount","hierarchyButton","module","getModuleName","action","record","getRecordId","mode","length","response","success","html","result","registerShowHierarchy","view","on","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","registerEvents","_super"],"mappings":"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"}