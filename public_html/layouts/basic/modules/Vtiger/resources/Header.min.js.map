{"version":3,"file":"Header.min.js","sources":["Header.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\n//Show Alert if user is on a unsupported browser (IE7, IE8, ..etc)\nif (\n\t/MSIE 6.0/.test(navigator.userAgent) ||\n\t/MSIE 7.0/.test(navigator.userAgent) ||\n\t/MSIE 8.0/.test(navigator.userAgent) ||\n\t/MSIE 9.0/.test(navigator.userAgent)\n) {\n\tif (app.getCookie('oldbrowser') != 'true') {\n\t\tapp.setCookie('oldbrowser', true, 365);\n\t\twindow.location.href = 'layouts/basic/modules/Vtiger/browsercompatibility/Browser_compatibility.html';\n\t}\n}\n\n$.Class(\n\t'Vtiger_Header_Js',\n\t{\n\t\tself: false,\n\t\tgetInstance: function () {\n\t\t\tif (this.self != false) {\n\t\t\t\treturn this.self;\n\t\t\t}\n\t\t\tthis.self = new Vtiger_Header_Js();\n\t\t\treturn this.self;\n\t\t}\n\t},\n\t{\n\t\tmenuContainer: false,\n\t\tcontentContainer: false,\n\t\tinit: function () {\n\t\t\tthis.setContentsContainer('.js-base-container');\n\t\t},\n\t\tsetContentsContainer: function (element) {\n\t\t\tif (element instanceof $) {\n\t\t\t\tthis.contentContainer = element;\n\t\t\t} else {\n\t\t\t\tthis.contentContainer = $(element);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\tgetContentsContainer: function () {\n\t\t\treturn this.contentContainer;\n\t\t},\n\t\tregisterQuickCreateSearch() {\n\t\t\t$('.js-quickcreate-search').on('keyup', function () {\n\t\t\t\tlet value = $(this).val().toLowerCase();\n\t\t\t\t$('.quickCreateModules .js-quickcreate-search-item a').filter(function () {\n\t\t\t\t\tlet item = $(this).closest('.js-quickcreate-search-item');\n\t\t\t\t\tif ($(this).text().toLowerCase().indexOf(value) > -1) {\n\t\t\t\t\t\titem.removeClass('d-none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem.addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$('.js-quickcreate-search-block').hide();\n\t\t\t\t$('.js-quickcreate-search-item')\n\t\t\t\t\t.not('.d-none')\n\t\t\t\t\t.each(function () {\n\t\t\t\t\t\t$(this).closest('.js-quickcreate-search-block').show();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tshowAnnouncement: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet announcementContainer = $('#announcements');\n\t\t\tlet announcements = announcementContainer.find('.announcement');\n\t\t\tif (announcements.length > 0) {\n\t\t\t\tlet announcement = announcements.first();\n\t\t\t\tlet aid = announcement.data('id');\n\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tannouncement.find('.modal'),\n\t\t\t\t\tfunction (modal) {\n\t\t\t\t\t\tannouncement.remove();\n\t\t\t\t\t\tmodal.find('button').on('click', function (e) {\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Announcements',\n\t\t\t\t\t\t\t\taction: 'BasicAjax',\n\t\t\t\t\t\t\t\tmode: 'mark',\n\t\t\t\t\t\t\t\trecord: aid,\n\t\t\t\t\t\t\t\ttype: $(this).data('type')\n\t\t\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\tthisInstance.showAnnouncement();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t'',\n\t\t\t\t\t{ backdrop: 'static', keyboard: false }\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tregisterAnnouncements: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet announcementContainer = $('#announcements');\n\t\t\tif (announcementContainer.length == 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthisInstance.showAnnouncement();\n\t\t},\n\t\tregisterCalendarButtonClickEvent: function () {\n\t\t\tlet element = $('#calendarBtn');\n\t\t\tlet dateFormat = element.data('dateFormat');\n\t\t\tlet currentDate = element.data('date');\n\t\t\tlet vtigerDateFormat = app.convertToDatePickerFormat(dateFormat);\n\t\t\telement.on('click', function (e) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\telement.closest('div.nav').find('div.open').removeClass('open');\n\t\t\t\tlet calendar = $('#' + element.data('datepickerId'));\n\t\t\t\tif ($(calendar).is(':visible')) {\n\t\t\t\t\telement.DatePickerHide();\n\t\t\t\t} else {\n\t\t\t\t\telement.DatePickerShow();\n\t\t\t\t}\n\t\t\t});\n\t\t\telement.DatePicker({\n\t\t\t\tformat: vtigerDateFormat,\n\t\t\t\tdate: currentDate,\n\t\t\t\tcalendars: 1,\n\t\t\t\tstarts: 1,\n\t\t\t\tclassName: 'globalCalendar'\n\t\t\t});\n\t\t},\n\t\tisFreeDay: function (dayOfWeek) {\n\t\t\tif (dayOfWeek == 0 || dayOfWeek == 6) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tbasicSearch: function () {\n\t\t\tlet thisInstance = this;\n\t\t\t$('.js-global-search__value').on('keypress', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tif (e.which == 13) {\n\t\t\t\t\tthisInstance.hideSearchMenu();\n\t\t\t\t\tthisInstance.labelSearch(currentTarget);\n\t\t\t\t}\n\t\t\t});\n\t\t\t$('.js-global-search-operator').on('click', function (e) {\n\t\t\t\tlet currentTarget = $(e.target);\n\t\t\t\tlet block = currentTarget.closest('.js-global-search__input');\n\t\t\t\tblock.find('.js-global-search__value').data('operator', currentTarget.data('operator'));\n\t\t\t\tblock.find('.js-global-search-operator .dropdown-item').removeClass('active');\n\t\t\t\tcurrentTarget.closest('.dropdown-item').addClass('active');\n\t\t\t});\n\t\t\tif ($('#gsAutocomplete').val() == 1) {\n\t\t\t\t$.widget('custom.gsAutocomplete', $.ui.autocomplete, {\n\t\t\t\t\t_create: function () {\n\t\t\t\t\t\tthis._super();\n\t\t\t\t\t\tthis.widget().menu('option', 'items', '> :not(.ui-autocomplete-category)');\n\t\t\t\t\t},\n\t\t\t\t\t_renderMenu: function (ul, items) {\n\t\t\t\t\t\tlet that = this,\n\t\t\t\t\t\t\tcurrentCategory = '';\n\t\t\t\t\t\t$.each(items, function (index, item) {\n\t\t\t\t\t\t\tif (item.category != currentCategory) {\n\t\t\t\t\t\t\t\tul.append(\"<li class='ui-autocomplete-category'>\" + item.category + '</li>');\n\t\t\t\t\t\t\t\tcurrentCategory = item.category;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthat._renderItemData(ul, item);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t_renderItemData: function (ul, item) {\n\t\t\t\t\t\treturn this._renderItem(ul, item).data('ui-autocomplete-item', item);\n\t\t\t\t\t},\n\t\t\t\t\t_renderItem: function (ul, item) {\n\t\t\t\t\t\tlet url = 'index.php?module=' + item.module + '&view=Detail&record=' + item.id;\n\t\t\t\t\t\treturn $('<li>')\n\t\t\t\t\t\t\t.data('item.autocomplete', item)\n\t\t\t\t\t\t\t.append($(\"<a href='\" + url + \"' title='\" + item.label + \"'></a>\").html(item.label))\n\t\t\t\t\t\t\t.appendTo(ul);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$('.js-global-search__value').gsAutocomplete({\n\t\t\t\t\tminLength: app.getMainParams('gsMinLength'),\n\t\t\t\t\tsource: function (request, response) {\n\t\t\t\t\t\tlet basicSearch = new Vtiger_BasicSearch_Js();\n\t\t\t\t\t\tbasicSearch.reduceNumberResults = app.getMainParams('gsAmountResponse');\n\t\t\t\t\t\tbasicSearch.returnHtml = false;\n\t\t\t\t\t\tbasicSearch.setMainContainer(this.element.closest('.js-global-search__input'));\n\t\t\t\t\t\tbasicSearch.search(request.term).done(function (data) {\n\t\t\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\t\t\tlet serverDataFormat = data.result;\n\t\t\t\t\t\t\tlet reponseDataList = [];\n\t\t\t\t\t\t\tfor (let id in serverDataFormat) {\n\t\t\t\t\t\t\t\tlet responseData = serverDataFormat[id];\n\t\t\t\t\t\t\t\treponseDataList.push(responseData);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tclasses: {\n\t\t\t\t\t\t'ui-autocomplete': 'u-overflow-y-auto u-overflow-x-hidden u-max-h-70vh u-max-w-sm-70 u-max-w-lg-40'\n\t\t\t\t\t},\n\t\t\t\t\tselect: function (event, ui) {\n\t\t\t\t\t\tlet selectedItemData = ui.item;\n\t\t\t\t\t\tif (selectedItemData.permitted) {\n\t\t\t\t\t\t\tlet url = 'index.php?module=' + selectedItemData.module + '&view=Detail&record=' + selectedItemData.id;\n\t\t\t\t\t\t\twindow.location.href = url;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},\n\t\t\t\t\tclose: function (event, ui) {\n\t\t\t\t\t\t//$('.js-global-search__value').val('');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tlabelSearch: function (currentTarget) {\n\t\t\tlet val = currentTarget.val();\n\t\t\tif (val == '') {\n\t\t\t\tapp.showAlert(app.vtranslate('JS_PLEASE_ENTER_SOME_VALUE'));\n\t\t\t\tcurrentTarget.focus();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet progress = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet basicSearch = new Vtiger_BasicSearch_Js();\n\t\t\tbasicSearch.setMainContainer(currentTarget.closest('.js-global-search__input'));\n\t\t\tbasicSearch.search(val).done(function (data) {\n\t\t\t\tbasicSearch.showSearchResults(data);\n\t\t\t\tprogress.progressIndicator({\n\t\t\t\t\tmode: 'hide'\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterHotKeys: function () {\n\t\t\t$('.hotKey').each(function (index) {\n\t\t\t\tlet thisObject = this;\n\t\t\t\tlet key = $(thisObject).data('hotkeys');\n\t\t\t\tif (key != '') {\n\t\t\t\t\tMousetrap.bind(key, function () {\n\t\t\t\t\t\tthisObject.click();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterReminderNotice: function () {\n\t\t\tlet self = this;\n\t\t\t$('#page').before(\n\t\t\t\t`<div class=\"remindersNoticeContainer\" tabindex=\"-1\" role=\"dialog\" aria-label=\"${app.vtranslate(\n\t\t\t\t\t'JS_REMINDER'\n\t\t\t\t)}\" aria-hidden=\"true\"></div>`\n\t\t\t);\n\t\t\tlet block = $('.remindersNoticeContainer');\n\t\t\tlet remindersNotice = $('.remindersNotice');\n\t\t\tremindersNotice.on('click', function () {\n\t\t\t\tif (!remindersNotice.hasClass('autoRefreshing')) {\n\t\t\t\t\tVtiger_Index_Js.requestReminder();\n\t\t\t\t}\n\t\t\t\tself.hideActionMenu();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tblock.toggleClass('toggled');\n\t\t\t\tself.hideReminderNotification();\n\t\t\t\tapp.closeSidebar();\n\t\t\t\tself.hideSearchMenu();\n\t\t\t});\n\t\t},\n\t\tregisterReminderNotification: function () {\n\t\t\tlet self = this;\n\t\t\t$('#page').before('<div class=\"remindersNotificationContainer\" tabindex=\"-1\" role=\"dialog\"></div>');\n\t\t\tlet block = $('.remindersNotificationContainer');\n\t\t\tlet remindersNotice = $('.notificationsNotice');\n\t\t\tremindersNotice.on('click', function () {\n\t\t\t\tif (!remindersNotice.hasClass('autoRefreshing')) {\n\t\t\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t\t\t}\n\t\t\t\tself.hideActionMenu();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tblock.toggleClass('toggled');\n\t\t\t\tself.hideReminderNotice();\n\t\t\t\tapp.closeSidebar();\n\t\t\t\tself.hideSearchMenu();\n\t\t\t});\n\t\t},\n\t\ttoggleBreadcrumbActions(container) {\n\t\t\tlet actionsContainer = container.find('.js-header-toggle__actions');\n\t\t\tif (!actionsContainer.length) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet actionBtn = container.find('.js-header-toggle__actions-btn');\n\t\t\tif (!actionsContainer.closest('.js-btn-toolbar').length) {\n\t\t\t\tconst actionBtnMargin = 5;\n\t\t\t\tconst cssActionsTop = {\n\t\t\t\t\ttop: actionBtn.offset().top + actionBtn.outerHeight() + actionBtnMargin\n\t\t\t\t};\n\t\t\t\tactionsContainer.css(cssActionsTop);\n\t\t\t}\n\t\t\tactionBtn.on('click', () => {\n\t\t\t\tactionsContainer.toggleClass('is-active');\n\t\t\t});\n\t\t},\n\t\tregisterMobileEvents: function () {\n\t\t\tconst self = this,\n\t\t\t\tcontainer = this.getContentsContainer();\n\t\t\t$('.rightHeaderBtnMenu').on('click', function () {\n\t\t\t\tself.hideActionMenu();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tself.hideSearchMenu();\n\t\t\t\tself.hideReminderNotice();\n\t\t\t\tself.hideReminderNotification();\n\t\t\t\t$('.mobileLeftPanel ').toggleClass('mobileMenuOn');\n\t\t\t});\n\t\t\t$('.js-quick-action-btn').on('click', function () {\n\t\t\t\tlet currentTarget = $(this);\n\t\t\t\tapp.closeSidebar();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tself.hideSearchMenu();\n\t\t\t\tself.hideReminderNotice();\n\t\t\t\tself.hideReminderNotification();\n\t\t\t\t$('.actionMenu').toggleClass('actionMenuOn');\n\t\t\t\tif (currentTarget.hasClass('active')) {\n\t\t\t\t\tcurrentTarget.removeClass('active');\n\t\t\t\t\tcurrentTarget.attr('aria-expanded', 'false');\n\t\t\t\t\tcurrentTarget.popover();\n\t\t\t\t} else {\n\t\t\t\t\tcurrentTarget.addClass('active');\n\t\t\t\t\tcurrentTarget.attr('aria-expanded', 'true');\n\t\t\t\t\tcurrentTarget.popover('disable');\n\t\t\t\t}\n\t\t\t\t$('.quickCreateModules').on('click', function () {\n\t\t\t\t\tself.hideActionMenu();\n\t\t\t\t});\n\t\t\t});\n\t\t\t$('.searchMenuBtn').on('click', function () {\n\t\t\t\tlet currentTarget = $(this);\n\t\t\t\tapp.closeSidebar();\n\t\t\t\tself.hideActionMenu();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tself.hideReminderNotice();\n\t\t\t\tself.hideReminderNotification();\n\t\t\t\t$('.searchMenu').toggleClass('toogleSearchMenu');\n\t\t\t\tif (currentTarget.hasClass('active')) {\n\t\t\t\t\tcurrentTarget.removeClass('active');\n\t\t\t\t\t$('.searchMenuBtn .c-header__btn').attr('aria-expanded', 'false');\n\t\t\t\t} else {\n\t\t\t\t\tcurrentTarget.addClass('active');\n\t\t\t\t\t$('.searchMenuBtn .c-header__btn').attr('aria-expanded', 'true');\n\t\t\t\t}\n\t\t\t});\n\t\t\t$('.js-header__btn--mail .dropdown').on('show.bs.dropdown', function () {\n\t\t\t\tapp.closeSidebar();\n\t\t\t\tself.hideActionMenu();\n\t\t\t\tself.hideBreadcrumbActionMenu();\n\t\t\t\tself.hideReminderNotice();\n\t\t\t\tself.hideReminderNotification();\n\t\t\t\tself.hideSearchMenu();\n\t\t\t});\n\t\t\tthis.toggleBreadcrumbActions(container);\n\t\t},\n\t\thideMobileMenu: function () {\n\t\t\t$('.mobileLeftPanel ').removeClass('mobileMenuOn');\n\t\t},\n\t\thideSearchMenu: function () {\n\t\t\t$('.searchMenu').removeClass('toogleSearchMenu');\n\t\t},\n\t\thideActionMenu: function () {\n\t\t\t$('.actionMenu').removeClass('actionMenuOn');\n\t\t},\n\t\thideBreadcrumbActionMenu: function () {\n\t\t\t$('.js-header-toggle__actions').removeClass('is-active');\n\t\t},\n\t\thideReminderNotice: function () {\n\t\t\t$('.remindersNoticeContainer').removeClass('toggled');\n\t\t},\n\t\thideReminderNotification: function () {\n\t\t\t$('.remindersNotificationContainer').removeClass('toggled');\n\t\t},\n\t\tregisterFooTable: function () {\n\t\t\tlet container = $('.tableRWD');\n\t\t\tcontainer.find('thead tr th:gt(1)').attr('data-hide', 'phone');\n\t\t\tcontainer.find('thead tr th:gt(3)').attr('data-hide', 'tablet,phone');\n\t\t\tcontainer.find('thead tr th:last').attr('data-hide', '');\n\t\t\tlet whichColumnEnable = container.find('thead').attr('col-visible-alltime');\n\t\t\tcontainer.find('thead tr th:eq(' + whichColumnEnable + ')').attr('data-hide', '');\n\t\t\t$('.tableRWD, .customTableRWD').footable({\n\t\t\t\tbreakpoints: {\n\t\t\t\t\tphone: 768,\n\t\t\t\t\ttablet: 1024\n\t\t\t\t},\n\t\t\t\taddRowToggle: true,\n\t\t\t\ttoggleSelector: ' > tbody > tr:not(.footable-row-detail)'\n\t\t\t});\n\t\t\t$('.footable-toggle').on('click', function (event) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\t$(this).trigger('footable_toggle_row');\n\t\t\t});\n\t\t\tlet records = $('.customTableRWD').find('[data-toggle-visible=false]');\n\t\t\trecords.find('.footable-toggle').css('display', 'none');\n\t\t},\n\t\tregisterSiteBarButton(container) {\n\t\t\tconst key = 'ShowHideRightPanel' + app.getModuleName();\n\t\t\tif (app.cacheGet(key) == 'show') {\n\t\t\t\tthis.toggleSiteBar(container.find('.toggleSiteBarRightButton'));\n\t\t\t} else if (app.cacheGet(key) == null) {\n\t\t\t\tif (container.find('.siteBarRight').data('showpanel') == 1) {\n\t\t\t\t\tthis.toggleSiteBar(container.find('.toggleSiteBarRightButton'));\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontainer.find('.toggleSiteBarRightButton').on('click', (e) => {\n\t\t\t\tlet toogleButton = $(e.currentTarget);\n\t\t\t\tif (toogleButton.closest('.siteBarRight').hasClass('hideSiteBar')) {\n\t\t\t\t\tapp.cacheSet(key, 'show');\n\t\t\t\t} else {\n\t\t\t\t\tapp.cacheSet(key, 'hide');\n\t\t\t\t}\n\t\t\t\tthis.toggleSiteBar(toogleButton);\n\t\t\t});\n\t\t},\n\t\ttoggleSiteBar(toogleButton) {\n\t\t\t$('.rowContent').toggleClass('js-sitebar--active');\n\t\t\ttoogleButton.closest('.siteBarRight').toggleClass('hideSiteBar');\n\t\t\ttoogleButton.find('.fas').toggleClass('fa-chevron-right fa-chevron-left');\n\t\t\ttoogleButton.toggleClass('hideToggleSiteBarRightButton');\n\t\t},\n\t\tregisterToggleButton: function () {\n\t\t\t$('.buttonTextHolder .dropdown-menu a').on('click', function () {\n\t\t\t\t$(this).parents('.d-inline-block').find('.dropdown-toggle .textHolder').html($(this).text());\n\t\t\t});\n\t\t},\n\t\tlistenTextAreaChange: function () {\n\t\t\tlet thisInstance = this;\n\t\t\t$('textarea').on('keyup', function () {\n\t\t\t\tlet elem = $(this);\n\t\t\t\tif (!elem.data('has-scroll')) {\n\t\t\t\t\telem.data('has-scroll', true);\n\t\t\t\t\telem.on('scroll keyup', function () {\n\t\t\t\t\t\tthisInstance.resizeTextArea($(this));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthisInstance.resizeTextArea($(this));\n\t\t\t});\n\t\t},\n\t\tresizeTextArea: function (elem) {\n\t\t\telem.height(1);\n\t\t\telem.scrollTop(0);\n\t\t\telem.height(elem[0].scrollHeight - elem[0].clientHeight + elem.height());\n\t\t},\n\t\tregisterKnowledgeBaseModal() {\n\t\t\t$('.js-knowledge-base-modal').on('click', () => {\n\t\t\t\tif (window.KnowledgeBaseModalVueComponent.mounted === undefined) {\n\t\t\t\t\twindow.KnowledgeBaseModalVueComponent.mount({\n\t\t\t\t\t\tel: '#KnowledgeBaseModal',\n\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\tmoduleName: 'KnowledgeBase',\n\t\t\t\t\t\t\tdialog: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tKnowledgeBaseModalVueComponent.mounted = true;\n\t\t\t\t} else {\n\t\t\t\t\tvuexStore.commit('KnowledgeBase/setDialog', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterChat() {\n\t\t\tif (window === window.parent && window.ChatModalVueComponent !== undefined) {\n\t\t\t\twindow.ChatModalVueComponent.mount({\n\t\t\t\t\tel: '#ChatModalVue'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tconst container = thisInstance.getContentsContainer(),\n\t\t\t\tmenuContainer = container.find('.js-menu--scroll'),\n\t\t\t\tquickCreateModal = container.find('.quickCreateModules');\n\t\t\tapp.showNewScrollbarLeft(menuContainer, { suppressScrollX: true });\n\t\t\tapp.showNewScrollbar(menuContainer.find('.subMenu').last(), { suppressScrollX: true });\n\t\t\tthisInstance.listenTextAreaChange();\n\t\t\tthisInstance.registerFooTable(); //Enable footable\n\t\t\t$('.js-clear-history').on('click', () => {\n\t\t\t\tapp.clearBrowsingHistory();\n\t\t\t});\n\t\t\t$('.globalSearch').on('click', function () {\n\t\t\t\tlet currentTarget = $(this);\n\t\t\t\tthisInstance.hideSearchMenu();\n\t\t\t\tlet advanceSearchInstance = new Vtiger_AdvanceSearch_Js();\n\t\t\t\tadvanceSearchInstance.setParentContainer(currentTarget.closest('.js-global-search__input'));\n\t\t\t\tadvanceSearchInstance.initiateSearch();\n\t\t\t});\n\t\t\t$('.searchIcon').on('click', function (e) {\n\t\t\t\tlet currentTarget = $(this).closest('.js-global-search__input').find('.js-global-search__value');\n\t\t\t\tlet pressEvent = $.Event('keypress');\n\t\t\t\tpressEvent.which = 13;\n\t\t\t\tcurrentTarget.trigger(pressEvent);\n\t\t\t});\n\t\t\tthisInstance.registerAnnouncements();\n\t\t\tthisInstance.registerHotKeys();\n\t\t\tthisInstance.registerToggleButton();\n\t\t\tthisInstance.registerSiteBarButton($('#centerPanel'));\n\t\t\t//this.registerCalendarButtonClickEvent();\n\t\t\t//After selecting the global search module, focus the input element to type\n\t\t\t$('.basicSearchModulesList').on('change', function () {\n\t\t\t\tlet value = $(this).closest('.js-global-search__input').find('.js-global-search__value');\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tvalue.focus();\n\t\t\t\t}, 100);\n\t\t\t});\n\t\t\tthisInstance.basicSearch();\n\t\t\tquickCreateModal.on('click', '.quickCreateModule', function (e, params) {\n\t\t\t\tlet moduleName = $(e.currentTarget).data('name');\n\t\t\t\tquickCreateModal.modal('hide');\n\t\t\t\tApp.Components.QuickCreate.createRecord(moduleName);\n\t\t\t});\n\t\t\tthisInstance.registerReminderNotification();\n\t\t\tthisInstance.registerMobileEvents();\n\t\t\tthisInstance.registerReminderNotice();\n\t\t\tthisInstance.registerQuickCreateSearch();\n\t\t\tthisInstance.registerKnowledgeBaseModal();\n\t\t\tthisInstance.registerChat();\n\t\t}\n\t}\n);\njQuery(function () {\n\twindow.addEventListener('popstate', (event) => {\n\t\tif (event.state) {\n\t\t\twindow.location.href = event.state;\n\t\t}\n\t});\n\tVtiger_Header_Js.getInstance().registerEvents();\n});\n"],"names":["test","navigator","userAgent","app","getCookie","setCookie","window","location","href","$","Class","self","getInstance","Vtiger_Header_Js","menuContainer","contentContainer","init","setContentsContainer","element","getContentsContainer","registerQuickCreateSearch","on","value","val","toLowerCase","filter","item","closest","text","indexOf","removeClass","addClass","hide","not","each","show","showAnnouncement","thisInstance","announcementContainer","announcements","find","length","announcement","first","aid","data","showModalWindow","modal","remove","AppConnector","request","module","action","mode","record","type","done","hideModalWindow","backdrop","keyboard","registerAnnouncements","registerCalendarButtonClickEvent","dateFormat","currentDate","vtigerDateFormat","convertToDatePickerFormat","e","stopImmediatePropagation","calendar","is","DatePickerHide","DatePickerShow","DatePicker","format","date","calendars","starts","className","isFreeDay","dayOfWeek","basicSearch","currentTarget","which","hideSearchMenu","labelSearch","target","block","widget","ui","autocomplete","_create","_super","menu","_renderMenu","ul","items","that","currentCategory","index","category","append","_renderItemData","_renderItem","url","id","label","html","appendTo","gsAutocomplete","minLength","getMainParams","source","response","Vtiger_BasicSearch_Js","reduceNumberResults","returnHtml","setMainContainer","search","term","JSON","parse","serverDataFormat","result","reponseDataList","responseData","push","classes","select","event","selectedItemData","permitted","close","showAlert","vtranslate","focus","progress","progressIndicator","position","blockInfo","enabled","showSearchResults","registerHotKeys","thisObject","key","Mousetrap","bind","click","registerReminderNotice","before","remindersNotice","hasClass","Vtiger_Index_Js","requestReminder","hideActionMenu","hideBreadcrumbActionMenu","toggleClass","hideReminderNotification","closeSidebar","registerReminderNotification","getNotificationsForReminder","hideReminderNotice","toggleBreadcrumbActions","container","actionsContainer","actionBtn","cssActionsTop","top","offset","outerHeight","css","registerMobileEvents","attr","popover","hideMobileMenu","registerFooTable","whichColumnEnable","footable","breakpoints","phone","tablet","addRowToggle","toggleSelector","stopPropagation","trigger","records","registerSiteBarButton","getModuleName","cacheGet","toggleSiteBar","toogleButton","cacheSet","registerToggleButton","parents","listenTextAreaChange","elem","resizeTextArea","height","scrollTop","scrollHeight","clientHeight","registerKnowledgeBaseModal","KnowledgeBaseModalVueComponent","mounted","mount","el","state","moduleName","dialog","vuexStore","commit","registerChat","parent","ChatModalVueComponent","registerEvents","quickCreateModal","showNewScrollbarLeft","suppressScrollX","showNewScrollbar","last","clearBrowsingHistory","advanceSearchInstance","Vtiger_AdvanceSearch_Js","setParentContainer","initiateSearch","pressEvent","Event","setTimeout","App","Components","QuickCreate","createRecord","jQuery","addEventListener"],"mappings":"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"}