
jQuery.Class("Vtiger_RelatedList_Js", {getInstance:function(g, e, b, f){var c = app.getModuleName() + "_RelatedList_Js"; var d = Vtiger_RelatedList_Js; if (typeof window[c] != "undefined"){var a = new window[c]()} else{var a = new d()}a.parentRecordId = g; a.parentModuleName = e; a.selectedRelatedTabElement = b; a.moduleName = f; a.relatedTabsContainer = b.closest("div.related"); a.content = $("div.contents", a.relatedTabsContainer.closest("div.detailViewContainer")); a.relatedView = a.content.find("input.relatedView").val(); return a}, triggerMassAction:function(j, m){var b = Vtiger_List_Js.getInstance(); var f = b.checkListRecordSelected(); if (f != true){var i = jQuery.progressIndicator(); var k = b.readSelectedIds(true); var l = b.readExcludedIds(true); var c = b.getCurrentCvId(); var e = {viewname:c, selected_ids:k, excluded_ids:l}; var h = Vtiger_List_Js.getInstance(); if (h.getListSearchInstance()){var a = h.getListSearchInstance().getAlphabetSearchValue(); e.search_params = JSON.stringify(h.getListSearchInstance().getListSearchParams()); if ((typeof a != "undefined") && (a.length > 0)){e.search_key = h.getListSearchInstance().getAlphabetSearchField(); e.search_value = a; e.operator = "s"}}var g = {type:"POST", url:j, data:e}; if (m === "sendByForm"){var d = $('<form method="POST" action="' + j + '">'); if (typeof csrfMagicName !== "undefined"){d.append($("<input />", {name:csrfMagicName, value:csrfMagicToken}))}$.each(e, function(o, n){d.append($("<input />", {name:o, value:n}))}); $("body").append(d); d.submit(); i.progressIndicator({mode:"hide"})} else{AppConnector.request(g).then(function(n){i.progressIndicator({mode:"hide"}); if (n && n.result !== null){if (n.result.notify){Vtiger_Helper_Js.showMessage(n.result.notify)}if (n.result.reloadList){Vtiger_Detail_Js.reloadRelatedList()}if (n.result.procesStop){i.progressIndicator({mode:"hide"}); return false}}}, function(n, o){i.progressIndicator({mode:"hide"})})}} else{b.noRecordSelectedAlert()}}}, {selectedRelatedTabElement:false, parentRecordId:false, parentModuleName:false, moduleName:false, relatedTabsContainer:false, content:false, listSearchInstance:false, detailViewContentHolder:false, relatedView:false, frameProgress:false, setSelectedTabElement:function(a){this.selectedRelatedTabElement = a}, getSelectedTabElement:function(){return this.selectedRelatedTabElement}, getParentId:function(){return this.parentRecordId}, getRelatedContainer:function(){return this.content}, setRelatedContainer:function(a){this.content = a; this.relatedView = a.find("input.relatedView").val()}, getContentHolder:function(){if (this.detailViewContentHolder == false){this.detailViewContentHolder = $("div.details div.contents")}return this.detailViewContentHolder}, getCurrentPageNum:function(){return $('input[name="currentPageNum"]', this.content).val()}, setCurrentPageNumber:function(a){$('input[name="currentPageNum"]', this.content).val(a)}, getOrderBy:function(){return $("#orderBy", this.content).val()}, getSortOrder:function(){return $("#sortOrder", this.content).val()}, getCompleteParams:function(){var b = this.getRelatedContainer(); var d = {view:"Detail", module:this.parentModuleName, record:this.getParentId(), relatedModule:this.moduleName, sortorder:this.getSortOrder(), orderby:this.getOrderBy(), page:this.getCurrentPageNum(), relatedView:this.relatedView, mode:"showRelatedList"}; if (b.find(".pagination").length){d.totalCount = b.find(".pagination").data("totalCount")}if (b.find(".entityState").length){d.entityState = b.find(".entityState").val()}if (this.moduleName == "Calendar"){if (this.content.find(".switchBtn").is(":checked")){d.time = "current"} else{d.time = "history"}}if (this.listSearchInstance){var c = this.listSearchInstance.getAlphabetSearchValue(); d.search_params = JSON.stringify(this.listSearchInstance.getListSearchParams())}if ((typeof c != "undefined") && (c.length > 0)){d.search_key = this.listSearchInstance.getAlphabetSearchField(); d.search_value = c; d.operator = "s"}if (this.moduleName == "Calendar"){var a = b.find(".switchBtn"); if (a.length){d.time = a.prop("checked")?"current":"history"}}return d}, loadRelatedList:function(g){var b = jQuery.Deferred(); var c = this; if (typeof c.moduleName == "undefined" || c.moduleName.length <= 0){var e = Vtiger_Detail_Js.getInstance(); e.loadWidgets(); return b.promise()}var d = jQuery.progressIndicator({position:"html", blockInfo:{enabled:true}}); var f = this.getCompleteParams(); var a = c.relatedTabsContainer.find("li.active").data("reference"); AppConnector.request($.extend(f, g)).then(function(h){var i = Vtiger_Detail_Js.getInstance(); i.loadWidgets(); if (a != "ProductsAndServices"){c.relatedTabsContainer.find("li").removeClass("active"); c.selectedRelatedTabElement.addClass("active"); c.content.html(h); d.progressIndicator({mode:"hide"}); Vtiger_Helper_Js.showHorizontalTopScrollBar(); $(".pageNumbers", c.content).tooltip(); c.registerPostLoadEvents(); if (c.listSearchInstance){c.listSearchInstance.registerBasicEvents()}}b.resolve(h)}, function(i, h){b.reject(i, h)}); return b.promise()}, triggerDisplayTypeEvent:function(){var a = app.cacheGet("widthType", "narrowWidthType"); if (a){var b = this.content.find(".listViewEntriesTable").find("td,th"); b.attr("class", a)}}, showSelectRelationPopup:function(a){var b = jQuery.Deferred(); var d = this; var e = Vtiger_Popup_Js.getInstance(); var c = this.getPopupParams(); $.extend(c, a); e.show(c, function(g){var f = JSON.parse(g); d.addRelations(Object.keys(f)).then(function(j){var i = Vtiger_Detail_Js.getInstance(); d.loadRelatedList().then(function(k){b.resolve(k); i.registerRelatedModulesRecordCount()}); var h = d.getSelectedTabElement(); if (h.data("link-key") == "LBL_RECORD_SUMMARY"){i.loadWidgets(); i.registerRelatedModulesRecordCount()}})}); return b.promise()}, addRelations:function(b){var a = jQuery.Deferred(); AppConnector.request({module:this.parentModuleName, action:"RelationAjax", mode:"addRelation", related_module:this.moduleName, src_record:this.parentRecordId, related_record_list:$.isArray(b)?JSON.stringify(b):b}).then(function(c){a.resolve(c)}, function(d, c){a.reject(d, c)}); return a.promise()}, getPopupParams:function(){return{module:this.moduleName, src_module:this.parentModuleName, src_record:this.parentRecordId, multi_select:true}}, deleteRelation:function(b){var a = jQuery.Deferred(); AppConnector.request({module:this.parentModuleName, action:"RelationAjax", mode:"deleteRelation", related_module:this.moduleName, src_record:this.parentRecordId, related_record_list:JSON.stringify(b)}).then(function(c){a.resolve(c)}, function(d, c){a.reject(d, c)}); return a.promise()}, sortHandler:function(c){var b = jQuery.Deferred(); var a = c.data("nextsortorderval"); if (typeof a === "undefined"){return}this.loadRelatedList({orderby:c.data("fieldname"), sortorder:a, }).then(function(d){b.resolve(d)}, function(e, d){b.reject(e, d)}); return b.promise()}, nextPageHandler:function(){var c = jQuery.Deferred(); var d = this; var e = jQuery("#pageLimit", this.content).val(); var f = jQuery("#noOfEntries", this.content).val(); if (f == e){var b = this.getCurrentPageNum(); var a = parseInt(b) + 1; this.loadRelatedList({page:a}).then(function(g){d.setCurrentPageNumber(a); c.resolve(g)}, function(h, g){c.reject(h, g)})}return c.promise()}, previousPageHandler:function(){var c = jQuery.Deferred(); var d = this; var c = jQuery.Deferred(); var a = this.getCurrentPageNum(); if (a > 1){var b = parseInt(a) - 1; this.loadRelatedList({page:b}).then(function(e){d.setCurrentPageNumber(b); c.resolve(e)}, function(f, e){c.reject(f, e)})}return c.promise()}, selectPageHandler:function(a){var b = jQuery.Deferred(); var c = this; var b = jQuery.Deferred(); this.loadRelatedList({page:a, }).then(function(d){c.setCurrentPageNumber(a); b.resolve(d)}, function(e, d){b.reject(e, d)}); return b.promise()}, pageJumpHandler:function(i){var h = jQuery.Deferred(); var l = this; if (i.which == 13){var d = jQuery(i.currentTarget); var b = Vtiger_WholeNumberGreaterThanZero_Validator_Js.invokeValidation(d); if (typeof b != "undefined"){d.validationEngine("showPrompt", b, "", "topLeft", true); i.preventDefault()} else{d.validationEngine("hideAll"); var c = parseInt(d.val()); var g = parseInt(jQuery("#totalPageCount", l.content).text()); if (c > g){var k = app.vtranslate("JS_PAGE_NOT_EXIST"); d.validationEngine("showPrompt", k, "", "topLeft", true)}var j = d.parent().find(".formError"); if (j.length < 1){var f = jQuery('input[name="currentPageNum"]', l.content).val(); if (c == f){var m = app.vtranslate("JS_YOU_ARE_IN_PAGE_NUMBER") + " " + c; var a = {text:m, type:"info"}; Vtiger_Helper_Js.showMessage(a); i.preventDefault(); return false}this.loadRelatedList({page:c}).then(function(e){l.setCurrentPageNumber(c); h.resolve(e)}, function(n, e){h.reject(n, e)})} else{i.preventDefault()}}}return h.promise()}, addRelatedRecord:function(d, i){var h = jQuery.Deferred(); var l = this; var b = this.moduleName; var r = this.getParentId(); var o = this.parentModuleName; var f = {}; var e = {}; var s = d.data("name"); var m = d.data("url"); e[s] = r; var k = new Array("view", "module", "mode", "action"); var n = function(y){var v, w, A; if (typeof m != "undefined" && m.indexOf("?") !== - 1){var x = m.split("?"); var B = x[1]; var u = B.split("&"); for (v = 0; v < u.length; v++){w = u[v]; A = w.split("="); if (A[0] == "mode" && A[1] == "Calendar"){y.find('a[data-tab-name="Task"]').trigger("click")}}}jQuery('<input type="hidden" name="sourceModule" value="' + o + '" />').appendTo(y); jQuery('<input type="hidden" name="sourceRecord" value="' + r + '" />').appendTo(y); jQuery('<input type="hidden" name="relationOperation" value="true" />').appendTo(y); if (typeof s != "undefined"){var z = y.find('[name="' + s + '"]'); if (z.length == 0){jQuery('<input type="hidden" name="' + s + '" value="' + r + '" />').appendTo(y)}}for (v = 0; v < u.length; v++){w = u[v]; A = w.split("="); if (jQuery.inArray(A[0], k) == "-1" && y.find('[name="' + A[0] + '"]').length == 0){jQuery('<input type="hidden" name="' + A[0] + '" value="' + A[1] + '" />').appendTo(y)}}if (typeof i !== "undefined"){i()}}; var t = function(u){l.loadRelatedList().then(function(v){h.resolve(v)})}; if (typeof m != "undefined" && m.indexOf("?") !== - 1){var q = m.split("?"); var g = q[1]; var p = g.split("&"); for (var j = 0; j < p.length; j++){var a = p[j]; var c = a.split("="); if (jQuery.inArray(c[0], k) == "-1"){e[c[0]] = c[1]}}}f.data = e; f.callbackFunction = t; f.callbackPostShown = n; f.noCache = true; Vtiger_Header_Js.getInstance().quickCreateModule(b, f); return h.promise()}, getRelatedPageCount:function(){var b = jQuery.Deferred(); var c = this.content.find("#totalPageCount"); var d = this.content.find("#totalCount"); var a = c.text(); if (a == ""){c.progressIndicator({}); AppConnector.request({module:this.parentModuleName, action:"RelationAjax", mode:"getRelatedListPageCount", record:this.getParentId(), relatedModule:this.moduleName, }).then(function(g){var f = g.result["page"]; var e = g.result["numberOfRecords"]; d.val(e); c.text(f); c.progressIndicator({mode:"hide"}); b.resolve()}, function(e, f){b.reject(false)})} else{b.resolve()}return b.promise()}, favoritesRelation:function(c, b){var a = jQuery.Deferred(); if (c){AppConnector.request({module:this.parentModuleName, action:"RelationAjax", mode:"updateFavoriteForRecord", record:this.getParentId(), relcrmid:c, relatedModule:this.moduleName, actionMode:b?"delete":"add", }).then(function(d){if (d.result){a.resolve(true)}}, function(d, e){a.reject(false)})} else{a.reject(false)}return a.promise()}, updatePreview:function(a){var c = this.content.find(".listPreviewframe"); this.frameProgress = $.progressIndicator({position:"html", message:app.vtranslate("JS_FRAME_IN_PROGRESS"), blockInfo:{enabled:true}}); var b = ""; if (app.getMainParams("defaultDetailViewName")){b = b + "&mode=showDetailViewByMode&requestMode=" + app.getMainParams("defaultDetailViewName")}c.attr("src", a.replace("view=Detail", "view=DetailPreview") + b)}, registerUnreviewedCountEvent:function(){var b = []; var c = this.content; var a = c.find(".unreviewed").length; c.find("tr.listViewEntries").each(function(){var d = jQuery(this).data("id"); if (d){b.push(d)}}); if (!b || a < 1){return}AppConnector.request({action:"ChangesReviewedOn", mode:"getUnreviewed", module:"ModTracker", sourceModule:this.moduleName, recordsId:b}).then(function(d){var e = d.result; $.each(e, function(g, f){if (f.a > 0){c.find('tr[data-id="' + g + '"] .unreviewed .badge.all').text(f.a)}if (f.m > 0){c.find('tr[data-id="' + g + '"] .unreviewed .badge.mail').text(f.m)}})})}, registerChangeEntityStateEvent:function(){var a = this; var b = this.content; b.on("click", ".dropdownEntityState a", function(d){var c = $(this); b.find(".entityState").val(c.data("value")); b.find(".pagination").data("totalCount", 0); b.find(".dropdownEntityState button").find("span").attr("class", c.find("span").attr("class")); a.loadRelatedList({page:1})})}, registerRowsEvent:function(){var a = this; if (this.relatedView == "List"){this.content.find(".listViewEntries").click(function(c){var b = $(c.target); if (b.is("td")){if (app.getViewName() == "DetailPreview"){top.document.location.href = b.closest("tr").data("recordurl")} else{document.location.href = b.closest("tr").data("recordurl")}}}); this.content.find(".showInventoryRow").click(function(c){var b = $(this); var d = b.closest("tr"); var f = d.next(); if (f.hasClass("listViewInventoryEntries")){f.toggleClass("hide")}})} else{if (this.relatedView == "ListPreview"){this.content.find(".listViewEntries").click(function(b){if ($(b.target).closest("div").hasClass("actions")){return}if ($(b.target).is("button") || $(b.target).parent().is("button")){return}if ($(b.target).closest("a").hasClass("noLinkBtn")){return}if ($(b.target, $(b.currentTarget)).is("td:first-child")){return}if ($(b.target).is('input[type="checkbox"]')){return}if ($.contains($(b.currentTarget).find("td:last-child").get(0), b.target)){return}if ($.contains($(b.currentTarget).find("td:first-child").get(0), b.target)){return}var c = $(this).data("recordurl"); a.content.find(".listViewEntriesTable .listViewEntries").removeClass("active"); $(this).addClass("active"); a.updatePreview(c)})}}}, registerSummationEvent:function(){var a = this; this.content.on("click", ".listViewSummation button", function(){var d = $(this); var b = d.closest("td").find(".calculateValue"); var e = a.getCompleteParams(); e.action = "RelationAjax"; e.mode = "calculate"; e.fieldName = d.data("field"); e.calculateType = d.data("operator"); delete e.view; var c = $.progressIndicator({message:app.vtranslate("JS_CALCULATING_IN_PROGRESS"), position:"html", blockInfo:{enabled:true}}); app.hidePopover(d); AppConnector.request(e).then(function(f){if (f.success){b.html(f.result)} else{b.html("")}c.progressIndicator({mode:"hide"})}); c.progressIndicator({mode:"hide"})})}, registerPreviewEvent:function(){var b = this; var a = this.content.find(".listPreview,.recordsListPreview"); a.height(app.getScreenHeight() - (this.content.offset().top + $(".footerContainer").height())); this.content.find(".listPreviewframe").load(function(){b.frameProgress.progressIndicator({mode:"hide"}); a.height($(this).contents().find(".bodyContents").height() + 2)}); this.content.find(".listViewEntriesTable .listViewEntries").first().trigger("click")}, registerPaginationEvents:function(){var a = this; var b = this.content; this.content.on("click", "#relatedViewNextPageButton", function(c){if ($(this).hasClass("disabled")){return}a.nextPageHandler()}); this.content.on("click", "#relatedViewPreviousPageButton", function(){a.previousPageHandler()}); this.content.on("click", "#relatedListPageJump", function(c){a.getRelatedPageCount()}); this.content.on("click", "#relatedListPageJumpDropDown > li", function(c){c.stopImmediatePropagation()}).on("keypress", "#pageToJump", function(c){a.pageJumpHandler(c)}); this.content.on("click", ".pageNumber", function(){if ($(this).hasClass("disabled")){return false}a.selectPageHandler($(this).data("id"))}); this.content.on("click", "#totalCountBtn", function(){app.hidePopover($(this)); var c = {module:a.parentModuleName, view:"Pagination", mode:"getRelationPagination", record:a.getParentId(), relatedModule:a.moduleName, noOfEntries:$("#noOfEntries", b).val(), page:b.find('[name="currentPageNum"]').val(), }; if (b.find(".entityState").length){c.entityState = b.find(".entityState").val()}AppConnector.request(c).then(function(d){b.find(".paginationDiv").html(d)})})}, registerListEvents:function(){var b = this.content; var a = this; this.content.on("click", ".relatedListHeaderValues", function(c){a.sortHandler($(this))}); this.content.on("click", "a.favorites", function(f){var d = jQuery.progressIndicator({position:"html", blockInfo:{enabled:true}}); var c = $(this); var g = c.closest("tr"); a.favoritesRelation(g.data("id"), c.data("state")).then(function(e){if (e){var h = c.data("state")?0:1; c.data("state", h); c.find(".glyphicon").each(function(){if (jQuery(this).hasClass("hide")){jQuery(this).removeClass("hide")} else{jQuery(this).addClass("hide")}}); d.progressIndicator({mode:"hide"}); var i = app.vtranslate("JS_REMOVED_FROM_FAVORITES"); if (h){i = app.vtranslate("JS_ADDED_TO_FAVORITES")}Vtiger_Helper_Js.showPnotify({text:i, type:"success", animation:"show"})}})}); this.content.on("click", '[name="addButton"]', function(d){var c = $(this); if (c.hasClass("quickCreateSupported") != true){window.location.href = c.data("url"); return}a.addRelatedRecord(c)}); this.content.on("click", "button.selectRelation", function(d){var c = $(this).data("rf"); var f = {}; if (c && Object.keys(c).length > 0){f = {search_key:c.key, search_value:c.name}}a.showSelectRelationPopup(f)}); this.content.on("click", "button.relationDelete", function(d){d.stopImmediatePropagation(); var c = $(this); Vtiger_Helper_Js.showConfirmationBox({message:app.vtranslate("JS_DELETE_CONFIRMATION")}).then(function(f){var g = c.closest("tr"); a.deleteRelation([g.data("id")]).then(function(e){if (e.result){var j = c.closest(".widgetContentBlock"); var i = Vtiger_Detail_Js.getInstance(); if (j.length){i.loadWidget(j); var h = a.getContentHolder().find("[data-type='Updates']"); if (h.length > 0){i.loadWidget(h)}} else{a.loadRelatedList()}i.registerRelatedModulesRecordCount()} else{Vtiger_Helper_Js.showPnotify(app.vtranslate("JS_CANNOT_REMOVE_RELATION"))}})})}); this.content.off("switchChange.bootstrapSwitch").on("switchChange.bootstrapSwitch", ".switchBtn", function(d, c){a.loadRelatedList()}); this.content.on("click", ".relatedViewGroup a", function(d){var c = $(this); a.relatedView = c.data("view"); b.find(".pagination").data("totalCount", 0); a.loadRelatedList({page:1})})}, registerPostLoadEvents:function(){var a = this; app.showBtnSwitch(this.content.find(".switchBtn")); app.showPopoverElementView(this.content.find(".popoverTooltip")); this.registerRowsEvent(); if (this.relatedView == "ListPreview"){this.registerPreviewEvent()}this.listSearchInstance = YetiForce_ListSearch_Js.getInstance(this.content, false, this); app.event.trigger("RelatedList.AfterLoad", a); if (!this.content.find(".gutter").length){a.updateSplit(this.content); a.registerListPreviewScroll(this.content)}}, registerListPreviewScroll:function(a){if (a.find(".fixedListInitial").length){var g = this; var e = a.find(".fixedListInitial"); var i = a.find(".listPreview"); var c = a.closest(".mainBody"); var d = a.find(".wrappedPanel"); var j = a.find(".listViewEntriesDiv"); var f = $(".commonActionsContainer").height(); var h = 6; var b = e.offset().top - f - h; app.showNewBottomTopScrollbar(a.find(".fixedListContent")); app.showNewLeftScrollbar(e); $(window).resize(function(){if (c.scrollTop() >= (e.offset().top + f)){a.find(".gutter").css("left", i.offset().left - 8)}}); c.scroll(function(){var l = a.find(".gutter"); var k = {height:$(window).height() - (l.offset().top + 33)}; l.css(k); e.css(k); d.css(k); if ($(this).scrollTop() >= (e.offset().top + f - h)){if (i.height() + i.offset().top + 33 > $(window).height()){e.css("top", $(this).scrollTop() - b); if ($(window).width() > 993){d.addClass("wrappedPanelOnScroll"); l.addClass("gutterOnScroll"); l.css("left", i.offset().left - 8); l.on("mousedown", function(){$(this).on("mousemove", function(m){$(this).css("left", i.offset().left - 8)})})}}} else{e.css("top", "initial"); if ($(window).width() > 993){var l = a.find(".gutter"); d.removeClass("wrappedPanelOnScroll"); l.removeClass("gutterOnScroll"); l.css("left", 0); l.off("mousedown"); l.off("mousemove")}}})}}, registerSplit:function(a){if ($(window).width() > 993){if (a.length && !a.find(".gutter").length){var d = a.find(".relatedHeader"); var g = a.find(".fixedListInitial"); var k = a.find(".wrappedPanel"); var c = a.find(k[0]); var b = a.find(k[1]); var h = Split([a.find(".fixedListInitial")[0], a.find(".listPreview")[0]], {sizes:[25, 75], minSize:10, gutterSize:8, snapOffset:100, onDrag:function(){var l = (400 / $(window).width()) * 100; if (h.getSizes()[1] < l){h.collapse(1)}if (h.getSizes()[0] < 5){c.addClass("wrappedPanelLeft")} else{c.removeClass("wrappedPanelLeft")}if (h.getSizes()[1] < 10){b.addClass("wrappedPanelRight"); g.width(g.width() - 10)} else{b.removeClass("wrappedPanelRight")}k.css("top", d.height() + d.position().top + 2)}}); k.css("top", d.height() + d.position().top + 2); var e = a.find(".gutter"); var j = a.find(".recordsListPreview"); e.height(j.height() - 33); g.height(j.height() - 33); var f = (15 / $(window).width()) * 100; var i = 100 - f; e.on("dblclick", function(){if (h.getSizes()[0] < 25){h.setSizes([25, 75]); c.removeClass("wrappedPanelLeft")} else{if (h.getSizes()[1] < 25){h.setSizes([75, 25]); b.removeClass("wrappedPanelRight"); e.css("right", "initial"); g.css("padding-right", "10px")} else{if (h.getSizes()[0] > 24 && h.getSizes()[0] < 50){h.setSizes([f, i]); c.addClass("wrappedPanelLeft")} else{if (h.getSizes()[1] > 10 && h.getSizes()[1] < 50){h.collapse(1); b.addClass("wrappedPanelRight"); g.width(g.width() - 10)}}}}}); c.on("dblclick", function(){h.setSizes([25, 75]); c.removeClass("wrappedPanelLeft")}); b.on("dblclick", function(){h.setSizes([75, 25]); b.removeClass("wrappedPanelRight"); e.css("right", "initial"); g.css("padding-right", "10px")}); return h}}}, updateSplit:function(a){if (a.find(".fixedListInitial").length){var i = this; var g = a.find(".fixedListInitial"); var f = a.closest(".commonActionsContainer").height(); var l = a.find(".listPreview"); var d = []; var e = a.closest(".mainBody"); var k = a.find(".wrappedPanel"); var c = a.find(k[0]); var b = a.find(k[1]); var h = i.registerSplit(a); var j = a.find(".rotatedText"); j.first().find(".textCenter").append($(".breadcrumbsContainer .separator").nextAll().text()); j.css({width:c.height(), height:c.height()}); d.push(h); $(window).resize(function(){if ($(window).width() < 993){if (a.find(".gutter").length){d[d.length - 1].destroy(); b.removeClass("wrappedPanelRight"); c.removeClass("wrappedPanelLeft")}} else{if (a.find(".gutter").length !== 1){var o = i.registerSplit(a); var q = a.find(".gutter"); if (e.scrollTop() >= (g.offset().top + f)){q.addClass("gutterOnScroll"); q.css("left", l.offset().left - 8); q.on("mousedown", function(){$(this).on("mousemove", function(r){$(this).css("left", l.offset().left - 8)})})}d.push(o)}if (a.find(".gutter").length !== 1){var m = d[d.length - 1]; var n = (15 / $(window).width()) * 100; var p = 100 - n; if (m !== undefined){if (m.getSizes()[0] < n + 5){m.setSizes([n, p])} else{if (m.getSizes()[1] < n + 5){m.setSizes([p, n])}}}}}})}}, registerRelatedEvents:function(){var a = this.getRelatedContainer(); this.registerUnreviewedCountEvent(); this.registerChangeEntityStateEvent(); this.registerPaginationEvents(); this.registerListEvents(); this.registerPostLoadEvents(); this.registerSummationEvent()}, });
