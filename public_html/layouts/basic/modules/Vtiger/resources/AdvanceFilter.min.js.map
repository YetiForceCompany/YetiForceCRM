{"version":3,"file":"AdvanceFilter.min.js","sources":["AdvanceFilter.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Vtiger_AdvanceFilter_Js',\n\t{\n\t\tgetInstance: function(container) {\n\t\t\tvar module = app.getModuleName();\n\t\t\tvar moduleClassName1 = module + '_AdvanceFilterEx_Js';\n\t\t\tvar moduleClassName2 = module + '_AdvanceFilter_Js';\n\t\t\tvar moduleClassName3 = 'Vtiger_AdvanceFilterEx_Js';\n\t\t\tvar moduleClassName4 = 'Vtiger_AdvanceFilter_Js';\n\t\t\tvar instance;\n\t\t\tif (typeof window[moduleClassName1] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName1](container);\n\t\t\t} else if (typeof window[moduleClassName2] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName2](container);\n\t\t\t} else if (typeof window[moduleClassName3] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName3](container);\n\t\t\t} else {\n\t\t\t\tinstance = new window[moduleClassName4](container);\n\t\t\t}\n\t\t\treturn instance;\n\t\t}\n\t},\n\t{\n\t\tfilterContainer: false,\n\t\t//Hold the conditions for a particular field type\n\t\tfieldTypeConditionMapping: false,\n\t\t//Hold the condition and their label translations\n\t\tconditonOperatorLabelMapping: false,\n\t\tdateConditionInfo: false,\n\t\tfieldModelInstance: false,\n\t\t//Holds fields type and conditions for which it needs validation\n\t\tvalidationSupportedFieldConditionMap: {\n\t\t\temail: ['e', 'n']\n\t\t},\n\t\t//Hols field type for which there is validations always needed\n\t\tallConditionValidationNeededFieldList: ['double', 'integer', 'currency'],\n\t\t//used to eliminate mutiple times validation registrations\n\t\tvalidationForControlsRegistered: false,\n\t\tinit: function(container) {\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('.filterContainer');\n\t\t\t}\n\n\t\t\tif (container.is('.filterContainer')) {\n\t\t\t\tthis.setFilterContainer(container);\n\t\t\t} else {\n\t\t\t\tthis.setFilterContainer(jQuery('.filterContainer', container));\n\t\t\t}\n\t\t\tthis.initialize();\n\t\t},\n\t\tgetModuleName: function() {\n\t\t\treturn 'AdvanceFilter';\n\t\t},\n\t\t/**\n\t\t * Function  to initialize the advance filter\n\t\t */\n\t\tinitialize: function() {\n\t\t\tthis.registerEvents();\n\t\t\tthis.initializeOperationMappingDetails();\n\t\t\tthis.loadFieldSpecificUiForAll();\n\t\t},\n\t\t/**\n\t\t * Function which will save the field condition mapping condition label mapping\n\t\t */\n\t\tinitializeOperationMappingDetails: function() {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tthis.fieldTypeConditionMapping = jQuery('input[name=\"advanceFilterOpsByFieldType\"]', filterContainer).data(\n\t\t\t\t'value'\n\t\t\t);\n\t\t\tthis.conditonOperatorLabelMapping = jQuery('input[name=\"advanceFilterOptions\"]', filterContainer).data('value');\n\t\t\tthis.dateConditionInfo = jQuery('[name=\"date_filters\"]').data('value');\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function to get the container which holds all the filter elements\n\t\t * @return jQuery object\n\t\t */\n\t\tgetFilterContainer: function() {\n\t\t\treturn this.filterContainer;\n\t\t},\n\t\t/**\n\t\t * Function to set the filter container\n\t\t * @params : element - which represents the filter container\n\t\t * @return : current instance\n\t\t */\n\t\tsetFilterContainer: function(element) {\n\t\t\tthis.filterContainer = element;\n\t\t\treturn this;\n\t\t},\n\t\tgetDateSpecificConditionInfo: function() {\n\t\t\treturn this.dateConditionInfo;\n\t\t},\n\t\t/**\n\t\t * Function which will return set of condition for the given field type\n\t\t * @return array of conditions\n\t\t */\n\t\tgetConditionListFromType: function(fieldType) {\n\t\t\tvar fieldTypeConditions = this.fieldTypeConditionMapping[fieldType];\n\t\t\tif (fieldType == 'D' || fieldType == 'DT') {\n\t\t\t\tfieldTypeConditions = fieldTypeConditions.concat(this.getDateConditions(fieldType));\n\t\t\t}\n\t\t\treturn fieldTypeConditions;\n\t\t},\n\t\tgetDateConditions: function(fieldType) {\n\t\t\tif (fieldType != 'D' && fieldType != 'DT') {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tvar dateFilters = this.getDateSpecificConditionInfo();\n\t\t\treturn Object.keys(dateFilters);\n\t\t},\n\t\t/**\n\t\t * Function to get the condition label\n\t\t * @param : key - condition key\n\t\t * @reurn : label for the condition or key if it doest not contain in the condition label mapping\n\t\t */\n\t\tgetConditionLabel: function(key) {\n\t\t\tif (key in this.conditonOperatorLabelMapping) {\n\t\t\t\treturn this.conditonOperatorLabelMapping[key];\n\t\t\t}\n\t\t\tif (key in this.getDateSpecificConditionInfo()) {\n\t\t\t\treturn this.getDateSpecificConditionInfo()[key]['label'];\n\t\t\t}\n\t\t\treturn key;\n\t\t},\n\t\t/**\n\t\t * Function to check if the field selected is empty field\n\t\t * @params : select element which represents the field\n\t\t * @return : boolean true/false\n\t\t */\n\t\tisEmptyFieldSelected: function(fieldSelect) {\n\t\t\tvar selectedOption = fieldSelect.find('option:selected');\n\t\t\t//assumption that empty field will be having value none\n\t\t\tif (selectedOption.val() == 'none') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Function to get the add condition elements\n\t\t * @returns : jQuery object which represents the add conditions elements\n\t\t */\n\t\tgetAddConditionElement: function() {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\treturn jQuery('.addCondition button', filterContainer);\n\t\t},\n\t\t/**\n\t\t * Function to add new condition row\n\t\t * @params : condtionGroupElement - group where condtion need to be added\n\t\t * @return : current instance\n\t\t */\n\t\taddNewCondition: function(conditionGroupElement) {\n\t\t\tlet basicElement = $('.basic', conditionGroupElement);\n\t\t\tlet newRowElement = basicElement.find('.js-conditions-row').clone(true, true);\n\t\t\tlet selectElement = newRowElement.find('select').addClass('select2');\n\t\t\tlet conditionList = $('.conditionList', conditionGroupElement);\n\t\t\tconditionList.append(newRowElement);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(selectElement, { dropdownParent: conditionGroupElement });\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function/Handler  which will triggered when user clicks on add condition\n\t\t */\n\t\taddConditionHandler: function(e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar conditionGroup = element.closest('div.conditionGroup');\n\t\t\tthis.addNewCondition(conditionGroup);\n\t\t},\n\t\tgetFieldSpecificType: function(fieldSelected) {\n\t\t\tvar fieldInfo = fieldSelected.data('fieldinfo');\n\t\t\tvar type = fieldInfo.type;\n\t\t\tif (type == 'reference') {\n\t\t\t\treturn 'V';\n\t\t\t}\n\t\t\treturn fieldSelected.data('fieldtype');\n\t\t},\n\t\t/**\n\t\t * Function to load condition list for the selected field\n\t\t * @params : fieldSelect - select element which will represents field list\n\t\t * @return : select element which will represent the condition element\n\t\t */\n\t\tloadConditions: function(fieldSelect) {\n\t\t\tvar row = fieldSelect.closest('div.js-conditions-row');\n\t\t\tvar conditionSelectElement = row.find('select[name=\"comparator\"]');\n\t\t\tvar group = row.find('[name=\"column_condition\"]');\n\t\t\tvar conditionSelected = conditionSelectElement.val();\n\t\t\tvar fieldSelected = fieldSelect.find('option:selected');\n\t\t\tvar fieldSpecificType = this.getFieldSpecificType(fieldSelected);\n\t\t\tvar conditionList = this.getConditionListFromType(fieldSpecificType);\n\t\t\tvar fieldInfo = fieldSelected.data('fieldinfo');\n\t\t\t//for none in field name\n\t\t\tif (typeof conditionList === 'undefined') {\n\t\t\t\tconditionList = {};\n\t\t\t\tconditionList['none'] = 'None';\n\t\t\t}\n\t\t\tvar options = '';\n\t\t\tfor (var key in conditionList) {\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['rangeTime', 'image']) != -1 &&\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['y', 'ny']) == -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, [\n\t\t\t\t\t\t'userCreator',\n\t\t\t\t\t\t'owner',\n\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t'tree',\n\t\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t\t'languages',\n\t\t\t\t\t\t'currencyList',\n\t\t\t\t\t\t'fileLocationType'\n\t\t\t\t\t]) != -1 &&\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['s', 'ew', 'c', 'k']) != -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tconditionList[key] === 'om' &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['owner', 'sharedOwner', 'userCreator']) == -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['wr', 'nwr']) != -1 &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['owner']) == -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['s', 'ew']) != -1 &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['taxes', 'multipicklist', 'categoryMultipicklist', 'sharedOwner']) != -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['bw', 'm', 'h']) != -1 &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['time']) != -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (conditionList[key] === 'd' && group.val() !== 'and') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t//IE Browser consider the prototype properties also, it should consider has own properties only.\n\t\t\t\tif (conditionList.hasOwnProperty(key)) {\n\t\t\t\t\tvar conditionValue = conditionList[key];\n\t\t\t\t\tvar conditionLabel = this.getConditionLabel(conditionValue);\n\t\t\t\t\toptions += '<option value=\"' + conditionValue + '\"';\n\t\t\t\t\tif (conditionValue == conditionSelected) {\n\t\t\t\t\t\toptions += ' selected=\"selected\" ';\n\t\t\t\t\t}\n\t\t\t\t\toptions += '>' + conditionLabel + '</option>';\n\t\t\t\t}\n\t\t\t}\n\t\t\tconditionSelectElement\n\t\t\t\t.empty()\n\t\t\t\t.html(options)\n\t\t\t\t.trigger('change');\n\t\t\treturn conditionSelectElement;\n\t\t},\n\t\t/**\n\t\t * Functiont to get the field specific ui for the selected field\n\t\t * @prarms : fieldSelectElement - select element which will represents field list\n\t\t * @return : jquery object which represents the ui for the field\n\t\t */\n\t\tgetFieldSpecificUi: function(fieldSelectElement) {\n\t\t\tlet fieldModel = this.fieldModelInstance,\n\t\t\t\thtml;\n\t\t\tif (fieldModel.get('comparatorElementVal') === 'd') {\n\t\t\t\thtml = '<div class=\"checkbox\"><label><input type=\"checkbox\" name=\"' + fieldModel.getName() + '\" value=\"0\" ';\n\t\t\t\tif (fieldModel.getValue() === 1 || fieldModel.getValue() === '1') {\n\t\t\t\t\thtml += 'checked';\n\t\t\t\t}\n\t\t\t\thtml += ' >' + app.vtranslate('JS_IGNORE_EMPTY_VALUES') + '</label></div>';\n\t\t\t\treturn $(html);\n\t\t\t} else if (fieldModel.getType().toLowerCase() === 'boolean') {\n\t\t\t\tlet selectedValue = fieldSelectElement\n\t\t\t\t\t.closest('.js-conditions-row')\n\t\t\t\t\t.find('[data-value=\"value\"]')\n\t\t\t\t\t.val();\n\t\t\t\thtml = '<select class=\"select2\" name=\"' + fieldModel.getName() + '\">';\n\t\t\t\thtml += '<option value=\"0\"';\n\t\t\t\tif (selectedValue === '0') {\n\t\t\t\t\thtml += ' selected=\"selected\" ';\n\t\t\t\t}\n\t\t\t\thtml += '>' + app.vtranslate('JS_IS_DISABLED') + '</option>';\n\n\t\t\t\thtml += '<option value=\"1\"';\n\t\t\t\tif (selectedValue === '1') {\n\t\t\t\t\thtml += ' selected=\"selected\" ';\n\t\t\t\t}\n\t\t\t\thtml += '>' + app.vtranslate('JS_IS_ENABLED') + '</option>';\n\t\t\t\thtml += '</select>';\n\t\t\t\treturn $(html);\n\t\t\t} else {\n\t\t\t\treturn $(fieldModel.getUiTypeSpecificHtml());\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which will load the field specific ui for a selected field\n\t\t * @prarms : fieldSelect - select element which will represents field list\n\t\t * @return : current instance\n\t\t */\n\t\tloadFieldSpecificUi: function(fieldSelect) {\n\t\t\tconst selectedOption = fieldSelect.find('option:selected');\n\t\t\tconst row = fieldSelect.closest('div.js-conditions-row');\n\t\t\tconst fieldUiHolder = row.find('.fieldUiHolder');\n\t\t\tconst conditionSelectElement = row.find('select[name=\"comparator\"]');\n\t\t\tlet fieldInfo = selectedOption.data('fieldinfo');\n\t\t\tconst valueType = fieldUiHolder.find(`[name=\"${fieldInfo.name}\"]`).data('valuetype');\n\t\t\tlet fieldType = 'string';\n\t\t\tif (typeof fieldInfo !== 'undefined') {\n\t\t\t\tfieldType = fieldInfo.type;\n\t\t\t} else {\n\t\t\t\tfieldInfo = {};\n\t\t\t}\n\n\t\t\tvar comparatorElementVal = (fieldInfo.comparatorElementVal = conditionSelectElement.val());\n\t\t\tif (fieldType == 'date' || fieldType == 'datetime') {\n\t\t\t\tfieldInfo.dateSpecificConditions = this.getDateSpecificConditionInfo();\n\t\t\t}\n\t\t\tvar moduleName = this.getModuleName();\n\t\t\tvar fieldModel = Vtiger_Field_Js.getInstance(fieldInfo, moduleName);\n\t\t\tthis.fieldModelInstance = fieldModel;\n\t\t\tvar fieldSpecificUi = this.getFieldSpecificUi(fieldSelect);\n\n\t\t\t//remove validation since we dont need validations for all eleements\n\t\t\t// Both filter and find is used since we dont know whether the element is enclosed in some conainer like currency\n\t\t\tvar fieldName = fieldModel.getName();\n\n\t\t\tif (\n\t\t\t\t$.inArray(fieldModel.getType(), [\n\t\t\t\t\t'multipicklist',\n\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t'taxes',\n\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t]) > -1\n\t\t\t) {\n\t\t\t\tfieldName = fieldName + '[]';\n\t\t\t} else if (\n\t\t\t\t$.inArray(fieldModel.getType(), [\n\t\t\t\t\t'userCreator',\n\t\t\t\t\t'picklist',\n\t\t\t\t\t'owner',\n\t\t\t\t\t'languages',\n\t\t\t\t\t'modules',\n\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t'currencyList',\n\t\t\t\t\t'fileLocationType'\n\t\t\t\t]) > -1 &&\n\t\t\t\tfieldSpecificUi.is('select') &&\n\t\t\t\t(comparatorElementVal == 'e' || comparatorElementVal == 'n')\n\t\t\t) {\n\t\t\t\tfieldName = fieldName + '[]';\n\t\t\t}\n\n\t\t\tif (fieldSpecificUi.find('.input-group-addon').length > 0) {\n\t\t\t\tfieldSpecificUi.find('.input-group').addClass('row');\n\t\t\t\tfieldSpecificUi.find('.input-group').addClass('row');\n\t\t\t\tfieldSpecificUi.find('input[type=\"text\"]').css('width', '100%');\n\t\t\t\tfieldSpecificUi.find('input[type=\"text\"]').addClass('form-control');\n\t\t\t} else {\n\t\t\t\tfieldSpecificUi.filter('[name=\"' + fieldName + '\"]').addClass('form-control');\n\t\t\t}\n\n\t\t\tfieldSpecificUi\n\t\t\t\t.filter('[name=\"' + fieldName + '\"]')\n\t\t\t\t.attr('data-value', 'value')\n\t\t\t\t.removeAttr('data-validation-engine');\n\t\t\tfieldSpecificUi\n\t\t\t\t.find('[name=\"' + fieldName + '\"]')\n\t\t\t\t.attr('data-value', 'value')\n\t\t\t\t.removeAttr('data-validation-engine');\n\n\t\t\tif (fieldModel.getType() == 'currency') {\n\t\t\t\tfieldSpecificUi\n\t\t\t\t\t.filter('[name=\"' + fieldName + '\"]')\n\t\t\t\t\t.attr('data-decimal-separator', fieldInfo.decimal_separator)\n\t\t\t\t\t.attr('data-group-separator', fieldInfo.group_separator);\n\t\t\t\tfieldSpecificUi\n\t\t\t\t\t.find('[name=\"' + fieldName + '\"]')\n\t\t\t\t\t.attr('data-decimal-separator', fieldInfo.decimal_separator)\n\t\t\t\t\t.attr('data-group-separator', fieldInfo.group_separator);\n\t\t\t}\n\t\t\tif (valueType) {\n\t\t\t\tthis.fieldModelInstance.data.workflow_valuetype = valueType;\n\t\t\t}\n\t\t\tfieldUiHolder.html(fieldSpecificUi);\n\n\t\t\tif (fieldSpecificUi.is('select')) {\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(fieldSpecificUi, { dropdownParent: row });\n\t\t\t} else if (fieldSpecificUi.has('input.dateField').length > 0) {\n\t\t\t\tApp.Fields.Date.register(fieldSpecificUi);\n\t\t\t} else if (fieldSpecificUi.has('input.dateRangeField').length > 0) {\n\t\t\t\tApp.Fields.Date.registerRange(fieldSpecificUi, { ranges: false });\n\t\t\t} else if (fieldSpecificUi.has('input.clockPicker').length > 0) {\n\t\t\t\tapp.registerEventForClockPicker(fieldSpecificUi);\n\t\t\t}\n\t\t\tthis.addValidationToFieldIfNeeded(fieldSelect);\n\n\t\t\t// Is Empty, today, tomorrow, yesterday conditions does not need any field input value - hide the UI\n\t\t\t// re-enable if condition element is chosen.\n\t\t\tvar specialConditions = [\n\t\t\t\t'y',\n\t\t\t\t'today',\n\t\t\t\t'tomorrow',\n\t\t\t\t'yesterday',\n\t\t\t\t'smallerthannow',\n\t\t\t\t'greaterthannow',\n\t\t\t\t'ny',\n\t\t\t\t'om',\n\t\t\t\t'wr',\n\t\t\t\t'nwr'\n\t\t\t];\n\t\t\tif (specialConditions.indexOf(conditionSelectElement.val()) != -1) {\n\t\t\t\tfieldUiHolder.hide();\n\t\t\t} else {\n\t\t\t\tfieldUiHolder.show();\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function to load field specific ui for all the select elements - this is used on load\n\t\t * to show field specific ui for all the fields\n\t\t */\n\t\tloadFieldSpecificUiForAll: function() {\n\t\t\tvar conditionsContainer = jQuery('.conditionList');\n\t\t\tvar fieldSelectElement = jQuery('select[name=\"columnname\"]', conditionsContainer);\n\t\t\tjQuery.each(fieldSelectElement, function(i, elem) {\n\t\t\t\tvar currentElement = jQuery(elem);\n\t\t\t\tif (currentElement.val() != 'none') {\n\t\t\t\t\tcurrentElement.trigger('change', { _intialize: true });\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function to add the validation if required\n\t\t * @prarms : selectFieldElement - select element which will represents field list\n\t\t */\n\t\taddValidationToFieldIfNeeded: function(selectFieldElement) {\n\t\t\tvar selectedOption = selectFieldElement.find('option:selected');\n\t\t\tvar row = selectFieldElement.closest('div.js-conditions-row');\n\t\t\tvar fieldSpecificElement = row.find('[data-value=\"value\"]');\n\t\t\tvar validator = selectedOption.attr('data-validator');\n\n\t\t\tif (this.isFieldSupportsValidation(selectFieldElement)) {\n\t\t\t\t//data attribute will not be present while attaching validation engine events . so we are\n\t\t\t\t//depending on the fallback option which is class\n\t\t\t\tfieldSpecificElement\n\t\t\t\t\t.addClass('validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]')\n\t\t\t\t\t.attr('data-validation-engine', 'validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]')\n\t\t\t\t\t.attr('data-fieldinfo', JSON.stringify(selectedOption.data('fieldinfo')));\n\t\t\t\tif (typeof validator !== 'undefined') {\n\t\t\t\t\tfieldSpecificElement.attr('data-validator', validator);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfieldSpecificElement\n\t\t\t\t\t.removeClass('validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]')\n\t\t\t\t\t.removeAttr('data-validation-engine')\n\t\t\t\t\t.removeAttr('data-fieldinfo');\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Check if field supports validation\n\t\t * @prarms : selectFieldElement - select element which will represents field list\n\t\t * @return - boolen true/false\n\t\t */\n\t\tisFieldSupportsValidation: function(fieldSelect) {\n\t\t\tvar fieldModel = this.fieldModelInstance;\n\t\t\tvar type = fieldModel.getType();\n\n\t\t\tif (jQuery.inArray(type, this.allConditionValidationNeededFieldList) >= 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar row = fieldSelect.closest('div.js-conditions-row');\n\t\t\tvar conditionSelectElement = row.find('select[name=\"comparator\"]');\n\n\t\t\tvar conditionValue = conditionSelectElement.val();\n\n\t\t\tif (type in this.validationSupportedFieldConditionMap) {\n\t\t\t\tif (jQuery.inArray(conditionValue, this.validationSupportedFieldConditionMap[type]) >= 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Function to retrieve the values of the filter\n\t\t * @return : object\n\t\t */\n\t\tgetValues: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet fieldList = ['columnname', 'comparator', 'value', 'column_condition'],\n\t\t\t\tfilterContainer = this.getFilterContainer(),\n\t\t\t\tconditionGroups = $('.conditionGroup', filterContainer),\n\t\t\t\tvalues = {},\n\t\t\t\tcolumnIndex = 0;\n\t\t\t$('.conditionGroup', filterContainer).each(function(index, domElement) {\n\t\t\t\tlet groupElement = $(domElement);\n\t\t\t\tvalues[index + 1] = {};\n\t\t\t\tvalues[index + 1]['columns'] = {};\n\t\t\t\t$('.conditionList .js-conditions-row', groupElement).each(function(i, conditionDomElement) {\n\t\t\t\t\tlet rowElement = $(conditionDomElement),\n\t\t\t\t\t\tfieldSelectElement = $('[name=\"columnname\"]', rowElement),\n\t\t\t\t\t\tvalueSelectElement = $('[data-value=\"value\"]', rowElement);\n\t\t\t\t\t//To not send empty fields to server\n\t\t\t\t\tif (thisInstance.isEmptyFieldSelected(fieldSelectElement)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tlet fieldDataInfo = fieldSelectElement.find('option:selected').data('fieldinfo'),\n\t\t\t\t\t\tfieldType = fieldDataInfo.type,\n\t\t\t\t\t\trowValues = {},\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tfield;\n\t\t\t\t\tif (fieldType === 'owner' || fieldType === 'userCreator') {\n\t\t\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\t\t\tif (field === 'value' && valueSelectElement.is('select')) {\n\t\t\t\t\t\t\t\tlet newValuesArr = valueSelectElement.val();\n\t\t\t\t\t\t\t\tif (!newValuesArr) {\n\t\t\t\t\t\t\t\t\trowValues[field] = '';\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\trowValues[field] = newValuesArr.join(',');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (field === 'value' && valueSelectElement.is('input')) {\n\t\t\t\t\t\t\t\trowValues[field] =\n\t\t\t\t\t\t\t\t\tvalueSelectElement.attr('type') === 'checkbox' && valueSelectElement.prop('checked')\n\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t: valueSelectElement.val();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t$.inArray(fieldType, [\n\t\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t\t'multipicklist',\n\t\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t\t\t'languages',\n\t\t\t\t\t\t\t'currencyList',\n\t\t\t\t\t\t\t'taxes',\n\t\t\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t\t\t]) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\t\t\tif (field === 'value' && valueSelectElement.attr('type') === 'checkbox') {\n\t\t\t\t\t\t\t\trowValues[field] = valueSelectElement.prop('checked') ? 1 : valueSelectElement.val();\n\t\t\t\t\t\t\t} else if (field === 'value' && valueSelectElement.is('input')) {\n\t\t\t\t\t\t\t\tlet pickListValues = valueSelectElement.data('picklistvalues'),\n\t\t\t\t\t\t\t\t\tvaluesArr = valueSelectElement.val().split(','),\n\t\t\t\t\t\t\t\t\tnewValuesArr = [];\n\t\t\t\t\t\t\t\tfor (i = 0; i < valuesArr.length; i++) {\n\t\t\t\t\t\t\t\t\tif (typeof pickListValues[valuesArr[i]] !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\tnewValuesArr.push(pickListValues[valuesArr[i]]);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tnewValuesArr.push(valuesArr[i]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\trowValues[field] = newValuesArr.join(',');\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tfield === 'value' &&\n\t\t\t\t\t\t\t\tvalueSelectElement.is('select') &&\n\t\t\t\t\t\t\t\t$.inArray(fieldType, [\n\t\t\t\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t\t\t\t'multipicklist',\n\t\t\t\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t\t\t\t\t'languages',\n\t\t\t\t\t\t\t\t\t'currencyList',\n\t\t\t\t\t\t\t\t\t'taxes',\n\t\t\t\t\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t\t\t\t\t]) > -1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tlet value = valueSelectElement.val();\n\t\t\t\t\t\t\t\tif (value == null) {\n\t\t\t\t\t\t\t\t\trowValues[field] = value;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\trowValues[field] = value.join(',');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\t\t\tif (field === 'value') {\n\t\t\t\t\t\t\t\trowValues[field] =\n\t\t\t\t\t\t\t\t\tvalueSelectElement.attr('type') === 'checkbox' && valueSelectElement.prop('checked')\n\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t: valueSelectElement.val();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rowElement.is(':last-child')) {\n\t\t\t\t\t\trowValues['column_condition'] = '';\n\t\t\t\t\t}\n\t\t\t\t\tvalues[index + 1]['columns'][columnIndex] = rowValues;\n\t\t\t\t\tcolumnIndex++;\n\t\t\t\t});\n\t\t\t\tif (groupElement.find('div.groupCondition').length > 0) {\n\t\t\t\t\tvalues[index + 1]['condition'] = conditionGroups.find('div.groupCondition [name=\"condition\"]').val();\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn values;\n\t\t},\n\t\t/**\n\t\t * Event handle which will be triggred on deletion of a condition row\n\t\t */\n\t\tdeleteConditionHandler: function(e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar row = element.closest('.js-conditions-row');\n\t\t\trow.remove();\n\t\t},\n\t\t/**\n\t\t * Event handler which is invoked on add condition\n\t\t */\n\t\tregisterAddCondition: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.getAddConditionElement().on('click', function(e) {\n\t\t\t\tthisInstance.addConditionHandler(e);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register field change event\n\t\t */\n\t\tregisterFieldChange: function() {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tvar thisInstance = this;\n\t\t\tfilterContainer.on('change', 'select[name=\"columnname\"]', function(e, data) {\n\t\t\t\tvar currentElement = jQuery(e.currentTarget);\n\t\t\t\tif (typeof data === 'undefined' || data._intialize != true) {\n\t\t\t\t\tvar row = currentElement.closest('div.js-conditions-row');\n\t\t\t\t\tvar conditionSelectElement = row.find('select[name=\"comparator\"]');\n\t\t\t\t\tconditionSelectElement.empty();\n\t\t\t\t}\n\t\t\t\tthisInstance.loadConditions(currentElement);\n\t\t\t\tthisInstance.loadFieldSpecificUi(currentElement);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register condition change\n\t\t */\n\t\tregisterConditionChange: function() {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tvar thisInstance = this;\n\t\t\tfilterContainer.on('change', 'select[name=\"comparator\"]', function(e) {\n\t\t\t\tvar comparatorSelectElement = jQuery(e.currentTarget);\n\t\t\t\tvar row = comparatorSelectElement.closest('div.js-conditions-row');\n\t\t\t\tvar fieldSelectElement = row.find('select[name=\"columnname\"]');\n\t\t\t\t//To handle the validation depending on condtion\n\t\t\t\tthisInstance.loadFieldSpecificUi(fieldSelectElement);\n\t\t\t\tthisInstance.addValidationToFieldIfNeeded(fieldSelectElement);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to regisgter delete condition event\n\t\t */\n\t\tregisterDeleteCondition: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tfilterContainer.on('click', '.js-condition-delete', function(e) {\n\t\t\t\tthisInstance.deleteConditionHandler(e);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will regiter all events for this page\n\t\t */\n\t\tregisterEvents: function() {\n\t\t\tthis.registerAddCondition();\n\t\t\tthis.registerFieldChange();\n\t\t\tthis.registerDeleteCondition();\n\t\t\tthis.registerConditionChange();\n\t\t}\n\t}\n);\n\nVtiger_Field_Js(\n\t'AdvanceFilter_Field_Js',\n\t{},\n\t{\n\t\tgetUiTypeSpecificHtml: function() {\n\t\t\tvar uiTypeModel = this.getUiTypeModel();\n\t\t\treturn uiTypeModel.getUi();\n\t\t},\n\t\tgetModuleName: function() {\n\t\t\tvar currentModule = app.getModuleName();\n\n\t\t\tvar type = this.getType();\n\t\t\tif (\n\t\t\t\t$.inArray(type, [\n\t\t\t\t\t'picklist',\n\t\t\t\t\t'userCreator',\n\t\t\t\t\t'multipicklist',\n\t\t\t\t\t'owner',\n\t\t\t\t\t'userCreator',\n\t\t\t\t\t'modules',\n\t\t\t\t\t'date',\n\t\t\t\t\t'datetime',\n\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t'languages',\n\t\t\t\t\t'currencyList',\n\t\t\t\t\t'taxes',\n\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t]) > -1\n\t\t\t) {\n\t\t\t\tcurrentModule = 'AdvanceFilter';\n\t\t\t}\n\t\t\treturn currentModule;\n\t\t}\n\t}\n);\n\nVtiger_Picklist_Field_Js(\n\t'AdvanceFilter_Picklist_Field_Js',\n\t{},\n\t{\n\t\tgetUi: function() {\n\t\t\tvar html = '<select class=\"select2\" multiple name=\"' + this.getName() + '[]\">';\n\t\t\tvar pickListValues = this.getPickListValues();\n\t\t\tvar selectedOption = app.htmlDecode(this.getValue());\n\t\t\tvar selectedOptionsArray = selectedOption.split(',');\n\t\t\tfor (var option in pickListValues) {\n\t\t\t\thtml += '<option value=\"' + option + '\" ';\n\t\t\t\tif (jQuery.inArray(option, selectedOptionsArray) != -1) {\n\t\t\t\t\thtml += ' selected ';\n\t\t\t\t}\n\t\t\t\thtml += '>' + pickListValues[option] + '</option>';\n\t\t\t}\n\t\t\thtml += '</select>';\n\t\t\tvar selectContainer = jQuery(html);\n\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\treturn selectContainer;\n\t\t}\n\t}\n);\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Modules_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Inventorylimit_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Filelocationtype_Field_Js', {}, {});\n\nVtiger_Multipicklist_Field_Js('AdvanceFilter_Multipicklist_Field_Js', {}, {});\n\nVtiger_Multipicklist_Field_Js('AdvanceFilter_Categorymultipicklist_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Languages_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Currencylist_Field_Js', {}, {});\n\nAdvanceFilter_Multipicklist_Field_Js('AdvanceFilter_Taxes_Field_Js', {}, {});\n\nVtiger_Owner_Field_Js(\n\t'AdvanceFilter_Owner_Field_Js',\n\t{},\n\t{\n\t\tgetUi: function() {\n\t\t\tlet comparatorSelectedOptionVal = this.get('comparatorElementVal'),\n\t\t\t\thtml = '',\n\t\t\t\tselectContainer;\n\t\t\tif (\n\t\t\t\tcomparatorSelectedOptionVal === 'e' ||\n\t\t\t\tcomparatorSelectedOptionVal === 'n' ||\n\t\t\t\t(this.getName() === 'shownerid' && $.inArray(comparatorSelectedOptionVal, ['c', 'k']) != -1)\n\t\t\t) {\n\t\t\t\thtml = '<select class=\"select2\" multiple name=\"' + this.getName() + '[]\">';\n\t\t\t\tlet pickListValues = this.getPickListValues(),\n\t\t\t\t\tselectedOption = app.htmlDecode(this.getValue()),\n\t\t\t\t\toptGroup;\n\t\t\t\tfor (optGroup in pickListValues) {\n\t\t\t\t\thtml += '<optgroup label=\"' + optGroup + '\">';\n\t\t\t\t\tlet optionGroupValues = pickListValues[optGroup],\n\t\t\t\t\t\toption;\n\t\t\t\t\tfor (option in optionGroupValues) {\n\t\t\t\t\t\thtml += '<option value=\"' + option + '\" ';\n\t\t\t\t\t\tif ($.inArray(option, selectedOption.split(',')) != -1) {\n\t\t\t\t\t\t\thtml += ' selected ';\n\t\t\t\t\t\t}\n\t\t\t\t\t\thtml += '>' + optionGroupValues[option] + '</option>';\n\t\t\t\t\t}\n\t\t\t\t\thtml += '</optgroup>';\n\t\t\t\t}\n\t\t\t\thtml += '</select>';\n\t\t\t\tselectContainer = $(html);\n\t\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\t\treturn selectContainer;\n\t\t\t} else {\n\t\t\t\tlet tagsArray = [];\n\t\t\t\t$.each(this.getPickListValues(), function(groups, blocks) {\n\t\t\t\t\t$.each(blocks, function(i, e) {\n\t\t\t\t\t\ttagsArray.push($.trim(e));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\thtml = '<input data-tags=\"' + tagsArray + '\" type=\"hidden\" class=\"row select2\" name=\"' + this.getName() + '\">';\n\t\t\t\tselectContainer = $(html).val(this.getValue());\n\t\t\t\tselectContainer.data('tags', tagsArray);\n\t\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\t\treturn selectContainer;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_Multireferencevalue_Field_Js('AdvanceFilter_Multireferencevalue_Field_Js', {}, {});\n\nAdvanceFilter_Owner_Field_Js('AdvanceFilter_Sharedowner_Field_Js', {}, {});\n\nAdvanceFilter_Owner_Field_Js('AdvanceFilter_Usercreator_Field_Js', {}, {});\nVtiger_Date_Field_Js(\n\t'AdvanceFilter_Date_Field_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to get the ui\n\t\t * @return - input text field\n\t\t */\n\t\tgetUi: function() {\n\t\t\tlet comparatorSelectedOptionVal = this.get('comparatorElementVal'),\n\t\t\t\tdateSpecificConditions = this.get('dateSpecificConditions'),\n\t\t\t\thtml = '';\n\t\t\tif (comparatorSelectedOptionVal === 'bw' || comparatorSelectedOptionVal === 'custom') {\n\t\t\t\thtml =\n\t\t\t\t\t'<div class=\"date\"><input class=\"dateRangeField form-control\" data-calendar-type=\"range\" name=\"' +\n\t\t\t\t\tthis.getName() +\n\t\t\t\t\t'\" data-date-format=\"' +\n\t\t\t\t\tthis.getDateFormat() +\n\t\t\t\t\t'\" type=\"text\" ReadOnly=\"true\" value=\"' +\n\t\t\t\t\tthis.getValue() +\n\t\t\t\t\t'\"></div>';\n\t\t\t\tlet element = $(html),\n\t\t\t\t\tdateFieldUi = element.find('.dateRangeField');\n\t\t\t\tif (dateFieldUi.val().indexOf(',') !== -1) {\n\t\t\t\t\tlet valueArray = this.getValue().split(','),\n\t\t\t\t\t\tstartDateTime = valueArray[0],\n\t\t\t\t\t\tendDateTime = valueArray[1];\n\t\t\t\t\tif (startDateTime.indexOf(' ') !== -1) {\n\t\t\t\t\t\tlet dateTime = startDateTime.split(' ');\n\t\t\t\t\t\tstartDateTime = dateTime[0];\n\t\t\t\t\t}\n\t\t\t\t\tif (endDateTime.indexOf(' ') !== -1) {\n\t\t\t\t\t\tlet dateTimeValue = endDateTime.split(' ');\n\t\t\t\t\t\tendDateTime = dateTimeValue[0];\n\t\t\t\t\t}\n\t\t\t\t\tdateFieldUi.val(startDateTime + ',' + endDateTime);\n\t\t\t\t} else {\n\t\t\t\t\t// while changing to between/custom from equal/notequal/... we'll only have one value\n\t\t\t\t\tlet value = this.getValue().split(' '),\n\t\t\t\t\t\tstartDate = value[0],\n\t\t\t\t\t\tendDate = value[0];\n\t\t\t\t\tif (startDate !== '' && endDate !== '') {\n\t\t\t\t\t\tdateFieldUi.val(startDate + ',' + endDate);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.addValidationToElement(element);\n\t\t\t} else if (comparatorSelectedOptionVal in dateSpecificConditions) {\n\t\t\t\tlet startValue = dateSpecificConditions[comparatorSelectedOptionVal]['startdate'],\n\t\t\t\t\tendValue = dateSpecificConditions[comparatorSelectedOptionVal]['enddate'];\n\t\t\t\tif (\n\t\t\t\t\tcomparatorSelectedOptionVal === 'today' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'tomorrow' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'yesterday'\n\t\t\t\t) {\n\t\t\t\t\thtml = '<input name=\"' + this.getName() + '\" type=\"text\" ReadOnly=\"true\" value=\"' + startValue + '\">';\n\t\t\t\t} else {\n\t\t\t\t\thtml =\n\t\t\t\t\t\t'<input name=\"' +\n\t\t\t\t\t\tthis.getName() +\n\t\t\t\t\t\t'\" type=\"text\" ReadOnly=\"true\" value=\"' +\n\t\t\t\t\t\tstartValue +\n\t\t\t\t\t\t',' +\n\t\t\t\t\t\tendValue +\n\t\t\t\t\t\t'\">';\n\t\t\t\t}\n\t\t\t\treturn $(html);\n\t\t\t} else {\n\t\t\t\tlet fieldUi = this._super(),\n\t\t\t\t\tdateTimeFieldValue = fieldUi.find('.dateField').val(),\n\t\t\t\t\tdateValue = dateTimeFieldValue.split(' ');\n\t\t\t\tif (dateValue[1] === '00:00:00') {\n\t\t\t\t\tdateTimeFieldValue = dateValue[0];\n\t\t\t\t} else if (\n\t\t\t\t\tcomparatorSelectedOptionVal === 'e' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'n' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'b' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'a'\n\t\t\t\t) {\n\t\t\t\t\tlet dateTimeArray = dateTimeFieldValue.split(' ');\n\t\t\t\t\tdateTimeFieldValue = dateTimeArray[0];\n\t\t\t\t}\n\t\t\t\tfieldUi.find('.dateField').val(dateTimeFieldValue);\n\t\t\t\treturn fieldUi;\n\t\t\t}\n\t\t}\n\t}\n);\n\nAdvanceFilter_Date_Field_Js('AdvanceFilter_Datetime_Field_Js', {}, {});\n"],"names":["jQuery","Class","getInstance","container","module","app","getModuleName","moduleClassName1","moduleClassName2","instance","filterContainer","fieldTypeConditionMapping","conditonOperatorLabelMapping","dateConditionInfo","fieldModelInstance","validationSupportedFieldConditionMap","email","allConditionValidationNeededFieldList","validationForControlsRegistered","init","is","setFilterContainer","initialize","registerEvents","initializeOperationMappingDetails","loadFieldSpecificUiForAll","getFilterContainer","data","element","getDateSpecificConditionInfo","getConditionListFromType","fieldType","fieldTypeConditions","concat","getDateConditions","keys","dateFilters","getConditionLabel","key","isEmptyFieldSelected","fieldSelect","find","val","getAddConditionElement","addNewCondition","conditionGroupElement","$","newRowElement","basicElement","clone","selectElement","addClass","conditionList","append","App","Fields","Picklist","showSelect2ElementView","dropdownParent","addConditionHandler","e","currentTarget","conditionGroup","closest","getFieldSpecificType","fieldSelected","type","fieldInfo","loadConditions","conditionSelectElement","row","group","conditionSelected","fieldSpecificType","inArray","hasOwnProperty","conditionLabel","conditionValue","options","empty","html","trigger","getFieldSpecificUi","fieldSelectElement","fieldModel","get","getName","getValue","vtranslate","getType","toLowerCase","getUiTypeSpecificHtml","loadFieldSpecificUi","fieldUiHolder","selectedOption","valueType","name","comparatorElementVal","dateSpecificConditions","Vtiger_Field_Js","moduleName","fieldName","fieldSpecificUi","length","css","filter","attr","removeAttr","decimal_separator","group_separator","workflow_valuetype","has","Date","register","registerRange","ranges","registerEventForClockPicker","addValidationToFieldIfNeeded","indexOf","show","hide","conditionsContainer","each","i","elem","currentElement","_intialize","selectFieldElement","fieldSpecificElement","validator","isFieldSupportsValidation","JSON","stringify","removeClass","getValues","fieldList","conditionGroups","values","columnIndex","index","domElement","groupElement","conditionDomElement","rowElement","valueSelectElement","thisInstance","field","fieldDataInfo","rowValues","newValuesArr","join","prop","valuesArr","split","push","pickListValues","value","deleteConditionHandler","remove","registerAddCondition","on","registerFieldChange","registerConditionChange","comparatorSelectElement","registerDeleteCondition","getUiTypeModel","getUi","currentModule","Vtiger_Picklist_Field_Js","getPickListValues","htmlDecode","selectedOptionsArray","option","addValidationToElement","selectContainer","AdvanceFilter_Picklist_Field_Js","Vtiger_Multipicklist_Field_Js","AdvanceFilter_Multipicklist_Field_Js","Vtiger_Owner_Field_Js","comparatorSelectedOptionVal","optGroup","optionGroupValues","groups","blocks","tagsArray","trim","Vtiger_Multireferencevalue_Field_Js","AdvanceFilter_Owner_Field_Js","Vtiger_Date_Field_Js","getDateFormat","dateFieldUi","startDateTime","valueArray","endDateTime","dateTime","dateTimeValue","startDate","endDate","endValue","startValue","_super","dateTimeFieldValue","fieldUi","dateValue","dateTimeArray","AdvanceFilter_Date_Field_Js"],"mappings":"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"}