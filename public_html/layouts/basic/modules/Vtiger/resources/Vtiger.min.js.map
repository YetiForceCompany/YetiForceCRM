{"version":3,"file":"Vtiger.min.js","sources":["Vtiger.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nvar Vtiger_Index_Js = {\n\tshowLocation: function (element) {\n\t\tapp.showModalWindow(null, 'index.php?module=OpenStreetMap&view=MapModal', function (container) {\n\t\t\tlet mapView = new OpenStreetMap_Map_Js();\n\t\t\tmapView.registerModalView(container);\n\t\t\tcontainer.find('.searchValue').val($(element).data('location'));\n\t\t\tcontainer.find('.searchBtn').trigger('click');\n\t\t});\n\t},\n\tmassAddDocuments: function (url) {\n\t\tapp.showModalWindow(null, url, function (container) {\n\t\t\tlet uploadButton = container.find('#filesToUpload');\n\t\t\tlet template = container.find('.fileContainer');\n\t\t\tlet uploadContainer = container.find('.uploadFileContainer');\n\t\t\tlet form = container.find('form');\n\t\t\tuploadButton.on('change', function () {\n\t\t\t\tuploadContainer.find('.fileItem').remove();\n\t\t\t\tlet files = uploadButton[0].files;\n\t\t\t\tfor (let i = 0; i < files.length; i++) {\n\t\t\t\t\tuploadContainer.append(template.html());\n\t\t\t\t\tuploadContainer.find('[name=\"nameFile[]\"]:last').val(files[i].name);\n\t\t\t\t}\n\t\t\t});\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tapp.removeEmptyFilesInput(form[0]);\n\t\t\t\tlet formData = new FormData(form[0]);\n\t\t\t\turl = 'index.php';\n\t\t\t\tif (app.getViewName() === 'Detail') {\n\t\t\t\t\tformData.append('createmode', 'link');\n\t\t\t\t\tformData.append('return_module', app.getModuleName());\n\t\t\t\t\tformData.append('return_id', app.getRecordId());\n\t\t\t\t}\n\t\t\t\tlet params = {\n\t\t\t\t\turl: url,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdata: formData,\n\t\t\t\t\tprocessData: false,\n\t\t\t\t\tcontentType: false\n\t\t\t\t};\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t});\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tlet relatedModuleName = 'Documents';\n\t\t\t\t\tif (app.getViewName() === 'Detail') {\n\t\t\t\t\t\tlet detailView = Vtiger_Detail_Js.getInstance();\n\t\t\t\t\t\tlet selectedTabElement = detailView.getSelectedTab();\n\t\t\t\t\t\tif (selectedTabElement.data('reference') === relatedModuleName) {\n\t\t\t\t\t\t\tdetailView.reloadTabContent();\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tdetailView.getContentHolder().find('.detailViewBlockLink').data('reference') === relatedModuleName\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tVtiger_RelatedList_Js.getInstance(\n\t\t\t\t\t\t\t\tdetailView.getRecordId(),\n\t\t\t\t\t\t\t\tapp.getModuleName(),\n\t\t\t\t\t\t\t\tselectedTabElement,\n\t\t\t\t\t\t\t\trelatedModuleName\n\t\t\t\t\t\t\t).loadRelatedList();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet updatesWidget = detailView\n\t\t\t\t\t\t\t\t.getContentHolder()\n\t\t\t\t\t\t\t\t.find(\"[data-type='RelatedModule'][data-name='Documents']\");\n\t\t\t\t\t\t\tif (updatesWidget.length > 0) {\n\t\t\t\t\t\t\t\tlet params = detailView.getFiltersData(updatesWidget);\n\t\t\t\t\t\t\t\tdetailView.loadWidget(updatesWidget, params['params']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_List_Js.getInstance().getListViewRecords();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tgetEmailFromRecord(record, module, maxEmails) {\n\t\tconst aDeferred = $.Deferred();\n\t\tconst progress = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\tAppConnector.request({\n\t\t\tdataType: 'html',\n\t\t\tdata: {\n\t\t\t\tmodule: 'OSSMail',\n\t\t\t\taction: 'GetMail',\n\t\t\t\tsourceModule: module,\n\t\t\t\tsourceRecord: record,\n\t\t\t\tmaxEmails: maxEmails\n\t\t\t}\n\t\t})\n\t\t\t.done((data) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tif (data.substring(0, 1) == '{') {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\tdata = data['result'];\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t} else {\n\t\t\t\t\tapp.showModalWindow(data, (data) => {\n\t\t\t\t\t\tdata.find('.selectButton').on('click', (e) => {\n\t\t\t\t\t\t\tif (data.find('input:checked').length) {\n\t\t\t\t\t\t\t\tlet email = data.find('input:checked').val();\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\taDeferred.resolve(email);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SELECT_AN_OPTION'),\n\t\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.fail((error, err) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\taDeferred.reject(error);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterMailButtons: function (container) {\n\t\tlet thisInstance = this;\n\t\tcontainer.find('.sendMailBtn:not(.mailBtnActive)').each(function (e) {\n\t\t\tlet sendButton = $(this);\n\t\t\tsendButton.addClass('mailBtnActive');\n\t\t\tsendButton.on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet url = sendButton.data('url');\n\t\t\t\tlet popup = sendButton.data('popup');\n\t\t\t\tlet toMail = sendButton.data('to');\n\t\t\t\tif (toMail) {\n\t\t\t\t\turl += '&to=' + encodeURIComponent(toMail);\n\t\t\t\t}\n\t\t\t\tif (app.getRecordId() && sendButton.data('record') !== app.getRecordId()) {\n\t\t\t\t\turl += '&crmModule=' + app.getModuleName() + '&crmRecord=' + app.getRecordId();\n\t\t\t\t}\n\t\t\t\tthisInstance.sendMailWindow(url, popup);\n\t\t\t});\n\t\t});\n\t},\n\tsendMailWindow: function (url, popup, postData) {\n\t\tif (popup) {\n\t\t\tlet width = screen.width - 15;\n\t\t\tlet height = screen.height - 150;\n\t\t\tlet left = 0;\n\t\t\tlet top = 30;\n\t\t\tlet popupParams = 'width=' + width + ', height=' + height + ', left=' + left + ', top=' + top;\n\t\t\tif (postData == undefined) {\n\t\t\t\twindow.open(\n\t\t\t\t\turl,\n\t\t\t\t\t'_blank',\n\t\t\t\t\tpopupParams + ',resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,status=no,menubar=no'\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet form = $('<form/>', { action: 'index.php' });\n\t\t\turl.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\n\t\t\t\tform.append($('<input>', { name: key, value: value }));\n\t\t\t});\n\t\t\tfor (let i in postData) {\n\t\t\t\tform.append($('<input>', { name: i, value: JSON.stringify(postData[i]) }));\n\t\t\t}\n\t\t\t$('body').append(form);\n\t\t\tform.submit();\n\t\t} else {\n\t\t\twindow.location.href = url;\n\t\t}\n\t},\n\tregisterWidgetsEvents: function () {\n\t\tlet widgets = $('div.widgetContainer');\n\t\twidgets.on('shown.bs.collapse', function (e) {\n\t\t\tlet widgetContainer = $(e.currentTarget);\n\t\t\tVtiger_Index_Js.loadWidgets(widgetContainer);\n\t\t\tlet key = widgetContainer.attr('id');\n\t\t\tapp.cacheSet(key, 1);\n\t\t});\n\t\twidgets.on('hidden.bs.collapse', function (e) {\n\t\t\tlet widgetContainer = $(e.currentTarget);\n\t\t\tlet imageEle = widgetContainer.parent().find('.imageElement');\n\t\t\tlet imagePath = imageEle.data('rightimage');\n\t\t\timageEle.attr('src', imagePath);\n\t\t\tlet key = widgetContainer.attr('id');\n\t\t\tapp.cacheSet(key, 0);\n\t\t});\n\t},\n\t/**\n\t * Function is used to load the sidebar widgets\n\t * @param widgetContainer - widget container\n\t * @param open - widget should be open or closed\n\t */\n\tloadWidgets: function (widgetContainer, open) {\n\t\tlet message = $('.loadingWidgetMsg').html();\n\t\tif (widgetContainer.find('.card-body').html().trim()) {\n\t\t\tlet imageEle = widgetContainer.parent().find('.imageElement');\n\t\t\tlet imagePath = imageEle.data('downimage');\n\t\t\timageEle.attr('src', imagePath);\n\t\t\twidgetContainer.css('height', 'auto');\n\t\t\treturn;\n\t\t}\n\n\t\twidgetContainer.progressIndicator({ message: message });\n\t\tlet url = widgetContainer.data('url');\n\t\tlet listViewWidgetParams = {\n\t\t\ttype: 'GET',\n\t\t\turl: 'index.php',\n\t\t\tdataType: 'html',\n\t\t\tdata: url\n\t\t};\n\t\tAppConnector.request(listViewWidgetParams).done(function (data) {\n\t\t\tif (typeof open === 'undefined') open = true;\n\t\t\tif (open) {\n\t\t\t\twidgetContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\tlet imageEle = widgetContainer.parent().find('.imageElement');\n\t\t\t\tlet imagePath = imageEle.data('downimage');\n\t\t\t\timageEle.attr('src', imagePath);\n\t\t\t\twidgetContainer.css('height', 'auto');\n\t\t\t}\n\t\t\twidgetContainer.html(data);\n\t\t\tif (data == '') {\n\t\t\t\twidgetContainer.closest('.quickWidget').addClass('d-none');\n\t\t\t} else {\n\t\t\t\tlet label = widgetContainer.closest('.quickWidget').find('.quickWidgetHeader').data('label');\n\t\t\t}\n\t\t\t$('.bodyContents').trigger('Vtiger.Widget.Load.' + label, $(widgetContainer));\n\t\t});\n\t},\n\tloadWidgetsOnLoad: function () {\n\t\tlet widgets = $('div.widgetContainer');\n\t\twidgets.each(function (index, element) {\n\t\t\tVtiger_Index_Js.loadWidgets($(element));\n\t\t});\n\t},\n\t/**\n\t * Function to change user theme(colour)\n\t * @params : colour name\n\t */\n\tchangeSkin: function () {\n\t\t$('.themeElement').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\tlet currentElement = $(e.currentTarget);\n\t\t\tcurrentElement.closest('#themeContainer').hide();\n\t\t\tlet progressElement = $('#progressDiv');\n\t\t\tprogressElement.progressIndicator();\n\t\t\tlet params = {\n\t\t\t\tmodule: 'Users',\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\trecord: CONFIG.userId,\n\t\t\t\tfield: 'theme',\n\t\t\t\tvalue: currentElement.data('skinName')\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\t\tprogressElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t$('.settingIcons').removeClass('open');\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {});\n\t\t});\n\t},\n\tmarkNotifications: function (id) {\n\t\tlet aDeferred = $.Deferred();\n\t\tlet thisInstance = this;\n\t\tlet params = {\n\t\t\tmodule: 'Notification',\n\t\t\taction: 'Notification',\n\t\t\tmode: 'setMark',\n\t\t\tids: id\n\t\t};\n\t\tAppConnector.request(params)\n\t\t\t.done(function (data) {\n\t\t\t\tlet row = $('.notificationEntries .noticeRow[data-id=\"' + id + '\"]');\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_MARKED_AS_READ'),\n\t\t\t\t\ttype: 'info'\n\t\t\t\t});\n\t\t\t\tif (row.length) {\n\t\t\t\t\trow.fadeOut(300, function () {\n\t\t\t\t\t\tlet entries = row.closest('.notificationEntries');\n\t\t\t\t\t\trow.remove();\n\t\t\t\t\t\tentries.each(function (index) {\n\t\t\t\t\t\t\tlet block = $(this);\n\t\t\t\t\t\t\tif (block.find('.noticeRow').length == 0) {\n\t\t\t\t\t\t\t\tblock.closest('.panel').hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.getNotificationsForReminder();\n\t\t\t\t}\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tmarkAllNotifications: function (element) {\n\t\tlet ids = [];\n\t\tlet li = $(element).closest('.notificationContainer');\n\t\tli.find('.notificationEntries .noticeRow').each(function (index) {\n\t\t\tids.push($(this).data('id'));\n\t\t});\n\t\tif (ids.length == 0) {\n\t\t\telement.remove();\n\t\t\treturn false;\n\t\t}\n\t\tlet params = {\n\t\t\tmodule: 'Notification',\n\t\t\taction: 'Notification',\n\t\t\tmode: 'setMark',\n\t\t\tids: ids\n\t\t};\n\t\tli.progressIndicator({ position: 'html' });\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tli.progressIndicator({ mode: 'hide' });\n\t\t\tapp.showNotify({\n\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\ttext: app.vtranslate('JS_MARKED_AS_READ'),\n\t\t\t\ttype: 'info'\n\t\t\t});\n\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t});\n\t},\n\t/**\n\t * Function registers event for Reminder popups\n\t */\n\tregisterReminders: function () {\n\t\tlet activityReminder = (parseInt(app.getMainParams('activityReminder')) || 0) * 1000;\n\t\tif (activityReminder != 0 && $('.remindersNotice.autoRefreshing').length) {\n\t\t\tVtiger_Index_Js.requestReminder();\n\t\t\twindow.reminder = setInterval(function () {\n\t\t\t\tVtiger_Index_Js.requestReminder();\n\t\t\t}, activityReminder);\n\t\t}\n\t\tlet reminder = (parseInt(app.getMainParams('intervalForNotificationNumberCheck')) || 0) * 1000;\n\t\tif (reminder != 0 && $('.notificationsNotice.autoRefreshing').length) {\n\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t\twindow.reminderNotifications = setInterval(function () {\n\t\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t\t}, reminder);\n\t\t}\n\t},\n\tgetNotificationsForReminder: function () {\n\t\tlet thisInstance = this;\n\t\tlet content = $('.remindersNotificationContainer');\n\t\tlet element = $('.notificationsNotice');\n\t\tlet url = 'index.php?module=Notification&view=Reminders';\n\t\tAppConnector.request(url)\n\t\t\t.done(function (data) {\n\t\t\t\tcontent.html(data);\n\t\t\t\tthisInstance.refreshReminderCount(content, element, 'js-count-notifications-reminder');\n\t\t\t\tcontent.find('.js-set-marked').on('click', function (e) {\n\t\t\t\t\tlet currentElement = $(e.currentTarget);\n\t\t\t\t\tlet recordID = currentElement.closest('.js-notification-panel').data('record');\n\t\t\t\t\tthisInstance.markNotifications(recordID).done(function (data) {\n\t\t\t\t\t\tcurrentElement.closest('.js-notification-panel').fadeOut(300, function () {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\tthisInstance.refreshReminderCount(content, element, 'js-count-notifications-reminder');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.fail(function (data, err) {\n\t\t\t\tclearInterval(window.reminderNotifications);\n\t\t\t});\n\t},\n\t/**\n\t * Function request for reminder popups\n\t */\n\trequestReminder: function () {\n\t\tlet thisInstance = this;\n\t\tlet content = $('.remindersNoticeContainer');\n\t\tlet element = $('.remindersNotice');\n\t\tlet url = 'index.php?module=Calendar&view=Reminders&type_remainder=true';\n\t\tAppConnector.request(url)\n\t\t\t.done(function (data) {\n\t\t\t\tcontent.html(data);\n\t\t\t\tthisInstance.refreshReminderCount(content, element, 'countRemindersNotice');\n\t\t\t\tapp.registerModal(content);\n\t\t\t\tcontent.find('.reminderPostpone').on('click', function (e) {\n\t\t\t\t\tlet currentElement = $(e.currentTarget);\n\t\t\t\t\tlet recordID = currentElement.closest('.js-toggle-panel').data('record');\n\t\t\t\t\tlet url =\n\t\t\t\t\t\t'index.php?module=Calendar&action=ActivityReminder&mode=postpone&record=' +\n\t\t\t\t\t\trecordID +\n\t\t\t\t\t\t'&time=' +\n\t\t\t\t\t\tcurrentElement.data('time');\n\t\t\t\t\tAppConnector.request(url).done(function (data) {\n\t\t\t\t\t\tcurrentElement.closest('.js-toggle-panel').fadeOut(300, function () {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\tthisInstance.refreshReminderCount(content, element, 'countRemindersNotice');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.fail(function (data, err) {\n\t\t\t\tclearInterval(window.reminder);\n\t\t\t});\n\t},\n\trefreshReminderCount: function (content, element, tag) {\n\t\tlet badge = element.find('.badge');\n\t\tlet count = content.find('.js-toggle-panel').length;\n\t\tbadge.text(count);\n\t\tbadge.removeClass('d-none');\n\t\tif (count > 0 && element.hasClass('autoRefreshing')) {\n\t\t\telement.effect('pulsate', 1500);\n\t\t\tif (app.cacheGet(tag) != count) {\n\t\t\t\tapp.playSound('REMINDERS');\n\t\t\t\tapp.cacheSet(tag, count);\n\t\t\t}\n\t\t} else {\n\t\t\tbadge.addClass('d-none');\n\t\t}\n\t},\n\tregisterResizeEvent: function () {\n\t\t$(window).on('resize', function () {\n\t\t\tif (this.resizeTO) clearTimeout(this.resizeTO);\n\t\t\tthis.resizeTO = setTimeout(function () {\n\t\t\t\t$(this).trigger('resizeEnd');\n\t\t\t}, 600);\n\t\t});\n\t},\n\tchangeWatching: function (instance) {\n\t\tlet value, module, state, className, user, record;\n\t\tif (instance != undefined) {\n\t\t\tinstance = $(instance);\n\t\t\tvalue = instance.data('value');\n\t\t\tif (instance.data('module') != undefined) {\n\t\t\t\tmodule = instance.data('module');\n\t\t\t} else {\n\t\t\t\tmodule = app.getModuleName();\n\t\t\t}\n\t\t\tif (instance.data('user') != undefined) {\n\t\t\t\tuser = instance.data('user');\n\t\t\t}\n\t\t\tif (instance.data('record') != undefined) {\n\t\t\t\trecord = instance.data('record');\n\t\t\t}\n\t\t}\n\t\tbootbox.dialog({\n\t\t\tmessage: app.vtranslate('JS_WATCHING_MESSAGE' + value),\n\t\t\ttitle: '<span class=\"fas fa-eye mr-1\"></span>' + app.vtranslate('JS_WATCHING_TITLE'),\n\t\t\tbuttons: {\n\t\t\t\tsuccess: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-check mr-1\"></span>' + app.vtranslate('LBL_YES'),\n\t\t\t\t\tclassName: 'btn-success',\n\t\t\t\t\tcallback: function () {\n\t\t\t\t\t\tVtiger_Index_Js.updateWatching(module, value, user, record).done(function (data) {\n\t\t\t\t\t\t\tif (instance != undefined) {\n\t\t\t\t\t\t\t\tlet buttonIcon = instance.find('.fas');\n\t\t\t\t\t\t\t\tstate = data.result == 1 ? 0 : 1;\n\t\t\t\t\t\t\t\tinstance.data('value', state);\n\t\t\t\t\t\t\t\tif (state == 1) {\n\t\t\t\t\t\t\t\t\tinstance.toggleClass(instance.data('off') + ' ' + instance.data('on'));\n\t\t\t\t\t\t\t\t\tbuttonIcon.removeClass('fas fa-eye');\n\t\t\t\t\t\t\t\t\tbuttonIcon.addClass('fas fa-eye-slash');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tinstance.toggleClass(instance.data('on') + ' ' + instance.data('off'));\n\t\t\t\t\t\t\t\t\tbuttonIcon.removeClass('fas fa-eye-slash');\n\t\t\t\t\t\t\t\t\tbuttonIcon.addClass('fas fa-eye');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdanger: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-times mr-1\"></span>' + app.vtranslate('LBL_NO'),\n\t\t\t\t\tclassName: 'btn-danger',\n\t\t\t\t\tcallback: function () {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tupdateWatching: function (module, value, user, record) {\n\t\tlet aDeferred = $.Deferred();\n\t\tlet params = {\n\t\t\tmodule: module,\n\t\t\taction: 'Watchdog',\n\t\t\tstate: value\n\t\t};\n\t\tif (user != undefined) {\n\t\t\tparams['user'] = user;\n\t\t}\n\t\tif (record != undefined && record != 0) {\n\t\t\tparams['record'] = record;\n\t\t}\n\t\tAppConnector.request(params)\n\t\t\t.done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tassignToOwner: function (element, userId) {\n\t\telement = $(element);\n\t\tif (userId == undefined) {\n\t\t\tuserId = CONFIG.userId;\n\t\t}\n\t\tlet params = {\n\t\t\tmodule: element.data('module'),\n\t\t\trecord: element.data('record'),\n\t\t\tfield: 'assigned_user_id',\n\t\t\tvalue: userId\n\t\t};\n\t\tapp.saveAjax('', null, params).done(function (e) {\n\t\t\tapp.hideModalWindow();\n\t\t\tif (app.getViewName() === 'List') {\n\t\t\t\tlet listinstance = new Vtiger_List_Js();\n\t\t\t\tlistinstance.getListViewRecords();\n\t\t\t}\n\t\t});\n\t},\n\tsendNotification: function () {\n\t\tApp.Components.QuickCreate.createRecord('Notification');\n\t},\n\tperformPhoneCall: function (phoneNumber, record) {\n\t\tAppConnector.request({\n\t\t\tmodule: app.getModuleName(),\n\t\t\tview: 'BasicAjax',\n\t\t\tmode: 'performPhoneCall',\n\t\t\tphoneNumber: phoneNumber,\n\t\t\trecord: record\n\t\t}).done(function (response) {\n\t\t\tresponse = JSON.parse(response);\n\t\t\tVtiger_Helper_Js.showMessage({ text: response.result });\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tVtiger_Index_Js.registerWidgetsEvents();\n\t\tVtiger_Index_Js.loadWidgetsOnLoad();\n\t\tVtiger_Index_Js.registerReminders();\n\t\tVtiger_Index_Js.changeSkin();\n\t\tVtiger_Index_Js.registerResizeEvent();\n\t}\n};\n//On Page Load\njQuery(function () {\n\tVtiger_Index_Js.registerEvents();\n});\n"],"names":["Vtiger_Index_Js","showLocation","element","app","showModalWindow","container","mapView","OpenStreetMap_Map_Js","registerModalView","find","val","$","data","trigger","massAddDocuments","url","uploadButton","template","uploadContainer","form","on","remove","files","i","length","append","html","name","e","preventDefault","removeEmptyFilesInput","formData","FormData","getViewName","getModuleName","getRecordId","params","type","processData","contentType","progressIndicatorElement","progressIndicator","blockInfo","enabled","AppConnector","request","done","mode","hideModalWindow","detailView","Vtiger_Detail_Js","getInstance","selectedTabElement","getSelectedTab","reloadTabContent","getContentHolder","Vtiger_RelatedList_Js","loadRelatedList","updatesWidget","getFiltersData","loadWidget","Vtiger_List_Js","getListViewRecords","getEmailFromRecord","record","module","maxEmails","aDeferred","Deferred","progress","position","dataType","action","sourceModule","sourceRecord","substring","JSON","parse","resolve","email","showNotify","text","vtranslate","fail","error","reject","promise","registerMailButtons","thisInstance","each","sendButton","addClass","stopPropagation","popup","toMail","encodeURIComponent","sendMailWindow","postData","width","screen","height","window","open","replace","m","key","value","stringify","submit","location","href","registerWidgetsEvents","widgets","widgetContainer","currentTarget","loadWidgets","attr","cacheSet","imageEle","parent","imagePath","message","trim","css","closest","label","loadWidgetsOnLoad","index","changeSkin","currentElement","hide","progressElement","CONFIG","userId","field","success","result","removeClass","reload","markNotifications","id","ids","row","title","fadeOut","entries","block","getNotificationsForReminder","textStatus","errorThrown","errorLog","markAllNotifications","li","push","registerReminders","activityReminder","parseInt","getMainParams","requestReminder","reminder","setInterval","reminderNotifications","content","refreshReminderCount","recordID","clearInterval","registerModal","tag","badge","count","hasClass","effect","cacheGet","playSound","registerResizeEvent","resizeTO","clearTimeout","setTimeout","changeWatching","instance","state","user","bootbox","dialog","buttons","className","callback","updateWatching","buttonIcon","toggleClass","danger","assignToOwner","saveAjax","listinstance","sendNotification","App","Components","QuickCreate","createRecord","performPhoneCall","phoneNumber","view","response","Vtiger_Helper_Js","showMessage","registerEvents","jQuery"],"mappings":"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"}