{"version":3,"file":"Vtiger.min.js","sources":["Vtiger.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nvar Vtiger_Index_Js = {\n\tshowLocation: function(element) {\n\t\tapp.showModalWindow(null, 'index.php?module=OpenStreetMap&view=MapModal', function(container) {\n\t\t\tvar mapView = new OpenStreetMap_Map_Js();\n\t\t\tmapView.registerModalView(container);\n\t\t\tcontainer.find('.searchValue').val($(element).data('location'));\n\t\t\tcontainer.find('.searchBtn').trigger('click');\n\t\t});\n\t},\n\tmassAddDocuments: function(url) {\n\t\tapp.showModalWindow(null, url, function(container) {\n\t\t\tvar uploadButton = container.find('#filesToUpload');\n\t\t\tvar template = container.find('.fileContainer');\n\t\t\tvar uploadContainer = container.find('.uploadFileContainer');\n\t\t\tvar form = container.find('form');\n\t\t\tuploadButton.on('change', function() {\n\t\t\t\tuploadContainer.find('.fileItem').remove();\n\t\t\t\tvar files = uploadButton[0].files;\n\t\t\t\tfor (var i = 0; i < files.length; i++) {\n\t\t\t\t\tuploadContainer.append(template.html());\n\t\t\t\t\tuploadContainer.find('[name=\"nameFile[]\"]:last').val(files[i].name);\n\t\t\t\t}\n\t\t\t});\n\t\t\tform.on('submit', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tapp.removeEmptyFilesInput(form[0]);\n\t\t\t\tvar formData = new FormData(form[0]);\n\t\t\t\turl = 'index.php';\n\t\t\t\tif (app.getViewName() === 'Detail') {\n\t\t\t\t\tformData.append('createmode', 'link');\n\t\t\t\t\tformData.append('return_module', app.getModuleName());\n\t\t\t\t\tformData.append('return_id', app.getRecordId());\n\t\t\t\t}\n\t\t\t\tvar params = {\n\t\t\t\t\turl: url,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdata: formData,\n\t\t\t\t\tprocessData: false,\n\t\t\t\t\tcontentType: false\n\t\t\t\t};\n\t\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t});\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tvar relatedModuleName = 'Documents';\n\t\t\t\t\tif (app.getViewName() === 'Detail') {\n\t\t\t\t\t\tvar detailView = Vtiger_Detail_Js.getInstance();\n\t\t\t\t\t\tvar selectedTabElement = detailView.getSelectedTab();\n\t\t\t\t\t\tif (selectedTabElement.data('reference') === relatedModuleName) {\n\t\t\t\t\t\t\tdetailView.reloadTabContent();\n\t\t\t\t\t\t}else if(detailView.getContentHolder().find('.detailViewBlockLink').data('reference') === relatedModuleName){\n\t\t\t\t\t\t\tVtiger_RelatedList_Js.getInstance(detailView.getRecordId(), app.getModuleName(), selectedTabElement, \trelatedModuleName).loadRelatedList();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar updatesWidget = detailView\n\t\t\t\t\t\t\t\t.getContentHolder()\n\t\t\t\t\t\t\t\t.find(\"[data-type='RelatedModule'][data-name='Documents']\");\n\t\t\t\t\t\t\tif (updatesWidget.length > 0) {\n\t\t\t\t\t\t\t\tvar params = detailView.getFiltersData(updatesWidget);\n\t\t\t\t\t\t\t\tdetailView.loadWidget(updatesWidget, params['params']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_List_Js.getInstance().getListViewRecords();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tgetEmailFromRecord(record, module, maxEmails) {\n\t\tconst aDeferred = $.Deferred();\n\t\tconst progress = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\tAppConnector.request({\n\t\t\tdataType: 'html',\n\t\t\tdata: {\n\t\t\t\tmodule: 'OSSMail',\n\t\t\t\taction: 'GetMail',\n\t\t\t\tsourceModule: module,\n\t\t\t\tsourceRecord: record,\n\t\t\t\tmaxEmails: maxEmails\n\t\t\t}\n\t\t})\n\t\t\t.done(data => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tif (data.substring(0, 1) == '{') {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\tdata = data['result'];\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t} else {\n\t\t\t\t\tapp.showModalWindow(data, data => {\n\t\t\t\t\t\tdata.find('.selectButton').on('click', e => {\n\t\t\t\t\t\t\tif (data.find('input:checked').length) {\n\t\t\t\t\t\t\t\tlet email = data.find('input:checked').val();\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\taDeferred.resolve(email);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SELECT_AN_OPTION'),\n\t\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.fail((error, err) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\taDeferred.reject(error);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterMailButtons: function(container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.sendMailBtn:not(.mailBtnActive)').each(function(e) {\n\t\t\tvar sendButton = $(this);\n\t\t\tsendButton.addClass('mailBtnActive');\n\t\t\tsendButton.on('click', function(e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tvar url = sendButton.data('url');\n\t\t\t\tvar popup = sendButton.data('popup');\n\t\t\t\tvar toMail = sendButton.data('to');\n\t\t\t\tif (toMail) {\n\t\t\t\t\turl += '&to=' + toMail;\n\t\t\t\t}\n\t\t\t\tif (app.getRecordId() && sendButton.data('record') !== app.getRecordId()) {\n\t\t\t\t\turl += '&crmModule=' + app.getModuleName() + '&crmRecord=' + app.getRecordId();\n\t\t\t\t}\n\t\t\t\tthisInstance.sendMailWindow(url, popup);\n\t\t\t});\n\t\t});\n\t},\n\tsendMailWindow: function(url, popup, postData) {\n\t\tif (popup) {\n\t\t\tvar width = screen.width - 15;\n\t\t\tvar height = screen.height - 150;\n\t\t\tvar left = 0;\n\t\t\tvar top = 30;\n\t\t\tvar popupParams = 'width=' + width + ', height=' + height + ', left=' + left + ', top=' + top;\n\t\t\tif (postData == undefined) {\n\t\t\t\twindow.open(\n\t\t\t\t\turl,\n\t\t\t\t\t'_blank',\n\t\t\t\t\tpopupParams + ',resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,status=nomenubar=no'\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar form = $('<form/>', { action: 'index.php' });\n\t\t\turl.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m, key, value) {\n\t\t\t\tform.append($('<input>', { name: key, value: value }));\n\t\t\t});\n\t\t\tfor (var i in postData) {\n\t\t\t\tform.append($('<input>', { name: i, value: JSON.stringify(postData[i]) }));\n\t\t\t}\n\t\t\t$('body').append(form);\n\t\t\tform.submit();\n\t\t} else {\n\t\t\twindow.location.href = url;\n\t\t}\n\t},\n\tregisterWidgetsEvents: function() {\n\t\tvar widgets = $('div.widgetContainer');\n\t\twidgets.on('shown.bs.collapse', function(e) {\n\t\t\tvar widgetContainer = $(e.currentTarget);\n\t\t\tVtiger_Index_Js.loadWidgets(widgetContainer);\n\t\t\tvar key = widgetContainer.attr('id');\n\t\t\tapp.cacheSet(key, 1);\n\t\t});\n\t\twidgets.on('hidden.bs.collapse', function(e) {\n\t\t\tvar widgetContainer = $(e.currentTarget);\n\t\t\tvar imageEle = widgetContainer.parent().find('.imageElement');\n\t\t\tvar imagePath = imageEle.data('rightimage');\n\t\t\timageEle.attr('src', imagePath);\n\t\t\tvar key = widgetContainer.attr('id');\n\t\t\tapp.cacheSet(key, 0);\n\t\t});\n\t},\n\t/**\n\t * Function is used to load the sidebar widgets\n\t * @param widgetContainer - widget container\n\t * @param open - widget should be open or closed\n\t */\n\tloadWidgets: function(widgetContainer, open) {\n\t\tvar message = $('.loadingWidgetMsg').html();\n\t\tif (\n\t\t\twidgetContainer\n\t\t\t\t.find('.card-body')\n\t\t\t\t.html()\n\t\t\t\t.trim()\n\t\t) {\n\t\t\tvar imageEle = widgetContainer.parent().find('.imageElement');\n\t\t\tvar imagePath = imageEle.data('downimage');\n\t\t\timageEle.attr('src', imagePath);\n\t\t\twidgetContainer.css('height', 'auto');\n\t\t\treturn;\n\t\t}\n\n\t\twidgetContainer.progressIndicator({ message: message });\n\t\tvar url = widgetContainer.data('url');\n\t\tvar listViewWidgetParams = {\n\t\t\ttype: 'GET',\n\t\t\turl: 'index.php',\n\t\t\tdataType: 'html',\n\t\t\tdata: url\n\t\t};\n\t\tAppConnector.request(listViewWidgetParams).done(function(data) {\n\t\t\tif (typeof open === 'undefined') open = true;\n\t\t\tif (open) {\n\t\t\t\twidgetContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\tvar imageEle = widgetContainer.parent().find('.imageElement');\n\t\t\t\tvar imagePath = imageEle.data('downimage');\n\t\t\t\timageEle.attr('src', imagePath);\n\t\t\t\twidgetContainer.css('height', 'auto');\n\t\t\t}\n\t\t\twidgetContainer.html(data);\n\t\t\tif (data == '') {\n\t\t\t\twidgetContainer.closest('.quickWidget').addClass('d-none');\n\t\t\t} else {\n\t\t\t\tvar label = widgetContainer\n\t\t\t\t\t.closest('.quickWidget')\n\t\t\t\t\t.find('.quickWidgetHeader')\n\t\t\t\t\t.data('label');\n\t\t\t}\n\t\t\t$('.bodyContents').trigger('Vtiger.Widget.Load.' + label, $(widgetContainer));\n\t\t});\n\t},\n\tloadWidgetsOnLoad: function() {\n\t\tvar widgets = $('div.widgetContainer');\n\t\twidgets.each(function(index, element) {\n\t\t\tVtiger_Index_Js.loadWidgets($(element));\n\t\t});\n\t},\n\t/**\n\t * Function to change user theme(colour)\n\t * @params : colour name\n\t */\n\tchangeSkin: function() {\n\t\t$('.themeElement').on('click', function(e) {\n\t\t\te.stopPropagation();\n\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\tcurrentElement.closest('#themeContainer').hide();\n\t\t\tvar progressElement = $('#progressDiv');\n\t\t\tprogressElement.progressIndicator();\n\t\t\tvar params = {\n\t\t\t\tmodule: 'Users',\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\trecord: CONFIG.userId,\n\t\t\t\tfield: 'theme',\n\t\t\t\tvalue: currentElement.data('skinName')\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\t\tprogressElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t$('.settingIcons').removeClass('open');\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function(error, err) {});\n\t\t});\n\t},\n\tmarkNotifications: function(id) {\n\t\tvar aDeferred = $.Deferred();\n\t\tvar thisInstance = this;\n\t\tvar params = {\n\t\t\tmodule: 'Notification',\n\t\t\taction: 'Notification',\n\t\t\tmode: 'setMark',\n\t\t\tids: id\n\t\t};\n\t\tAppConnector.request(params)\n\t\t\t.done(function(data) {\n\t\t\t\tvar row = $('.notificationEntries .noticeRow[data-id=\"' + id + '\"]');\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_MARKED_AS_READ'),\n\t\t\t\t\ttype: 'info'\n\t\t\t\t});\n\t\t\t\tif (row.length) {\n\t\t\t\t\trow.fadeOut(300, function() {\n\t\t\t\t\t\tvar entries = row.closest('.notificationEntries');\n\t\t\t\t\t\trow.remove();\n\t\t\t\t\t\tentries.each(function(index) {\n\t\t\t\t\t\t\tvar block = $(this);\n\t\t\t\t\t\t\tif (block.find('.noticeRow').length == 0) {\n\t\t\t\t\t\t\t\tblock.closest('.panel').hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.getNotificationsForReminder();\n\t\t\t\t}\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tmarkAllNotifications: function(element) {\n\t\tvar ids = [];\n\t\tvar li = $(element).closest('.notificationContainer');\n\t\tli.find('.notificationEntries .noticeRow').each(function(index) {\n\t\t\tids.push($(this).data('id'));\n\t\t});\n\t\tif (ids.length == 0) {\n\t\t\telement.remove();\n\t\t\treturn false;\n\t\t}\n\t\tvar params = {\n\t\t\tmodule: 'Notification',\n\t\t\taction: 'Notification',\n\t\t\tmode: 'setMark',\n\t\t\tids: ids\n\t\t};\n\t\tli.progressIndicator({ position: 'html' });\n\t\tAppConnector.request(params).done(function(data) {\n\t\t\tli.progressIndicator({ mode: 'hide' });\n\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\ttext: app.vtranslate('JS_MARKED_AS_READ'),\n\t\t\t\ttype: 'info'\n\t\t\t});\n\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t});\n\t},\n\t/**\n\t * Function registers event for Reminder popups\n\t */\n\tregisterReminders: function() {\n\t\tvar activityReminder = (parseInt(app.getMainParams('activityReminder')) || 0) * 1000;\n\t\tif (activityReminder != 0 && $('.remindersNotice.autoRefreshing').length) {\n\t\t\tVtiger_Index_Js.requestReminder();\n\t\t\twindow.reminder = setInterval(function() {\n\t\t\t\tVtiger_Index_Js.requestReminder();\n\t\t\t}, activityReminder);\n\t\t}\n\t\tvar reminder = (parseInt(app.getMainParams('intervalForNotificationNumberCheck')) || 0) * 1000;\n\t\tif (reminder != 0 && $('.notificationsNotice.autoRefreshing').length) {\n\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t\twindow.reminderNotifications = setInterval(function() {\n\t\t\t\tVtiger_Index_Js.getNotificationsForReminder();\n\t\t\t}, reminder);\n\t\t}\n\t},\n\tgetNotificationsForReminder: function() {\n\t\tvar thisInstance = this;\n\t\tvar content = $('.remindersNotificationContainer');\n\t\tvar element = $('.notificationsNotice');\n\t\tvar url = 'index.php?module=Notification&view=Reminders';\n\t\tAppConnector.request(url)\n\t\t\t.done(function(data) {\n\t\t\t\tcontent.html(data);\n\t\t\t\tapp.registerMoreContent(content.find('button.moreBtn'));\n\t\t\t\tthisInstance.refreshReminderCount(content, element, 'js-count-notifications-reminder');\n\t\t\t\tcontent.find('.js-set-marked').on('click', function(e) {\n\t\t\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\t\t\tvar recordID = currentElement.closest('.js-notification-panel').data('record');\n\t\t\t\t\tthisInstance.markNotifications(recordID).done(function(data) {\n\t\t\t\t\t\tcurrentElement.closest('.js-notification-panel').fadeOut(300, function() {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\tthisInstance.refreshReminderCount(content, element, 'js-count-notifications-reminder');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.fail(function(data, err) {\n\t\t\t\tclearInterval(window.reminderNotifications);\n\t\t\t});\n\t},\n\t/**\n\t * Function request for reminder popups\n\t */\n\trequestReminder: function() {\n\t\tvar thisInstance = this;\n\t\tvar content = $('.remindersNoticeContainer');\n\t\tvar element = $('.remindersNotice');\n\t\tvar url = 'index.php?module=Calendar&view=Reminders&type_remainder=true';\n\t\tAppConnector.request(url)\n\t\t\t.done(function(data) {\n\t\t\t\tcontent.html(data);\n\t\t\t\tthisInstance.refreshReminderCount(content, element, 'countRemindersNotice');\n\t\t\t\tapp.registerModal(content);\n\t\t\t\tcontent.find('.reminderPostpone').on('click', function(e) {\n\t\t\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\t\t\tvar recordID = currentElement.closest('.js-toggle-panel').data('record');\n\t\t\t\t\tvar url =\n\t\t\t\t\t\t'index.php?module=Calendar&action=ActivityReminder&mode=postpone&record=' +\n\t\t\t\t\t\trecordID +\n\t\t\t\t\t\t'&time=' +\n\t\t\t\t\t\tcurrentElement.data('time');\n\t\t\t\t\tAppConnector.request(url).done(function(data) {\n\t\t\t\t\t\tcurrentElement.closest('.js-toggle-panel').fadeOut(300, function() {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\tthisInstance.refreshReminderCount(content, element, 'countRemindersNotice');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.fail(function(data, err) {\n\t\t\t\tclearInterval(window.reminder);\n\t\t\t});\n\t},\n\trefreshReminderCount: function(content, element, tag) {\n\t\tvar badge = element.find('.badge');\n\t\tvar count = content.find('.js-toggle-panel').length;\n\t\tbadge.text(count);\n\t\tbadge.removeClass('d-none');\n\t\tif (count > 0 && element.hasClass('autoRefreshing')) {\n\t\t\telement.effect('pulsate', 1500);\n\t\t\tif (app.cacheGet(tag) != count) {\n\t\t\t\tapp.playSound('REMINDERS');\n\t\t\t\tapp.cacheSet(tag, count);\n\t\t\t}\n\t\t} else {\n\t\t\tbadge.addClass('d-none');\n\t\t}\n\t},\n\tregisterResizeEvent: function() {\n\t\t$(window).on('resize', function() {\n\t\t\tif (this.resizeTO) clearTimeout(this.resizeTO);\n\t\t\tthis.resizeTO = setTimeout(function() {\n\t\t\t\t$(this).trigger('resizeEnd');\n\t\t\t}, 600);\n\t\t});\n\t},\n\tchangeWatching: function(instance) {\n\t\tvar value, module, state, className, user, record;\n\t\tif (instance != undefined) {\n\t\t\tinstance = $(instance);\n\t\t\tvalue = instance.data('value');\n\t\t\tif (instance.data('module') != undefined) {\n\t\t\t\tmodule = instance.data('module');\n\t\t\t} else {\n\t\t\t\tmodule = app.getModuleName();\n\t\t\t}\n\t\t\tif (instance.data('user') != undefined) {\n\t\t\t\tuser = instance.data('user');\n\t\t\t}\n\t\t\tif (instance.data('record') != undefined) {\n\t\t\t\trecord = instance.data('record');\n\t\t\t}\n\t\t}\n\t\tbootbox.dialog({\n\t\t\tmessage: app.vtranslate('JS_WATCHING_MESSAGE' + value),\n\t\t\ttitle: '<span class=\"fas fa-eye mr-1\"></span>' + app.vtranslate('JS_WATCHING_TITLE'),\n\t\t\tbuttons: {\n\t\t\t\tsuccess: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-check mr-1\"></span>' + app.vtranslate('LBL_YES'),\n\t\t\t\t\tclassName: 'btn-success',\n\t\t\t\t\tcallback: function() {\n\t\t\t\t\t\tVtiger_Index_Js.updateWatching(module, value, user, record).done(function(data) {\n\t\t\t\t\t\t\tif (instance != undefined) {\n\t\t\t\t\t\t\t\tvar buttonIcon = instance.find('.fas');\n\t\t\t\t\t\t\t\tstate = data.result == 1 ? 0 : 1;\n\t\t\t\t\t\t\t\tinstance.data('value', state);\n\t\t\t\t\t\t\t\tif (state == 1) {\n\t\t\t\t\t\t\t\t\tinstance.toggleClass(instance.data('off') + ' ' + instance.data('on'));\n\t\t\t\t\t\t\t\t\tbuttonIcon.removeClass('fas fa-eye');\n\t\t\t\t\t\t\t\t\tbuttonIcon.addClass('fas fa-eye-slash');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tinstance.toggleClass(instance.data('on') + ' ' + instance.data('off'));\n\t\t\t\t\t\t\t\t\tbuttonIcon.removeClass('fas fa-eye-slash');\n\t\t\t\t\t\t\t\t\tbuttonIcon.addClass('fas fa-eye');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdanger: {\n\t\t\t\t\tlabel: '<span class=\"fas fa-times mr-1\"></span>' + app.vtranslate('LBL_NO'),\n\t\t\t\t\tclassName: 'btn-danger',\n\t\t\t\t\tcallback: function() {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tupdateWatching: function(module, value, user, record) {\n\t\tvar aDeferred = $.Deferred();\n\t\tvar params = {\n\t\t\tmodule: module,\n\t\t\taction: 'Watchdog',\n\t\t\tstate: value\n\t\t};\n\t\tif (user != undefined) {\n\t\t\tparams['user'] = user;\n\t\t}\n\t\tif (record != undefined && record != 0) {\n\t\t\tparams['record'] = record;\n\t\t}\n\t\tAppConnector.request(params)\n\t\t\t.done(function(data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function(textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tassignToOwner: function(element, userId) {\n\t\telement = $(element);\n\t\tif (userId == undefined) {\n\t\t\tuserId = CONFIG.userId;\n\t\t}\n\t\tvar params = {\n\t\t\tmodule: element.data('module'),\n\t\t\trecord: element.data('record'),\n\t\t\tfield: 'assigned_user_id',\n\t\t\tvalue: userId\n\t\t};\n\t\tapp.saveAjax('', null, params).done(function(e) {\n\t\t\tapp.hideModalWindow();\n\t\t\tif (app.getViewName() === 'List') {\n\t\t\t\tvar listinstance = new Vtiger_List_Js();\n\t\t\t\tlistinstance.getListViewRecords();\n\t\t\t}\n\t\t});\n\t},\n\tsendNotification: function() {\n\t\tVtiger_Header_Js.getInstance().quickCreateModule('Notification');\n\t},\n\tperformPhoneCall: function(phoneNumber, record) {\n\t\tAppConnector.request({\n\t\t\tmodule: app.getModuleName(),\n\t\t\tview: 'BasicAjax',\n\t\t\tmode: 'performPhoneCall',\n\t\t\tphoneNumber: phoneNumber,\n\t\t\trecord: record\n\t\t}).done(function(response) {\n\t\t\tresponse = JSON.parse(response);\n\t\t\tVtiger_Helper_Js.showMessage({ text: response.result });\n\t\t});\n\t},\n\tregisterAterloginEvents: function() {\n\t\tif (typeof CONFIG.ShowUserPasswordChange !== 'undefined') {\n\t\t\tapp.showModalWindow(null, 'index.php?module=Users&view=PasswordModal&mode=change&record=' + CONFIG.userId);\n\t\t}\n\t\tif (typeof CONFIG.ShowAuthy2faModal !== 'undefined') {\n\t\t\tapp.showModalWindow({\n\t\t\t\tbackdrop: 'static',\n\t\t\t\turl: 'index.php?module=Users&view=TwoFactorAuthenticationModal&record=' + CONFIG.userId\n\t\t\t});\n\t\t}\n\t},\n\tregisterEvents: function() {\n\t\tVtiger_Index_Js.registerWidgetsEvents();\n\t\tVtiger_Index_Js.loadWidgetsOnLoad();\n\t\tVtiger_Index_Js.registerReminders();\n\t\tVtiger_Index_Js.changeSkin();\n\t\tVtiger_Index_Js.registerResizeEvent();\n\t\tVtiger_Index_Js.registerAterloginEvents();\n\t}\n};\n//On Page Load\n$(document).ready(function() {\n\tVtiger_Index_Js.registerEvents();\n});\n"],"names":["showLocation","element","app","showModalWindow","container","mapView","registerModalView","find","val","$","data","trigger","massAddDocuments","url","template","uploadContainer","form","uploadButton","on","remove","files","i","length","append","html","name","e","preventDefault","removeEmptyFilesInput","getViewName","formData","getModuleName","getRecordId","type","processData","contentType","progressIndicatorElement","progressIndicator","blockInfo","enabled","AppConnector","request","params","done","mode","hideModalWindow","Vtiger_Detail_Js","getInstance","selectedTabElement","detailView","getSelectedTab","reloadTabContent","getContentHolder","Vtiger_RelatedList_Js","loadRelatedList","getFiltersData","updatesWidget","loadWidget","getListViewRecords","getEmailFromRecord","record","module","maxEmails","Deferred","progress","position","dataType","action","sourceModule","sourceRecord","substring","JSON","parse","aDeferred","resolve","email","showPnotify","text","vtranslate","fail","error","reject","promise","registerMailButtons","each","sendButton","addClass","stopPropagation","popup","toMail","thisInstance","sendMailWindow","postData","screen","width","height","open","replace","m","key","value","stringify","submit","location","href","registerWidgetsEvents","widgets","currentTarget","Vtiger_Index_Js","loadWidgets","widgetContainer","attr","cacheSet","imageEle","parent","imagePath","trim","css","message","closest","label","loadWidgetsOnLoad","index","changeSkin","currentElement","hide","progressElement","CONFIG","userId","field","success","result","removeClass","window","reload","markNotifications","id","ids","Vtiger_Helper_Js","title","row","fadeOut","entries","block","getNotificationsForReminder","textStatus","errorThrown","errorLog","markAllNotifications","li","push","registerReminders","parseInt","getMainParams","requestReminder","reminder","setInterval","activityReminder","reminderNotifications","content","registerMoreContent","refreshReminderCount","recordID","clearInterval","registerModal","tag","count","badge","hasClass","effect","cacheGet","playSound","registerResizeEvent","resizeTO","clearTimeout","setTimeout","changeWatching","instance","state","user","bootbox","dialog","buttons","className","callback","updateWatching","toggleClass","buttonIcon","danger","assignToOwner","saveAjax","listinstance","sendNotification","Vtiger_Header_Js","quickCreateModule","performPhoneCall","phoneNumber","view","response","showMessage","registerAterloginEvents","ShowUserPasswordChange","ShowAuthy2faModal","backdrop","registerEvents","document","ready"],"mappings":"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"}