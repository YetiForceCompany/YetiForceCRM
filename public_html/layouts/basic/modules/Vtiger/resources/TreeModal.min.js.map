{"version":3,"file":"TreeModal.min.js","sources":["TreeModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_TreeModal_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Event for select row\n\t\t */\n\t\tselectEvent: false,\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\t\t/**\n\t\t * Jstree element\n\t\t */\n\t\ttree: false,\n\t\t/**\n\t\t * Multiple selection\n\t\t */\n\t\tmultiple: false,\n\t\t/**\n\t\t * Set event for select row\n\t\t * @param {function} cb\n\t\t */\n\t\tsetSelectEvent: function(cb) {\n\t\t\tthis.selectEvent = cb;\n\t\t},\n\t\t/**\n\t\t * Generate tree\n\t\t */\n\t\tgenerateTree: function() {\n\t\t\tlet plugins = [];\n\t\t\tif (this.multiple) {\n\t\t\t\tplugins.push('category');\n\t\t\t\tplugins.push('checkbox');\n\t\t\t}\n\t\t\tplugins.push('search');\n\t\t\tthis.tree.jstree(\n\t\t\t\t$.extend(\n\t\t\t\t\ttrue,\n\t\t\t\t\t{\n\t\t\t\t\t\tcore: {\n\t\t\t\t\t\t\tdata: JSON.parse(this.container.find('.js-tree-value').val()),\n\t\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\t\tresponsive: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcheckbox: {\n\t\t\t\t\t\t\tthree_state: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tplugins: plugins\n\t\t\t\t\t},\n\t\t\t\t\tthis.tree.data('params')\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Register select events\n\t\t */\n\t\tregisterSelectEvent: function() {\n\t\t\tif (this.multiple) {\n\t\t\t\tthis.container.find('[name=\"saveButton\"]').on('click', () => {\n\t\t\t\t\tlet id = [],\n\t\t\t\t\t\tname = [];\n\t\t\t\t\t$.each(this.tree.jstree('getCategory', true), function(index, value) {\n\t\t\t\t\t\tid.push('T' + value.id);\n\t\t\t\t\t\tname.push(value.text);\n\t\t\t\t\t});\n\t\t\t\t\tthis.selectEvent({ id: id.join(), name: name.join(', ') });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.tree.on('select_node.jstree', (event, data) => {\n\t\t\t\t\tthis.selectEvent({ id: 'T' + data.node.id, name: data.node.text });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterSearchEvent: function() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet valueSearch = this.container.find('#valueSearchTree');\n\t\t\tvalueSearch.on('keypress', function(e) {\n\t\t\t\tif (e.which == 13) {\n\t\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('#btnSearchTree').on('click', function() {\n\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t});\n\t\t},\n\t\tsearchingInTree: function(text) {\n\t\t\tthis.tree.jstree(true).search(text);\n\t\t},\n\t\t/**\n\t\t * Register base events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function(modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.tree = this.container.find('.js-tree-contents');\n\t\t\tthis.multiple = this.container.find('.js-multiple').val() == 1 ? true : false;\n\t\t\tthis.generateTree();\n\t\t\tthis.registerSearchEvent();\n\t\t\tthis.registerSelectEvent();\n\t\t}\n\t}\n);\n"],"names":["$","Class","selectEvent","container","tree","multiple","setSelectEvent","cb","generateTree","plugins","push","jstree","extend","core","data","JSON","parse","find","val","themes","name","responsive","checkbox","three_state","registerSelectEvent","on","each","index","value","id","text","join","app","hideModalWindow","parent","attr","event","node","registerSearchEvent","valueSearch","e","which","thisInstance","searchingInTree","search","registerEvents","modalContainer"],"mappings":"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"}