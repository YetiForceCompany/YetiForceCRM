{"version":3,"file":"DashBoard.min.js","sources":["DashBoard.js"],"sourcesContent":["/*+**********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.1\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n ************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Vtiger_DashBoard_Js',\n\t{\n\t\tgrid: false,\n\t\t//static property which will store the instance of dashboard\n\t\tcurrentInstance: false,\n\t\tscrollContainer: false,\n\t\trestrictContentDrag: function (container) {\n\t\t\tcontainer.on('mousedown.draggable', function (e) {\n\t\t\t\tlet element = $(e.target);\n\t\t\t\tlet isHeaderElement = element.closest('.dashboardWidgetHeader').length > 0 ? true : false;\n\t\t\t\tif (isHeaderElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//Stop the event propagation so that drag will not start for contents\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tcontainer: false,\n\t\tnoCache: false,\n\t\tinstancesCache: {},\n\t\tinit: function () {\n\t\t\tVtiger_DashBoard_Js.currentInstance = this;\n\t\t},\n\t\tgetContainer: function () {\n\t\t\tif (this.noCache == true || this.container == false) {\n\t\t\t\tthis.container = $('.grid-stack');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tgetCurrentDashboard: function () {\n\t\t\tlet dashboardId = $('.selectDashboard li a.active').closest('li').data('id');\n\t\t\tif (!dashboardId) {\n\t\t\t\tdashboardId = 1;\n\t\t\t}\n\t\t\treturn dashboardId;\n\t\t},\n\t\tgetWidgetInstance: function (widgetContainer) {\n\t\t\tlet id = widgetContainer.attr('id');\n\t\t\tif (this.noCache || !(id in this.instancesCache)) {\n\t\t\t\tlet widgetName = widgetContainer.data('name');\n\t\t\t\tthis.instancesCache[id] = Vtiger_Widget_Js.getInstance(widgetContainer, widgetName);\n\t\t\t}\n\t\t\treturn this.instancesCache[id];\n\t\t},\n\t\tregisterGrid: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tVtiger_DashBoard_Js.grid = GridStack.init(\n\t\t\t\t{\n\t\t\t\t\tverticalMargin: '0.5rem',\n\t\t\t\t\talwaysShowResizeHandle: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n\t\t\t\t\t\tnavigator.userAgent\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t'.grid-stack'\n\t\t\t);\n\t\t\tVtiger_DashBoard_Js.grid.on('change', function (event, ui) {\n\t\t\t\tthisInstance.savePositions($('.grid-stack-item'));\n\t\t\t});\n\t\t\t// load widgets after grid initialization to prevent too early lazy loading - visible viewport changes\n\t\t\tthis.loadWidgets();\n\t\t\t// recalculate positions with scrollbars\n\t\t\tif (this.getContainer().width() !== this.getContainer().parent().width()) {\n\t\t\t\tconst parentWidth = thisInstance.getContainer().parent().width();\n\t\t\t\tthis.getContainer().css('width', parentWidth + 'px');\n\t\t\t}\n\t\t},\n\t\tsavePositions: function (widgets) {\n\t\t\tlet widgetRowColPositions = {},\n\t\t\t\twidgetSizes = {};\n\t\t\tfor (let index = 0, len = widgets.length; index < len; ++index) {\n\t\t\t\tlet widget = $(widgets[index]);\n\t\t\t\twidgetRowColPositions[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\t\trow: widget.attr('data-gs-y'),\n\t\t\t\t\tcol: widget.attr('data-gs-x')\n\t\t\t\t});\n\t\t\t\twidgetSizes[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\t\twidth: widget.attr('data-gs-width'),\n\t\t\t\t\theight: widget.attr('data-gs-height')\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.updateLazyWidget();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'SaveWidgetPositions',\n\t\t\t\tposition: widgetRowColPositions,\n\t\t\t\tsize: widgetSizes\n\t\t\t});\n\t\t},\n\t\tupdateLazyWidget() {\n\t\t\tconst scrollTop = this.scrollContainer.scrollTop();\n\t\t\tthis.scrollContainer.scrollTop(scrollTop + 1).scrollTop(scrollTop);\n\t\t},\n\t\tloadWidgets: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.scrollContainer = App.Components.Scrollbar.page.element;\n\t\t\tif (!Quasar.plugins.Platform.is.desktop) {\n\t\t\t\tthis.scrollContainer = $('.bodyContent');\n\t\t\t\tapp.showNewScrollbar(this.scrollContainer);\n\t\t\t}\n\t\t\tthisInstance\n\t\t\t\t.getContainer()\n\t\t\t\t.find('.dashboardWidget')\n\t\t\t\t.Lazy({\n\t\t\t\t\tthreshold: 0,\n\t\t\t\t\tappendScroll: this.scrollContainer,\n\t\t\t\t\twidgetLoader(element) {\n\t\t\t\t\t\tthisInstance.loadWidget(element);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.updateLazyWidget(this.scrollContainer);\n\t\t},\n\t\tloadWidget: function (widgetContainer) {\n\t\t\tconst self = this;\n\t\t\tlet urlParams = widgetContainer.data('url');\n\t\t\tlet mode = widgetContainer.data('mode');\n\t\t\tlet moduleName = app.getModuleName();\n\t\t\tlet sourceModule = $('a.active', 'ul.selectDashboradView').parent().data('module');\n\t\t\twidgetContainer.progressIndicator();\n\t\t\tif (mode === 'open') {\n\t\t\t\tlet name = widgetContainer.attr('id');\n\t\t\t\tlet userId = CONFIG.userId;\n\t\t\t\tif (widgetContainer.data('cache') === 1) {\n\t\t\t\t\tlet cacheUrl = app.cacheGet(name + '_' + userId, false);\n\t\t\t\t\turlParams = cacheUrl ? cacheUrl : urlParams;\n\t\t\t\t}\n\t\t\t\tAppConnector.request(urlParams).done((data) => {\n\t\t\t\t\twidgetContainer.html(data);\n\t\t\t\t\twidgetContainer.closest('.grid-stack').on('gsresizestop', (event, elem) => {\n\t\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\t});\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(widgetContainer.find('.select2'));\n\t\t\t\t\tApp.Fields.Tree.register(widgetContainer);\n\t\t\t\t\tself.getWidgetInstance(widgetContainer);\n\t\t\t\t\twidgetContainer.trigger(Vtiger_Widget_Js.widgetPostLoadEvent);\n\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\tif (sourceModule && moduleName != sourceModule) {\n\t\t\t\t\t\t$('a.js-widget-remove', widgetContainer).remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adjust the height of the widget.\n\t\t * @param {jQuery} widgetContainer\n\t\t */\n\t\tadjustHeightWidget(widgetContainer) {\n\t\t\tconst headerHeight = widgetContainer.find('.dashboardWidgetHeader').outerHeight();\n\t\t\tlet adjustedHeight = widgetContainer.height() - headerHeight;\n\t\t\tif (widgetContainer.find('.dashboardWidgetFooter').length) {\n\t\t\t\tadjustedHeight -= widgetContainer.find('.dashboardWidgetFooter').outerHeight();\n\t\t\t}\n\t\t\tconst widgetContent = widgetContainer.find('.dashboardWidgetContent');\n\t\t\twidgetContent.css('max-height', adjustedHeight + 'px');\n\t\t\tapp.showNewScrollbar(widgetContent, { wheelPropagation: true });\n\t\t},\n\t\tregisterRefreshWidget: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tthis.getContainer().on('click', 'a[name=\"drefresh\"]', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet parent = element.closest('.dashboardWidget');\n\t\t\t\tlet widgetInstnace = thisInstance.getWidgetInstance(parent);\n\t\t\t\twidgetInstnace.refreshWidget();\n\t\t\t\treturn;\n\t\t\t});\n\t\t},\n\t\tremoveWidget: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.getContainer().on('click', '.js-widget-remove', function (e) {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\tlistItem = $(element).parents('.grid-stack-item'),\n\t\t\t\t\twidth = listItem.attr('data-gs-width'),\n\t\t\t\t\theight = listItem.attr('data-gs-height'),\n\t\t\t\t\turl = element.data('url'),\n\t\t\t\t\tparent = element.closest('.dashboardWidgetHeader').parent(),\n\t\t\t\t\twidgetName = parent.data('name'),\n\t\t\t\t\twidgetTitle = parent.find('.dashboardTitle').attr('title'),\n\t\t\t\t\tmessage =\n\t\t\t\t\t\tapp.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET') +\n\t\t\t\t\t\t' [' +\n\t\t\t\t\t\twidgetTitle +\n\t\t\t\t\t\t']. ' +\n\t\t\t\t\t\tapp.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET_INFO');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function (e) {\n\t\t\t\t\t\tAppConnector.request(url).done(function (response) {\n\t\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t\tlet nonReversableWidgets = [];\n\t\t\t\t\t\t\t\tparent.fadeOut('slow', function () {\n\t\t\t\t\t\t\t\t\tparent.remove();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif ($.inArray(widgetName, nonReversableWidgets) == -1) {\n\t\t\t\t\t\t\t\t\tVtiger_DashBoard_Js.grid.removeWidget(element.closest('.grid-stack-item'));\n\t\t\t\t\t\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').removeClass('d-none');\n\t\t\t\t\t\t\t\t\tlet data = `<a class=\"js-widget-list__item dropdown-item d-flex\"\n\t\t\t\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\t\t\t\tdata-widget-url=\"${response.result.url}\"\n\t\t\t\t\t\t\t\t\t\tdata-linkid=\"${response.result.linkid}\"\n\t\t\t\t\t\t\t\t\t\tdata-name=\"${response.result.name}\"\n\t\t\t\t\t\t\t\t\t\tdata-width=\"${width}\"\n\t\t\t\t\t\t\t\t\t\tdata-height=\"${height}\" data-js=\"remove | click\">${response.result.title}`;\n\t\t\t\t\t\t\t\t\tif (response.result.deleteFromList) {\n\t\t\t\t\t\t\t\t\t\tdata += `<span class=\"text-danger pl-5 ml-auto\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"fas fa-trash-alt removeWidgetFromList u-hover-opacity\" data-widget-id=\"${response.result.id}\" data-js=\"click\"></span>\n\t\t\t\t\t\t\t\t\t\t</span>`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdata += `</a>`;\n\t\t\t\t\t\t\t\t\tlet divider = $('.js-widget-list .dropdown-divider');\n\t\t\t\t\t\t\t\t\tif (divider.length) {\n\t\t\t\t\t\t\t\t\t\t$(data).insertBefore(divider);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t$('.js-widget-list').append(data);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthisInstance.showAndHideAlert(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error, err) {});\n\t\t\t});\n\t\t},\n\t\tregisterSelectDashboard: function () {\n\t\t\tlet thisInstance = this;\n\t\t\t$('.selectDashboard li').on('click', function (e) {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet dashboardId = currentTarget.data('id');\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tdashboardId: dashboardId\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterDatePickerHideInitiater: function () {\n\t\t\tlet container = this.getContainer();\n\t\t\tcontainer.on('click', 'input.dateRange', function (e) {\n\t\t\t\tlet widgetContainer = $(e.currentTarget).closest('.dashboardWidget');\n\t\t\t\tlet dashboardWidgetHeader = $('.dashboardWidgetHeader', widgetContainer);\n\n\t\t\t\tlet callbackFunction = function () {\n\t\t\t\t\tlet date = $('.dateRange');\n\t\t\t\t\tdate.DatePickerHide();\n\t\t\t\t\tdate.blur();\n\t\t\t\t};\n\t\t\t\t//adding clickoutside event on the dashboardWidgetHeader\n\t\t\t\tVtiger_Helper_Js.addClickOutSideEvent(dashboardWidgetHeader.find('.dateRange'), callbackFunction);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\t\tregisterShowMailBody: function () {\n\t\t\tlet container = this.getContainer();\n\t\t\tcontainer.on('click', '.showMailBody', function (e) {\n\t\t\t\tlet widgetContainer = $(e.currentTarget).closest('.mailRow');\n\t\t\t\tlet mailBody = widgetContainer.find('.mailBody');\n\t\t\t\tlet bodyIcon = $(e.currentTarget).find('.body-icon');\n\t\t\t\tif (mailBody.css('display') == 'none') {\n\t\t\t\t\tmailBody.show();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-down').addClass('fa-chevron-up');\n\t\t\t\t} else {\n\t\t\t\t\tmailBody.hide();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-up').addClass('fa-chevron-down');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterChangeMailUser: function () {\n\t\t\tlet container = this.getContainer();\n\n\t\t\tcontainer.on('change', '#mailUserList', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet parent = element.closest('.dashboardWidget');\n\t\t\t\tlet contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\t\tlet optionSelected = $('option:selected', this);\n\t\t\t\tlet url = parent.data('url') + '&user=' + optionSelected.val();\n\n\t\t\t\tlet params = {};\n\t\t\t\tparams.url = url;\n\t\t\t\tparams.data = {};\n\t\t\t\tcontentContainer.progressIndicator({});\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tparent.html(data).trigger(Vtiger_Widget_Js.widgetPostRefereshEvent);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterMiniListWidget: function () {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading')\n\t\t\t\t.off('click', '.addFilter')\n\t\t\t\t.on('click', '.addFilter', function (e) {\n\t\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=MiniListWizard&step=step1', function (wizardContainer) {\n\t\t\t\t\t\tconst form = $('form', wizardContainer);\n\t\t\t\t\t\tform.on('keypress', function (event) {\n\t\t\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\t\t\tconst filteridSelectDOM = $('select[name=\"filterid\"]', wizardContainer);\n\t\t\t\t\t\tconst fieldHrefDOM = $('select[name=\"field_href\"]', wizardContainer);\n\t\t\t\t\t\tconst fieldsSelectDOM = $('select[name=\"fields\"]', wizardContainer);\n\t\t\t\t\t\tconst filterFieldsSelectDOM = $('select[name=\"filter_fields\"]', wizardContainer);\n\t\t\t\t\t\tconst moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filteridSelect2 = App.Fields.Picklist.showSelect2ElementView(filteridSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tdropdownParent: wizardContainer\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst fieldHrefSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldHrefDOM, {\n\t\t\t\t\t\t\tallowClear: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst fieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tcloseOnSelect: true,\n\t\t\t\t\t\t\tmaximumSelectionLength: 6\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filterFieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(filterFieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst footer = $('.modal-footer', wizardContainer);\n\t\t\t\t\t\tfilteridSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfieldHrefDOM.closest('tr').hide();\n\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\tmoduleNameSelect2.on('change', function () {\n\t\t\t\t\t\t\tif (!moduleNameSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\t\t\tfilteridSelectDOM.empty().html(res).trigger('change');\n\t\t\t\t\t\t\t\tfilteridSelect2.closest('tr').show();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfilteridSelect2.on('change', function () {\n\t\t\t\t\t\t\tif (!filteridSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\tfilterid: filteridSelect2.val()\n\t\t\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\t\t\tconst responseHTML = $(res);\n\t\t\t\t\t\t\t\tconst fieldsHTML = responseHTML.find('select[name=\"fields\"]').html();\n\t\t\t\t\t\t\t\tconst filterFieldsHTML = responseHTML.find('select[name=\"filter_fields\"]').html();\n\t\t\t\t\t\t\t\tfieldsSelectDOM.empty().html(fieldsHTML).trigger('change');\n\t\t\t\t\t\t\t\tfieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfieldsSelect2.data('select2').$selection.find('.select2-search__field').parent().css('width', '100%');\n\t\t\t\t\t\t\t\tfilterFieldsSelectDOM.empty().html(filterFieldsHTML).trigger('change');\n\t\t\t\t\t\t\t\tfilterFieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfilterFieldsSelect2\n\t\t\t\t\t\t\t\t\t.data('select2')\n\t\t\t\t\t\t\t\t\t.$selection.find('.select2-search__field')\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.css('width', '100%');\n\t\t\t\t\t\t\t\tfieldHrefSelect2.closest('tr').show();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfieldsSelect2.on('change', function () {\n\t\t\t\t\t\t\tfieldHrefDOM.find('option:not([value=\"\"]').remove();\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.find('option:checked')\n\t\t\t\t\t\t\t\t.each(function (index, element) {\n\t\t\t\t\t\t\t\t\tlet option = $(element);\n\t\t\t\t\t\t\t\t\tlet newOption = new Option(option.text(), option.val(), true, true);\n\t\t\t\t\t\t\t\t\tfieldHrefSelect2.append(newOption);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfieldHrefSelect2.val('').trigger('change');\n\t\t\t\t\t\t\tif (!fieldsSelect2.val()) {\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tform.on('submit', (e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\t\t\t\t\tlet selectedFields = [];\n\t\t\t\t\t\t\t\tfieldsSelect2.select2('data').map((obj) => {\n\t\t\t\t\t\t\t\t\tselectedFields.push(obj.id);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthisInstance.saveMiniListWidget(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmodule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tfields: selectedFields,\n\t\t\t\t\t\t\t\t\t\tfilterFields: filterFieldsSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tfieldHref: fieldHrefSelect2.val()\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\tmoduleNameSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.val(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tform\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsaveMiniListWidget: function (data, element, moduleNameLabel, filterid, filterLabel, form) {\n\t\t\tconst thisInstance = this,\n\t\t\t\tparamsForm = {\n\t\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\t\tlabel: moduleNameLabel + ' - ' + filterLabel,\n\t\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\t\tname: 'Mini List',\n\t\t\t\t\tfilterid: filterid,\n\t\t\t\t\tisdefault: 0,\n\t\t\t\t\theight: 4,\n\t\t\t\t\twidth: 4,\n\t\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\t\tdefault_owner: 'mine',\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t},\n\t\t\t\tsourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\t\tthisInstance.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid, 'MiniList').done(function (data) {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\tparams['text'] = result['text'];\n\t\t\t\t\tparams['type'] = 'success';\n\t\t\t\t\tlet linkElement = element.clone();\n\t\t\t\t\tlinkElement.data('name', 'MiniList');\n\t\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\t\tthisInstance.addWidget(\n\t\t\t\t\t\tlinkElement,\n\t\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=MiniList&linkid=' +\n\t\t\t\t\t\t\telement.data('linkid') +\n\t\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t\t'&active=0'\n\t\t\t\t\t);\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\terrorField;\n\t\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t}\n\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsaveWidget: function (form, mode, sourceModule, linkid, type) {\n\t\t\tlet aDeferred = $.Deferred();\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (typeof sourceModule === 'undefined') {\n\t\t\t\tsourceModule = app.getModuleName();\n\t\t\t}\n\t\t\tlet params = {\n\t\t\t\tform: form,\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\taction: 'Widget',\n\t\t\t\tmode: mode,\n\t\t\t\taddToUser: true,\n\t\t\t\tlinkid: linkid,\n\t\t\t\tname: type\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterTabModules: function () {\n\t\t\tlet thisInstance = this;\n\t\t\t$('.selectDashboradView li').on('click', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\t$('.selectDashboradView li').removeClass('active');\n\t\t\t\tcurrentTarget.addClass('active');\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: currentTarget.data('module'),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tsourceModule: app.getModuleName(),\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Remove widget from list\n\t\t */\n\t\tremoveWidgetFromList: function () {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading').on('click', '.removeWidgetFromList', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet id = currentTarget.data('widget-id');\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Widget',\n\t\t\t\t\tmode: 'removeWidgetFromList',\n\t\t\t\t\twidgetid: id\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_DELETED'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\tcurrentTarget.closest('.js-widget-list__item').remove();\n\t\t\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates tablet scroll top position\n\t\t */\n\t\tregisterTabletScrollEvent() {\n\t\t\tif (!app.touchDevice || !Quasar.plugins.Platform.is.desktop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet scollbarContainer = $('.js-tablet-scroll');\n\t\t\tscollbarContainer.parent().removeClass('d-none');\n\n\t\t\tlet scollbarContainerH = scollbarContainer.outerHeight(),\n\t\t\t\tscollbarOffsetTop = scollbarContainer.offset().top,\n\t\t\t\tmaxOffset = $('.js-header').outerHeight() + 8;\n\n\t\t\tthis.scrollContainer.on('scroll', () => {\n\t\t\t\tif (this.scrollContainer.scrollTop() + maxOffset >= scollbarOffsetTop) {\n\t\t\t\t\tscollbarContainer.css({ top: maxOffset });\n\t\t\t\t} else {\n\t\t\t\t\tscollbarContainer.css({\n\t\t\t\t\t\ttop: scollbarOffsetTop - this.scrollContainer.scrollTop(),\n\t\t\t\t\t\theight: scollbarContainerH + this.scrollContainer.scrollTop()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates list of predefined widgets after changed dashboard\n\t\t */\n\t\tregisterUpdatePredefinedWidgets: function () {\n\t\t\tlet container = $('.js-predefined-widgets');\n\t\t\tcontainer.off('click', '.js-widget-list__item');\n\t\t\tcontainer.on('click', '.js-widget-list__item', (e) => {\n\t\t\t\tif (!$(e.target).hasClass('removeWidgetFromList')) {\n\t\t\t\t\tthis.addWidget($(e.currentTarget), $(e.currentTarget).data('widgetUrl'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tview: 'BasicAjax',\n\t\t\t\tmode: 'getDashBoardPredefinedWidgets',\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tdashboardId: this.getCurrentDashboard()\n\t\t\t}).done((data) => {\n\t\t\t\tcontainer.html(data);\n\t\t\t});\n\t\t},\n\t\taddWidget(element, url) {\n\t\t\telement = $(element);\n\t\t\tlet linkId = element.data('linkid');\n\t\t\tlet name = element.data('name');\n\t\t\tlet widgetId = element.data('id');\n\t\t\telement.remove();\n\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').addClass('d-none');\n\t\t\t}\n\t\t\tlet widgetContainer = $(\n\t\t\t\t'<div class=\"grid-stack-item js-css-element-queries\" data-js=\"css-element-queries\"><div id=\"' +\n\t\t\t\t\tlinkId +\n\t\t\t\t\t'-' +\n\t\t\t\t\twidgetId +\n\t\t\t\t\t'\" data-name=\"' +\n\t\t\t\t\tname +\n\t\t\t\t\t'\" data-mode=\"open\" class=\"grid-stack-item-content dashboardWidget new\"></div></div>'\n\t\t\t);\n\t\t\twidgetContainer.find('.dashboardWidget').data('url', url);\n\t\t\tlet width = element.data('width');\n\t\t\tlet height = element.data('height');\n\t\t\tVtiger_DashBoard_Js.grid.addWidget(widgetContainer, 0, 0, width, height);\n\t\t\tVtiger_DashBoard_Js.currentInstance.loadWidget(widgetContainer.find('.grid-stack-item-content'));\n\t\t\tthis.showAndHideAlert('addWidget');\n\t\t},\n\n\t\t/**\n\t\t * Show or hide the alert for a dashboard.\n\t\t * @param {string} widgetAction\n\t\t */\n\t\tshowAndHideAlert(widgetAction) {\n\t\t\tlet container = this.getContainer();\n\t\t\tlet alertContainer = container.find('.js-dashboards-alert');\n\t\t\tif (widgetAction === 'addWidget') {\n\t\t\t\talertContainer.addClass('d-none');\n\t\t\t} else if (container.find('.js-css-element-queries').length == 0) {\n\t\t\t\talertContainer.removeClass('d-none');\n\t\t\t}\n\t\t},\n\n\t\tregisterEvents: function () {\n\t\t\tthis.registerGrid();\n\t\t\tthis.registerRefreshWidget();\n\t\t\tthis.removeWidget();\n\t\t\tthis.registerDatePickerHideInitiater();\n\t\t\tthis.registerShowMailBody();\n\t\t\tthis.registerChangeMailUser();\n\t\t\tthis.registerMiniListWidget();\n\t\t\tthis.registerTabModules();\n\t\t\tthis.removeWidgetFromList();\n\t\t\tthis.registerSelectDashboard();\n\t\t\tthis.registerTabletScrollEvent();\n\t\t\tthis.registerUpdatePredefinedWidgets();\n\t\t\tElementQueries.listen();\n\t\t}\n\t}\n);\n"],"names":["$","Class","grid","currentInstance","scrollContainer","restrictContentDrag","container","on","e","element","target","isHeaderElement","closest","length","stopPropagation","noCache","instancesCache","init","Vtiger_DashBoard_Js","getContainer","getCurrentDashboard","dashboardId","data","getWidgetInstance","widgetContainer","id","attr","widgetName","Vtiger_Widget_Js","getInstance","registerGrid","thisInstance","GridStack","verticalMargin","alwaysShowResizeHandle","test","navigator","userAgent","savePositions","loadWidgets","width","parent","parentWidth","css","widgets","widget","widgetRowColPositions","widgetSizes","index","len","find","JSON","stringify","row","col","height","updateLazyWidget","AppConnector","request","module","app","getModuleName","action","position","size","scrollTop","App","Components","Scrollbar","page","Quasar","plugins","Platform","is","desktop","showNewScrollbar","Lazy","threshold","appendScroll","widgetLoader","loadWidget","self","urlParams","mode","moduleName","sourceModule","progressIndicator","name","userId","CONFIG","cacheUrl","cacheGet","done","html","adjustHeightWidget","Fields","Picklist","showSelect2ElementView","Tree","register","trigger","widgetPostLoadEvent","remove","headerHeight","outerHeight","adjustedHeight","widgetContent","wheelPropagation","registerRefreshWidget","currentTarget","widgetInstnace","refreshWidget","removeWidget","listItem","parents","url","widgetTitle","message","vtranslate","Vtiger_Helper_Js","showConfirmationBox","response","success","fadeOut","inArray","prev","removeClass","result","linkid","title","deleteFromList","divider","insertBefore","append","showAndHideAlert","fail","registerSelectDashboard","progressIndicatorElement","blockInfo","enabled","params","view","getViewName","registerEvents","registerDatePickerHideInitiater","dashboardWidgetHeader","addClickOutSideEvent","callbackFunction","date","DatePickerHide","blur","registerShowMailBody","mailBody","bodyIcon","show","addClass","hide","registerChangeMailUser","contentContainer","optionSelected","val","widgetPostRefereshEvent","registerMiniListWidget","off","showModalWindow","wizardContainer","form","event","keyCode","moduleNameSelectDOM","filteridSelectDOM","fieldHrefDOM","fieldsSelectDOM","filterFieldsSelectDOM","moduleNameSelect2","placeholder","filteridSelect2","dropdownParent","fieldHrefSelect2","allowClear","fieldsSelect2","closeOnSelect","maximumSelectionLength","filterFieldsSelect2","footer","step","selectedModule","res","empty","filterid","responseHTML","fieldsHTML","filterFieldsHTML","$selection","each","option","newOption","Option","text","validationEngine","validationEngineOptions","preventDefault","selectedFields","select2","map","obj","push","saveMiniListWidget","fields","filterFields","fieldHref","moduleNameLabel","filterLabel","paramsForm","blockid","label","isdefault","owners_all","default_owner","saveWidget","hideModalWindow","linkElement","clone","addWidget","showMessage","errorField","type","aDeferred","Deferred","addToUser","resolve","error","reject","promise","registerTabModules","removeWidgetFromList","widgetid","registerTabletScrollEvent","touchDevice","scollbarContainer","scollbarContainerH","scollbarOffsetTop","offset","top","maxOffset","registerUpdatePredefinedWidgets","hasClass","linkId","widgetId","widgetAction","alertContainer","ElementQueries","listen"],"mappings":"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"}