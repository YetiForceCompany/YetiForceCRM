'use strict';

/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */$.Class("Base_RecordAddsTemplates_JS",{},{editInstance:!1,/**
		 * Function listener to send a form
		 * @param {jQuery} container
		 */registerSubmitForm:function registerSubmitForm(container){var aDeferred=$.Deferred(),instanse=this;container.on("click",".js-modal__save",function(){var params={action:"RecordAddsTemplates",recordAddsType:container.find(".js-modal-body").find("[name='recordAddsType']").val()},validate=!0;container.find("form.js-record-template").each(function(){var form=$(this);instanse.editInstance.registerValidationsFields(form);var formSerializeData=form.serializeFormData();params[formSerializeData.module]=formSerializeData,form.validationEngine("validate")||(validate=!1);}),validate&&AppConnector.request(params).done(function(data){var response=data.result,preSave=response.preSave;if("undefined"!=typeof preSave&&preSave.length)for(var i=0;i<preSave.length;i++)null!==preSave[i]&&!0!==preSave[i].result&&app.showNotify(preSave[i].message?preSave[i].message:app.vtranslate("JS_ERROR"));else response.success?(app.hideModalWindow(),app.showNotify({text:response.message?response.message:app.vtranslate("JS_SAVE_NOTIFY_OK"),type:"success"}),response.url?window.location.href=response.url:window.location.reload()):app.showNotify({text:response.message?response.message:app.vtranslate("JS_ERROR"),type:"error"});0>=response.length?aDeferred.resolve(!0):aDeferred.resolve(!1);}).fail(function(textStatus,errorThrown){app.showNotify({text:app.vtranslate("JS_ERROR"),type:"error"}),app.errorLog(textStatus,errorThrown),aDeferred.resolve(!1);});});},/**
		 * Register events function
		 * @param {jQuery} modalContainer
		 */registerEvents:function registerEvents(modalContainer){this.editInstance=Vtiger_Edit_Js.getInstance(),this.editInstance.registerBasicEvents(modalContainer),this.registerSubmitForm(modalContainer);}});
//# sourceMappingURL=RecordAddsTemplates.min.js.map
