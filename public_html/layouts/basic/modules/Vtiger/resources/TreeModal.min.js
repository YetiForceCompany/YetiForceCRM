'use strict';

$.Class('Base_TreeModal_JS',{},{selectEvent:!1,container:!1,tree:!1,multiple:!1,setSelectEvent:function setSelectEvent(cb){this.selectEvent=cb;},generateTree:function generateTree(){var plugins=[];this.multiple&&(plugins.push('category'),plugins.push('checkbox')),plugins.push('search'),this.tree.jstree($.extend(!0,{core:{data:JSON.parse(this.container.find('.js-tree-value').val()),themes:{name:'proton',responsive:!0}},checkbox:{three_state:!1},plugins:plugins},this.tree.data('params')));},registerSelectEvent:function registerSelectEvent(){var _this=this;this.multiple?this.container.find('[name="saveButton"]').on('click',function(){var id=[],name=[];$.each(_this.tree.jstree('getCategory',!0),function(index,value){id.push('T'+value.id),name.push(value.text);}),_this.selectEvent({id:id.join(),name:name.join(', ')}),app.hideModalWindow(!1,_this.container.parent().attr('id'));}):this.tree.on('select_node.jstree',function(event,data){_this.selectEvent({id:'T'+data.node.id,name:data.node.text}),app.hideModalWindow(!1,_this.container.parent().attr('id'));});},registerSearchEvent:function registerSearchEvent(){var thisInstance=this,valueSearch=this.container.find('#valueSearchTree');valueSearch.on('keypress',function(e){13==e.which&&thisInstance.searchingInTree(valueSearch.val());}),this.container.find('#btnSearchTree').on('click',function(){thisInstance.searchingInTree(valueSearch.val());});},searchingInTree:function searchingInTree(text){this.tree.jstree(!0).search(text);},registerEvents:function registerEvents(modalContainer){this.container=modalContainer,this.tree=this.container.find('.js-tree-contents'),this.multiple=!(1!=this.container.find('.js-multiple').val()),this.generateTree(),this.registerSearchEvent(),this.registerSelectEvent();}});
//# sourceMappingURL=TreeModal.min.js.map
