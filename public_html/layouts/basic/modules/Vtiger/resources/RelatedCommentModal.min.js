jQuery.Class("Vtiger_RelatedCommentModal_Js", {registerSubmitEvent:function(container){container.find('[name="saveButton"]').on("click", function(e){var progressLoader = jQuery.progressIndicator({position:"html", blockInfo:{enabled:true}}); var comment = container.find(".comment").val(); var params = {module:app.getModuleName(), record:app.getRecordId(), action:"RelatedCommentModal", mode:"update", comment:comment, relid:container.find(".relatedRecord").val(), relmodule:container.find(".relatedModuleName").val()}; AppConnector.request(params).then(function(data){Vtiger_Helper_Js.showMessage({text:data.result}); app.hideModalWindow(); progressLoader.progressIndicator({mode:"hide"}); Vtiger_Detail_Js.getInstance().reloadTabContent()}, function(error){progressLoader.progressIndicator({mode:"hide"})})})}, registerEvents:function(){var container = jQuery("#modalRelatedCommentModal"); this.registerSubmitEvent(container)}}); jQuery(function(){var instance = new Vtiger_RelatedCommentModal_Js(); instance.registerEvents()});
