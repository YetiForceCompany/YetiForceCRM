'use strict';

jQuery.Class('Vtiger_RelatedCommentModal_Js',{windowParent:app.getWindowParent(),registerSubmitEvent:function c(a){var b=this;a.find('[name="saveButton"]').on('click',function(){var c=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}}),d=a.find('.comment').val(),e={module:b.windowParent.app.getModuleName(),record:b.windowParent.app.getRecordId(),action:'RelatedCommentModal',mode:'update',comment:d,relid:a.find('.relatedRecord').val(),relmodule:a.find('.relatedModuleName').val()};AppConnector.request(e).done(function(a){Vtiger_Helper_Js.showMessage({text:a.result}),app.hideModalWindow(),c.progressIndicator({mode:'hide'}),b.windowParent.Vtiger_Detail_Js.getInstance().reloadTabContent();}).fail(function(){c.progressIndicator({mode:'hide'});});});},registerEvents:function b(){var a=jQuery('#modalRelatedCommentModal');this.registerSubmitEvent(a);}}),jQuery(function(){var a=new Vtiger_RelatedCommentModal_Js;a.registerEvents();});
