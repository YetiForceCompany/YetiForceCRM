Vtiger_Popup_Js("PriceBooks_ProductPriceBookPopup_Js",{},{checkBoxChangeHandler:function(e){this._super(e);var elem=jQuery(e.currentTarget);var parentRow=elem.closest("tr");if(elem.is(":checked")){jQuery("input[name=listPrice]",parentRow).removeClass("invisible")}else{jQuery("input[name=listPrice]",parentRow).addClass("invisible")}},registerSelectButton:function(){var popupPageContentsContainer=jQuery("#popupPage");var thisInstance=this;popupPageContentsContainer.on("jqv.form.result",function(e){e.preventDefault();var tableEntriesElement=popupPageContentsContainer.find("table.listViewEntriesTable");var selectedRecords=jQuery("input.entryCheckBox",tableEntriesElement).filter(":checked");if(selectedRecords.length==0){var message=app.vtranslate("JS_PLEASE_SELECT_ONE_RECORD");bootbox.alert(message);return}var invalidFields=popupPageContentsContainer.data("jqv").InvalidFields;if(invalidFields.length==0){var selectedRecordDetails=[];selectedRecords.each(function(index,checkBoxElement){var checkBoxJqueryObject=jQuery(checkBoxElement);var row=checkBoxJqueryObject.closest("tr");var rowListPrice=row.find("input[name=listPrice]");var listPrice=rowListPrice.val();var id=row.data("id");selectedRecordDetails.push({id:id,price:listPrice})});thisInstance.done(selectedRecordDetails,thisInstance.getEventName())}})},selectAllHandler:function(e){this._super(e);var currentElement=jQuery(e.currentTarget);var isMainCheckBoxChecked=currentElement.is(":checked");var tableElement=currentElement.closest("table");if(isMainCheckBoxChecked){jQuery("input.entryCheckBox",tableElement).closest("tr").find('input[name="listPrice"]').removeClass("invisible")}else{jQuery("input.entryCheckBox",tableElement).closest("tr").find('input[name="listPrice"]').addClass("invisible")}},registerEventForActionsButtons:function(){var thisInstance=this;var popupPageContentsContainer=this.getPopupPageContainer();popupPageContentsContainer.on("click",".cancelLink",function(e){thisInstance.done()})},getPageRecords:function(params){var thisInstance=this;var aDeferred=jQuery.Deferred();this._super(params).then(function(data){thisInstance.popupSlimScroll();var form=jQuery("#popupPage");form.validationEngine("detach");form.validationEngine("attach");aDeferred.resolve(data)},function(textStatus,errorThrown){aDeferred.reject(textStatus,errorThrown)});return aDeferred.promise()},sortHandler:function(headerElement){var thisInstance=this;if(headerElement.hasClass("noSorting")){return}this._super(headerElement).then(function(data){thisInstance.popupSlimScroll();var form=jQuery("#popupPage");form.validationEngine("detach");form.validationEngine("attach")},function(textStatus,errorThrown){})},registerEventForListViewEntries:function(){return true},popupSlimScroll:function(){var popupPageContentsContainer=this.getPopupPageContainer();var element=popupPageContentsContainer.find(".popupEntriesDiv");app.showScrollBar(element,{height:"400px"})},registerEvents:function(){this._super();this.registerEventForActionsButtons();this.popupSlimScroll();jQuery("#popupPage").validationEngine({promptPosition:"topRight"})}});