'use strict';

Settings_MappedFields_Edit_Js("Settings_MappedFields_Edit1_Js",{},{init:function a(){this.initialize();},getContainer:function a(){return this.step1Container},setContainer:function b(a){return this.step1Container=a,this},initialize:function b(a){"undefined"==typeof a&&(a=jQuery("#mf_step1")),a.is("#mf_step1")?this.setContainer(a):this.setContainer(jQuery("#mf_step1"));},submit:function f(){var a=jQuery.Deferred(),b=this.getContainer(),c=b.serializeFormData();c.async=!1;var d=b.serializeFormData();if(d.step=1,d.async=!1,this.checkModulesName()){var e=jQuery.progressIndicator({position:"html",blockInfo:{enabled:!0}});app.saveAjax("step1",d).done(function(d){if(!0==d.success){if(!d.result.id&&d.result.message)return Settings_Vtiger_Index_Js.showMessage({text:d.result.message,type:"error"}),a.resolve(!1),e.progressIndicator({mode:"hide"}),!1;Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_MF_SAVED_SUCCESSFULLY")});var f=jQuery("[name=\"record\"]",b);""===f.val()&&(f.val(d.result.id),c.record=d.result.id),c.record=d.result.id,AppConnector.request(c).done(function(c){b.hide(),e.progressIndicator({mode:"hide"}),a.resolve(c);});}});}return a.promise()},registerCancelStepClickEvent:function b(a){jQuery("button.cancelLink",a).on("click",function(){window.history.back();});},checkModulesName:function d(){var a=jQuery("[name=\"tabid\"]").val(),b=jQuery("[name=\"reltabid\"]").val();if(a==b){var c={text:app.vtranslate("JS_YOU_CAN_NOT_SELECT_THE_SAME_MODULES"),type:"error"};return Settings_Vtiger_Index_Js.showMessage(c),!1}return !0},registerEvents:function c(){var a=this.getContainer();a.find("[type=\"submit\"]").removeAttr("disabled");var b=app.validationEngineOptions;b.onValidationComplete=function(a,b){return b},b.promptPosition="bottomRight",a.validationEngine(b),this.registerCancelStepClickEvent(a);}});
