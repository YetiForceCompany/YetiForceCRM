'use strict';

/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */"use strict";Settings_Vtiger_List_Js("Settings_MappedFields_List_Js",{},{getListContainer:function getListContainer(){return jQuery("#listViewContainer")},registerFilterChangeEvent:function registerFilterChangeEvent(){var thisInstance=this;jQuery("#moduleFilter").on("change",function(e){jQuery("#pageNumber").val("1"),jQuery("#pageToJump").val("1"),jQuery("#orderBy").val(""),jQuery("#sortOrder").val("");var params={module:app.getModuleName(),parent:app.getParentModuleName(),sourceModule:jQuery(e.currentTarget).val()};//Make the select all count as empty
//Make total number of pages as empty
jQuery("#recordsCount").val(""),jQuery("#totalPageCount").text(""),thisInstance.getListViewRecords(params).done(function(){thisInstance.updatePagination(),thisInstance.registerBasic();});});},getDefaultParams:function getDefaultParams(){var pageNumber=jQuery("#pageNumber").val(),module=app.getModuleName(),parent=app.getParentModuleName(),params={module:module,parent:parent,page:pageNumber,view:"List",sourceModule:jQuery("#moduleFilter").val()};return params},registerAddNewTemplate:function registerAddNewTemplate(container){jQuery("#addButton",container).on("click",function(){var selectedModule=jQuery("#moduleFilter option:selected").val();window.location.href=jQuery(this).data("url")+(selectedModule?"&source_module="+selectedModule:"");});},registerImportTemplate:function registerImportTemplate(container){var thisInstance=this;jQuery("#importButton",container).on("click",function(e){var currentElement=jQuery(e.currentTarget),url=currentElement.data("url");"undefined"!=typeof url&&app.showModalWindow(null,url,function(data){var form=data.find("form");form.validationEngine(app.validationEngineOptions),form.on("submit",function(e){var form=jQuery(e.currentTarget),invalidFields=form.data("jqv").InvalidFields;if(0<invalidFields.length)return void form.removeData("submit");var progressIndicatorElement=jQuery.progressIndicator({position:"html",blockInfo:{enabled:!0}});thisInstance.importSave(form).done(function(data){app.hideModalWindow(),progressIndicatorElement.progressIndicator({mode:"hide"}),Settings_Vtiger_Index_Js.showMessage({text:data.result.message,type:"info"}),jQuery("#moduleFilter").trigger("change");}).fail(function(){}),e.preventDefault();});}),e.stopPropagation();});},importSave:function importSave(form){var aDeferred=jQuery.Deferred(),formData=new FormData(form[0]);return AppConnector.request({url:"index.php",type:"POST",data:formData,processData:!1,contentType:!1}).done(function(data){aDeferred.resolve(data);}).fail(function(textStatus,errorThrown){aDeferred.reject(textStatus,errorThrown);}),aDeferred.promise()},registerDeleteMap:function registerDeleteMap(){this.getListContainer().on("click",".deleteMap",function(e){e.stopPropagation(),e.preventDefault();var templateId=$(e.currentTarget).closest("tr").data("id");Settings_MappedFields_List_Js.deleteById(templateId);});},registerBasic:function registerBasic(){this.registerDeleteMap();},registerEvents:function registerEvents(){this._super();var container=this.getListContainer();this.registerFilterChangeEvent(),this.registerAddNewTemplate(container),this.registerImportTemplate(container),this.registerBasic();}});
//# sourceMappingURL=List.min.js.map
