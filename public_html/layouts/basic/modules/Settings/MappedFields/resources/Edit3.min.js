'use strict';

Settings_MappedFields_Edit_Js("Settings_MappedFields_Edit3_Js",{},{step3Container:!1,advanceFilterInstance:!1,init:function a(){this.initialize();},getContainer:function a(){return this.step3Container},setContainer:function b(a){return this.step3Container=a,this},initialize:function b(a){"undefined"==typeof a&&(a=jQuery("#mf_step3")),a.is("#mf_step3")?this.setContainer(a):this.setContainer(jQuery("#mf_step3"));},calculateValues:function c(){var a=jQuery("#enableAdvanceFilters");if(0<a.length&&!1==a.is(":checked"))jQuery("#advanced_filter").val(jQuery("#olderConditions").val());else{jQuery("[name=\"filtersavedinnew\"]").val("6");var b=this.advanceFilterInstance.getValues();jQuery("#advanced_filter").val(JSON.stringify(b));}},submit:function f(){var a=jQuery.Deferred();this.calculateValues();var b=this.getContainer(),c=b.serializeFormData(),d=jQuery.progressIndicator({position:"html",blockInfo:{enabled:!0}}),e=b.serializeFormData();return e.step=3,app.saveAjax("step1",e).done(function(e){!0==e.success&&(Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_MF_SAVED_SUCCESSFULLY")}),AppConnector.request(c).done(function(c){b.hide(),d.progressIndicator({mode:"hide"}),a.resolve(c);}).fail(function(a,b){app.errorLog(a,b);}));}),a.promise()},registerCancelStepClickEvent:function b(a){jQuery("button.cancelLink",a).on("click",function(){window.history.back();});},registerEvents:function c(){var a=this.getContainer(),b=app.validationEngineOptions;b.onValidationComplete=function(a,b){return b},b.promptPosition="bottomRight",a.validationEngine(b),this.registerCancelStepClickEvent(a),this.advanceFilterInstance=Vtiger_AdvanceFilter_Js.getInstance(jQuery("#advanceFilterContainer",a)),App.Fields.Picklist.changeSelectElementView(a);}});
