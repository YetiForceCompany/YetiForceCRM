{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Index_Js(\"Settings_Log_Index_Js\", {}, {\n\n\t/**\n\t * Get data from server\n\t *\n\t * @param {function} callback\n\t */\n\tgetData(callback) {\n\t\tconst progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request({\n\t\t\turl: 'index.php',\n\t\t\ttype: 'POST',\n\t\t\tdata: {\n\t\t\t\tmodule: 'Log',\n\t\t\t\tparent: 'Settings',\n\t\t\t\taction: 'Data',\n\t\t\t\ttype: this.container.find('.nav .active').data('type'),\n\t\t\t\trange: this.container.find('.js-date-range-filter').val()\n\t\t\t}\n\t\t}).done((response) => {\n\t\t\tconst columns = [], data = [];\n\t\t\tfor (let key in response.columns) {\n\t\t\t\tconst render = (key === 'url' || key === 'request') ? (data) => data : $.fn.dataTable.render.text();\n\t\t\t\tcolumns.push({\n\t\t\t\t\ttitle: response.columns[key],\n\t\t\t\t\tname: key,\n\t\t\t\t\tdata: key,\n\t\t\t\t\trender\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (let key in response.data) {\n\t\t\t\tlet row = response.data[key];\n\t\t\t\tif (typeof row.url !== 'undefined') {\n\t\t\t\t\tconst original = row.url;\n\t\t\t\t\tif (row.url.indexOf('?') === -1) {\n\t\t\t\t\t\trow.url = 'index.php?' + row.url;\n\t\t\t\t\t}\n\t\t\t\t\trow.url = `<a href=\"${row.url}\" title=\"${response.columns['url']}\" data-content=\"${original}\" class=\"js-popover-tooltip\">${original.length > 50 ? original.substr(0, 50) + '...' : original}</a>`;\n\t\t\t\t}\n\t\t\t\tdata.push(row);\n\t\t\t}\n\t\t\tcallback(data, columns);\n\t\t\tprogressIndicatorElement.progressIndicator({mode: 'hide'});\n\t\t});\n\t},\n\n\t/**\n\t * Initialize data table component\n\t *\n\t * @param {array} data\n\t * @param {array} columns\n\t * @returns {jQuery}\n\t */\n\tinitDataTable(data, columns) {\n\t\treturn this.container.find('.js-data-table').dataTable({\n\t\t\tsearching: false,\n\t\t\tprocessing: false,\n\t\t\tscrollX: true,\n\t\t\tbAutoWidth: false,\n\t\t\tdata,\n\t\t\tcolumns,\n\t\t\tlanguage: {\n\t\t\t\tsLengthMenu: app.vtranslate('JS_S_LENGTH_MENU'),\n\t\t\t\tsZeroRecords: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\tsInfo: app.vtranslate('JS_S_INFO'),\n\t\t\t\tsInfoEmpty: app.vtranslate('JS_S_INFO_EMPTY'),\n\t\t\t\tsSearch: app.vtranslate('JS_SEARCH'),\n\t\t\t\tsEmptyTable: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\tsInfoFiltered: app.vtranslate('JS_S_INFO_FILTERED'),\n\t\t\t\tsLoadingRecords: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\tsProcessing: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\toPaginate: {\n\t\t\t\t\tsFirst: app.vtranslate('JS_S_FIRST'),\n\t\t\t\t\tsPrevious: app.vtranslate('JS_S_PREVIOUS'),\n\t\t\t\t\tsNext: app.vtranslate('JS_S_NEXT'),\n\t\t\t\t\tsLast: app.vtranslate('JS_S_LAST')\n\t\t\t\t},\n\t\t\t\toAria: {\n\t\t\t\t\tsSortAscending: app.vtranslate('JS_S_SORT_ASCENDING'),\n\t\t\t\t\tsSortDescending: app.vtranslate('JS_S_SORT_DESCENDING')\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Register data table component\n\t */\n\tregisterDataTable() {\n\t\tApp.Fields.Date.registerRange(this.container.find('.js-log-range'));\n\t\tlet table, tableApi;\n\t\tthis.getData((data, columns) => {\n\t\t\ttable = this.initDataTable(data, columns);\n\t\t\ttableApi = table.api();\n\t\t});\n\t\tthis.container.find('.js-date-range-btn').click((e) => {\n\t\t\tthis.getData((data, columns) => {\n\t\t\t\ttableApi.data().clear();\n\t\t\t\ttableApi.rows.add(data);\n\t\t\t\ttableApi.draw();\n\t\t\t});\n\t\t})\n\t},\n\n\t/**\n\t * Register events\n\t */\n\tregisterEvents() {\n\t\tthis._super();\n\t\tthis.container = $('.js-log');\n\t\tthis.registerDataTable();\n\t}\n});\n"],"names":["Settings_Vtiger_Index_Js","getData","callback","jQuery","progressIndicator","AppConnector","request","url","type","data","module","parent","action","container","find","range","val","done","response","columns","$","fn","dataTable","render","text","push","title","key","name","row","indexOf","original","length","substr","progressIndicatorElement","mode","initDataTable","searching","processing","scrollX","bAutoWidth","language","sLengthMenu","app","vtranslate","sZeroRecords","sInfo","sInfoEmpty","sSearch","sEmptyTable","sInfoFiltered","sLoadingRecords","sProcessing","oPaginate","sFirst","sPrevious","sNext","sLast","oAria","sSortAscending","sSortDescending","registerDataTable","App","Fields","Date","registerRange","tableApi","table","api","click","clear","rows","add","draw","registerEvents","_super"],"mappings":";;AAGAA,yBAAyB,uBAAzB,CAAkD,EAAlD,CAAsD,CAOrDC,OAPqD,kBAO7CC,QAP6C,CAOnC,CACjB,6BAAiCC,OAAOC,iBAAP,CAAyB,CACzD,SAAY,MAD6C,CAEzD,UAAa,CACZ,UADY,CAF4C,CAAzB,CAAjC,CAMAC,aAAaC,OAAb,CAAqB,CACpBC,IAAK,WADe,CAEpBC,KAAM,MAFc,CAGpBC,KAAM,CACLC,OAAQ,KADH,CAELC,OAAQ,UAFH,CAGLC,OAAQ,MAHH,CAILJ,KAAM,KAAKK,SAAL,CAAeC,IAAf,CAAoB,cAApB,EAAoCL,IAApC,CAAyC,MAAzC,CAJD,CAKLM,MAAO,KAAKF,SAAL,CAAeC,IAAf,CAAoB,uBAApB,EAA6CE,GAA7C,EALF,CAHc,CAArB,EAUGC,IAVH,CAUQ,SAACC,QAAD,CAAc,CACrB,YAAgB,EAAhB,CAAoBT,KAAO,EAA3B,CACA,IAAK,OAAL,aAAyBU,OAAzB,CAAkC,CACjC,WAAwB,KAAR,OAAyB,SAAR,KAAlB,CAAuC,SAACV,IAAD,aAAA,CAAvC,CAAwDW,EAAEC,EAAF,CAAKC,SAAL,CAAeC,MAAf,CAAsBC,IAAtB,EAAvE,CACAL,QAAQM,IAAR,CAAa,CACZC,MAAOR,SAASC,OAAT,CAAiBQ,GAAjB,CADK,CAEZC,KAAMD,GAFM,CAGZlB,KAAMkB,GAHM,CAIZJ,aAJY,CAAb,EAMA,CACD,IAAK,QAAL,aAAyBd,IAAzB,CAA+B,CAC9B,QAAUS,SAAST,IAAT,CAAckB,IAAd,CAAV,CACA,GAAuB,WAAnB,aAAWpB,GAAf,CAAoC,CACnC,aAAiBsB,IAAItB,GAArB,CAC6B,CAAC,CAA1B,OAAIA,GAAJ,CAAQuB,OAAR,CAAgB,GAAhB,CAF+B,GAGlCD,IAAItB,GAAJ,CAAU,aAAesB,IAAItB,GAHK,EAKnCsB,IAAItB,GAAJ,aAAsBsB,IAAItB,GAA1B,aAAyCW,SAASC,OAAT,IAAzC,oBAAmFY,QAAnF,kCAA6I,EAAlB,UAASC,MAAT,CAAuBD,SAASE,MAAT,CAAgB,CAAhB,CAAmB,EAAnB,EAAyB,KAAhD,CAAwDF,QAAnL,SACA,CACDtB,KAAKgB,IAAL,CAAUI,GAAV,EACA,CACD3B,SAASO,IAAT,CAAeU,OAAf,CAtBqB,CAuBrBe,yBAAyB9B,iBAAzB,CAA2C,CAAC+B,KAAM,MAAP,CAA3C,EACA,CAlCD,EAmCA,CAjDoD,CA0DrDC,aA1DqD,wBA0DvC3B,IA1DuC,CA0DjCU,OA1DiC,CA0DxB,CAC5B,YAAYN,SAAL,CAAeC,IAAf,CAAoB,gBAApB,EAAsCQ,SAAtC,CAAgD,CACtDe,YADsD,CAEtDC,aAFsD,CAGtDC,UAHsD,CAItDC,aAJsD,CAKtD/B,SALsD,CAMtDU,eANsD,CAOtDsB,SAAU,CACTC,YAAaC,IAAIC,UAAJ,CAAe,kBAAf,CADJ,CAETC,aAAcF,IAAIC,UAAJ,CAAe,qBAAf,CAFL,CAGTE,MAAOH,IAAIC,UAAJ,CAAe,WAAf,CAHE,CAITG,WAAYJ,IAAIC,UAAJ,CAAe,iBAAf,CAJH,CAKTI,QAASL,IAAIC,UAAJ,CAAe,WAAf,CALA,CAMTK,YAAaN,IAAIC,UAAJ,CAAe,qBAAf,CANJ,CAOTM,cAAeP,IAAIC,UAAJ,CAAe,oBAAf,CAPN,CAQTO,gBAAiBR,IAAIC,UAAJ,CAAe,uBAAf,CARR,CASTQ,YAAaT,IAAIC,UAAJ,CAAe,uBAAf,CATJ,CAUTS,UAAW,CACVC,OAAQX,IAAIC,UAAJ,CAAe,YAAf,CADE,CAEVW,UAAWZ,IAAIC,UAAJ,CAAe,eAAf,CAFD,CAGVY,MAAOb,IAAIC,UAAJ,CAAe,WAAf,CAHG,CAIVa,MAAOd,IAAIC,UAAJ,CAAe,WAAf,CAJG,CAVF,CAgBTc,MAAO,CACNC,eAAgBhB,IAAIC,UAAJ,CAAe,qBAAf,CADV,CAENgB,gBAAiBjB,IAAIC,UAAJ,CAAe,sBAAf,CAFX,CAhBE,CAP4C,CAAhD,CA6BP,CAxFoD,CA6FrDiB,iBA7FqD,6BA6FjC,gBACnBC,IAAIC,MAAJ,CAAWC,IAAX,CAAgBC,aAAhB,CAA8B,KAAKpD,SAAL,CAAeC,IAAf,CAAoB,eAApB,CAA9B,CADmB,CAEnB,SAAA,CAAWoD,QAAX,CACA,KAAKjE,OAAL,CAAa,SAACQ,IAAD,CAAOU,OAAP,CAAmB,CAC/BgD,MAAQ,MAAK/B,aAAL,CAAmB3B,IAAnB,CAAyBU,OAAzB,CADuB,CAE/B+C,SAAWC,MAAMC,GAAN,GACX,CAHD,CAHmB,CAOnB,KAAKvD,SAAL,CAAeC,IAAf,CAAoB,oBAApB,EAA0CuD,KAA1C,CAAgD,UAAO,CACtD,MAAKpE,OAAL,CAAa,SAACQ,IAAD,CAAmB,CAC/ByD,SAASzD,IAAT,GAAgB6D,KAAhB,EAD+B,CAE/BJ,SAASK,IAAT,CAAcC,GAAd,CAAkB/D,IAAlB,CAF+B,CAG/ByD,SAASO,IAAT,GACA,CAJD,EAKA,CAND,EAOA,CA3GoD,CAgHrDC,cAhHqD,0BAgHpC,CAChB,KAAKC,MAAL,EADgB,CAEhB,KAAK9D,SAAL,CAAiBO,EAAE,SAAF,CAFD,CAGhB,KAAKyC,iBAAL,GACA,CApHoD,CAAtD"}