{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_MailRbl_Index_Js',\n\t{},\n\t{\n\t\tdataTable: false,\n\t\tdataTableMap: {\n\t\t\tforVerification: {\n\t\t\t\torder: [[0, 'desc']],\n\t\t\t\tcolumns: [\n\t\t\t\t\t{ data: 'datetime' },\n\t\t\t\t\t{ orderable: false, data: 'sender' },\n\t\t\t\t\t{ orderable: false, data: 'recipient' },\n\t\t\t\t\t{ orderable: false, data: 'ip' },\n\t\t\t\t\t{ data: 'type' },\n\t\t\t\t\t{ data: 'user' },\n\t\t\t\t\t{\n\t\t\t\t\t\torderable: false,\n\t\t\t\t\t\tdata: function (row) {\n\t\t\t\t\t\t\tlet action = '';\n\t\t\t\t\t\t\taction += '<div class=\"o-tab__container--action\">';\n\t\t\t\t\t\t\tif (row['statusId'] !== 1) {\n\t\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-success btn-xs js-update\" data-id=\"${\n\t\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t\t}\" data-status=\"1\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t\t'BTN_STATUS_ACTION_ACCEPT'\n\t\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-check\"></span></button>`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (row['statusId'] !== 2) {\n\t\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-warning btn-xs ml-2 js-update\" data-id=\"${\n\t\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t\t}\" data-status=\"2\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t\t'BTN_STATUS_ACTION_REJECT'\n\t\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-times\"></span></button>`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-secondary btn-xs ml-2 js-details\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t'BTN_SHOW_DETAILS'\n\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-search-plus\"></span></button>`;\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-danger btn-xs ml-2 js-trash\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate('BTN_DELETE')}\" data-js=\"click\"><span class=\"fas fa-trash\"></span></button>`;\n\t\t\t\t\t\t\taction += '</dv>';\n\t\t\t\t\t\t\treturn action;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefaultContent: ''\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\ttoSend: {\n\t\t\t\torder: [[0, 'desc']],\n\t\t\t\tcolumns: [\n\t\t\t\t\t{ data: 'datetime' },\n\t\t\t\t\t{ orderable: false, data: 'sender' },\n\t\t\t\t\t{ orderable: false, data: 'recipient' },\n\t\t\t\t\t{ orderable: false, data: 'ip' },\n\t\t\t\t\t{ data: 'type' },\n\t\t\t\t\t{ data: 'user' },\n\t\t\t\t\t{\n\t\t\t\t\t\torderable: false,\n\t\t\t\t\t\tdata: function (row) {\n\t\t\t\t\t\t\tlet action = '';\n\t\t\t\t\t\t\taction += '<div class=\"o-tab__container--action\">';\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-primary btn-xs js-send-request-id\" data-type=\"quick\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t'BTN_STATUS_ACTION_QUICK_SEND_REQUEST'\n\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-fighter-jet\"></span></button>`;\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-info btn-xs ml-2 js-send-request-id\" data-type=\"manual\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t'BTN_STATUS_ACTION_SEND_REQUEST'\n\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-paper-plane\"></span></button>`;\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-secondary btn-xs ml-2 js-details\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t'BTN_SHOW_DETAILS'\n\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-search-plus\"></span></button>`;\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-danger btn-xs ml-2 js-trash\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate('BTN_DELETE')}\" data-js=\"click\"><span class=\"fas fa-trash\"></span></button>`;\n\t\t\t\t\t\t\taction += '</dv>';\n\t\t\t\t\t\t\treturn action;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefaultContent: ''\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\trequest: {\n\t\t\t\torder: [[0, 'desc']],\n\t\t\t\tcolumns: [\n\t\t\t\t\t{ data: 'datetime' },\n\t\t\t\t\t{ orderable: false, data: 'sender' },\n\t\t\t\t\t{ orderable: false, data: 'recipient' },\n\t\t\t\t\t{ orderable: false, data: 'ip' },\n\t\t\t\t\t{ data: 'type' },\n\t\t\t\t\t{ data: 'status' },\n\t\t\t\t\t{ data: 'user' },\n\t\t\t\t\t{\n\t\t\t\t\t\torderable: false,\n\t\t\t\t\t\tdata: function (row) {\n\t\t\t\t\t\t\tlet action = '';\n\t\t\t\t\t\t\taction += '<div class=\"o-tab__container--action\">';\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-secondary btn-xs js-details\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t'BTN_SHOW_DETAILS'\n\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-search-plus\"></span></button>`;\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-primary btn-xs ml-2 js-send-request-id\" data-type=\"quick\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t'BTN_STATUS_ACTION_QUICK_SEND_REQUEST'\n\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-fighter-jet\"></span></button>`;\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-info btn-xs ml-2 js-send-request-id\" data-type=\"manual\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t'BTN_STATUS_ACTION_SEND_REQUEST'\n\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-paper-plane\"></span></button>`;\n\t\t\t\t\t\t\tif (row['statusId'] !== 1) {\n\t\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-success btn-xs ml-2 js-update\" data-id=\"${\n\t\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t\t}\" data-status=\"1\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t\t'BTN_STATUS_ACTION_ACCEPT'\n\t\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-check\"></span></button>`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (row['statusId'] !== 2) {\n\t\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-warning btn-xs ml-2 js-update\" data-id=\"${\n\t\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t\t}\" data-status=\"2\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t\t'BTN_STATUS_ACTION_REJECT'\n\t\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-times\"></span></button>`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-danger btn-xs ml-2 js-trash\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate('BTN_DELETE')}\" data-js=\"click\"><span class=\"fas fa-trash\"></span></button>`;\n\t\t\t\t\t\t\taction += '</dv>';\n\t\t\t\t\t\t\treturn action;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefaultContent: ''\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tblackList: {\n\t\t\t\tcolumns: [\n\t\t\t\t\t{ data: 'ip' },\n\t\t\t\t\t{ data: 'status' },\n\t\t\t\t\t{\n\t\t\t\t\t\torderable: false,\n\t\t\t\t\t\tdata: function (row) {\n\t\t\t\t\t\t\tlet action = '';\n\t\t\t\t\t\t\tif (row['request'] != 0) {\n\t\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-secondary btn-sm js-details\" data-id=\"${\n\t\t\t\t\t\t\t\t\trow['request']\n\t\t\t\t\t\t\t\t}\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t\t'BTN_SHOW_DETAILS'\n\t\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-search-plus\"></span></button>`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn action;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefaultContent: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\torderable: false,\n\t\t\t\t\t\tdata: function (row) {\n\t\t\t\t\t\t\tlet action = '';\n\t\t\t\t\t\t\tif (row['statusId'] !== 0) {\n\t\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-success btn-sm js-update\" data-id=\"${\n\t\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t\t}\" data-status=\"0\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t\t'BTN_STATUS_ACTION_ACCEPT'\n\t\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-check\"></span></button>`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (row['statusId'] !== 1) {\n\t\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-warning btn-sm ml-2 js-update\" data-id=\"${\n\t\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t\t}\" data-status=\"1\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t\t'BTN_UNLOCK_STATUS_ACTION_REJECT'\n\t\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-times\"></span></button>`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-danger btn-sm ml-2 js-trash\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate('BTN_DELETE')}\" data-js=\"click\"><span class=\"fas fa-trash\"></span></button>`;\n\t\t\t\t\t\t\treturn action;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefaultContent: ''\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\twhiteList: {\n\t\t\t\tcolumns: [\n\t\t\t\t\t{ data: 'ip' },\n\t\t\t\t\t{ data: 'status' },\n\t\t\t\t\t{\n\t\t\t\t\t\torderable: false,\n\t\t\t\t\t\tdata: function (row) {\n\t\t\t\t\t\t\tlet action = '';\n\t\t\t\t\t\t\tif (row['request'] != 0) {\n\t\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-secondary btn-sm js-details\" data-id=\"${\n\t\t\t\t\t\t\t\t\trow['request']\n\t\t\t\t\t\t\t\t}\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t\t'BTN_SHOW_DETAILS'\n\t\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-search-plus\"></span></button>`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn action;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefaultContent: ''\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\torderable: false,\n\t\t\t\t\t\tdata: function (row) {\n\t\t\t\t\t\t\tlet action = '';\n\t\t\t\t\t\t\tif (row['statusId'] !== 0) {\n\t\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-success btn-sm js-update\" data-id=\"${\n\t\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t\t}\" data-status=\"0\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t\t'BTN_STATUS_ACTION_ACCEPT'\n\t\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-check\"></span></button>`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (row['statusId'] !== 1) {\n\t\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-warning btn-sm ml-2 js-update\" data-id=\"${\n\t\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t\t}\" data-status=\"1\" title=\"${app.vtranslate(\n\t\t\t\t\t\t\t\t\t'BTN_UNLOCK_STATUS_ACTION_REJECT'\n\t\t\t\t\t\t\t\t)}\" data-js=\"click\"><span class=\"fas fa-times\"></span></button>`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taction += `<button type=\"button\" class=\"btn btn-danger btn-sm ml-2 js-trash\" data-id=\"${\n\t\t\t\t\t\t\t\trow['id']\n\t\t\t\t\t\t\t}\" title=\"${app.vtranslate('BTN_DELETE')}\" data-js=\"click\"><span class=\"fas fa-trash\"></span></button>`;\n\t\t\t\t\t\t\treturn action;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefaultContent: ''\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tpublicRbl: {\n\t\t\t\tcolumns: [\n\t\t\t\t\t{ data: 'ip' },\n\t\t\t\t\t{ data: 'type' },\n\t\t\t\t\t{ data: 'status' },\n\t\t\t\t\t{\n\t\t\t\t\t\torderable: false,\n\t\t\t\t\t\tdefaultContent: ''\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register DataTable\n\t\t */\n\t\tregisterDataTable: function (container) {\n\t\t\tconst self = this;\n\t\t\tlet form = container.find('.js-filter-form');\n\t\t\tApp.Fields.Date.registerRange(form);\n\t\t\tlet table = container.find('.js-data-table');\n\t\t\tlet mode = container.attr('id');\n\t\t\tif (table.hasClass('dataTable')) {\n\t\t\t\ttable.DataTable().clear().destroy();\n\t\t\t}\n\t\t\tself.dataTable = app.registerDataTables(\n\t\t\t\ttable,\n\t\t\t\tObject.assign(\n\t\t\t\t\t{\n\t\t\t\t\t\tprocessing: true,\n\t\t\t\t\t\tserverSide: true,\n\t\t\t\t\t\tpaging: true,\n\t\t\t\t\t\tsearching: false,\n\t\t\t\t\t\tlengthChange: false,\n\t\t\t\t\t\tpageLength: 20,\n\t\t\t\t\t\tajax: {\n\t\t\t\t\t\t\turl: 'index.php?parent=Settings&module=MailRbl&action=GetData&mode=' + mode,\n\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\tdata: function (data) {\n\t\t\t\t\t\t\t\tdata = $.extend(data, form.serializeFormData());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: []\n\t\t\t\t\t},\n\t\t\t\t\tself.dataTableMap[mode]\n\t\t\t\t)\n\t\t\t);\n\t\t\tcontainer.find('input,select').on('change', function () {\n\t\t\t\tself.dataTable.ajax.reload();\n\t\t\t});\n\t\t\treturn table;\n\t\t},\n\t\t/**\n\t\t * Register tab events\n\t\t * @param {jQuery} contentContainer\n\t\t */\n\t\tregisterTabEvents: function (contentContainer = $('.js-tab.active')) {\n\t\t\tconst self = this;\n\t\t\tlet mode = contentContainer.attr('id');\n\t\t\tlet table = this.registerDataTable(contentContainer);\n\t\t\ttable.off('click', '.js-details').on('click', '.js-details', function () {\n\t\t\t\tlet progressIndicatorElement = jQuery.progressIndicator();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=AppComponents&view=MailMessageAnalysisModal&record=' + this.dataset.id,\n\t\t\t\t\tfunction (container) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tcontainer.find('iframe').each(function () {\n\t\t\t\t\t\t\tlet iframe = $(this);\n\t\t\t\t\t\t\tiframe.on('load', (e) => {\n\t\t\t\t\t\t\t\tlet content = iframe.contents();\n\t\t\t\t\t\t\t\tiframe.height(300);\n\t\t\t\t\t\t\t\tcontent.find('head').append('<style>body{margin: 0;}p{margin: 0.5em 0;}</style>');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t\ttable.off('click', '.js-trash').on('click', '.js-trash', function () {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tmode: mode,\n\t\t\t\t\taction: 'DeleteAjax',\n\t\t\t\t\trecord: this.dataset.id\n\t\t\t\t}).done(function () {\n\t\t\t\t\tself.dataTable.ajax.reload();\n\t\t\t\t\tself.refreshCounters();\n\t\t\t\t});\n\t\t\t});\n\t\t\ttable.off('click', '.js-update').on('click', '.js-update', function () {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'update',\n\t\t\t\t\ttype: mode,\n\t\t\t\t\trecord: this.dataset.id,\n\t\t\t\t\tstatus: this.dataset.status\n\t\t\t\t}).done(function (response) {\n\t\t\t\t\tself.dataTable.ajax.reload();\n\t\t\t\t\tself.refreshCounters();\n\t\t\t\t\tapp.showNotify(\n\t\t\t\t\t\t$.extend(response.result.notify, {\n\t\t\t\t\t\t\tstack: new PNotify.Stack({\n\t\t\t\t\t\t\t\tfirstpos1: 25,\n\t\t\t\t\t\t\t\tspacing1: 5,\n\t\t\t\t\t\t\t\tspacing2: 5,\n\t\t\t\t\t\t\t\tmaxOpen: 10,\n\t\t\t\t\t\t\t\tmodal: false\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\t\t\ttable.off('click', '.js-send-request-id').on('click', '.js-send-request-id', function () {\n\t\t\t\tif (this.dataset.type === 'manual') {\n\t\t\t\t\tself.sendRequest(this.dataset.id);\n\t\t\t\t} else {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\taction: 'SendReport',\n\t\t\t\t\t\tid: this.dataset.id\n\t\t\t\t\t}).done(function (response) {\n\t\t\t\t\t\tself.dataTable.ajax.reload();\n\t\t\t\t\t\tself.refreshCounters();\n\t\t\t\t\t\tapp.showNotify(\n\t\t\t\t\t\t\t$.extend(response.result.notify, {\n\t\t\t\t\t\t\t\tstack: new PNotify.Stack({\n\t\t\t\t\t\t\t\t\tfirstpos1: 25,\n\t\t\t\t\t\t\t\t\tspacing1: 5,\n\t\t\t\t\t\t\t\t\tspacing2: 5,\n\t\t\t\t\t\t\t\t\tmaxOpen: 10,\n\t\t\t\t\t\t\t\t\tmodal: false\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsendRequest: function (id) {\n\t\t\tconst self = this;\n\t\t\tapp.showModalWindow(\n\t\t\t\tnull,\n\t\t\t\t'index.php?parent=Settings&module=MailRbl&view=ReportModal&id=' + id,\n\t\t\t\tfunction (container) {\n\t\t\t\t\tlet form = container.find('form');\n\t\t\t\t\tcontainer.find('.js-modal__save').on('click', function () {\n\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\tself.dataTable.ajax.reload();\n\t\t\t\t\t\tself.refreshCounters();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Refresh the counters\n\t\t */\n\t\trefreshCounters: function () {\n\t\t\tlet tabs = $('#tabs li a');\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'GetData',\n\t\t\t\tmode: 'counters'\n\t\t\t}).done(function (response) {\n\t\t\t\ttabs.each(function (index) {\n\t\t\t\t\tif (response.result[this.dataset.name] !== undefined) {\n\t\t\t\t\t\t$(this).find('.js-badge').text(response.result[this.dataset.name]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterSwitchEvents: function () {\n\t\t\t$('.js-base-container .js-switch').on('change', function () {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'config',\n\t\t\t\t\tname: this.name,\n\t\t\t\t\tvalue: this.value\n\t\t\t\t}).done(function (response) {\n\t\t\t\t\tapp.showNotify(\n\t\t\t\t\t\t$.extend(response.result.notify, {\n\t\t\t\t\t\t\tstack: new PNotify.Stack({\n\t\t\t\t\t\t\t\tfirstpos1: 25,\n\t\t\t\t\t\t\t\tspacing1: 5,\n\t\t\t\t\t\t\t\tspacing2: 5,\n\t\t\t\t\t\t\t\tmaxOpen: 10,\n\t\t\t\t\t\t\t\tmodal: false\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.registerTabEvents();\n\t\t\tthis.registerSwitchEvents();\n\t\t\tthis.refreshCounters();\n\t\t\t$('#tabs a[data-toggle=\"tab\"]').on('shown.bs.tab', (_) => {\n\t\t\t\tthis.registerTabEvents();\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","dataTable","dataTableMap","forVerification","order","columns","data","orderable","row","action","app","vtranslate","defaultContent","toSend","request","blackList","whiteList","publicRbl","registerDataTable","container","form","find","App","Fields","Date","registerRange","mode","attr","hasClass","table","DataTable","clear","destroy","self","registerDataTables","Object","assign","processing","serverSide","paging","searching","lengthChange","pageLength","ajax","url","type","$","extend","serializeFormData","on","reload","registerTabEvents","contentContainer","off","progressIndicator","showModalWindow","dataset","id","progressIndicatorElement","each","iframe","contents","height","content","append","AppConnector","module","getModuleName","parent","getParentModuleName","record","done","refreshCounters","status","response","showNotify","result","notify","stack","Stack","firstpos1","spacing1","spacing2","maxOpen","modal","sendRequest","submit","tabs","name","text","registerSwitchEvents","value","registerEvents"],"mappings":"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"}