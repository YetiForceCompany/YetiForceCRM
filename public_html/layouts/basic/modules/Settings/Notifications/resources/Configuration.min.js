'use strict';

/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */"use strict";jQuery.Class("Settings_Notifications_Configuration_Js",{},{container:!1,/**
		 * Function to register the change event for layout editor modules list
		 */registerModulesChangeEvent:function registerModulesChangeEvent(container){var thisInstance=this;container.find("#supportedModule").on("change",function(e){var progress=thisInstance.progress(),params={};params.module=app.getModuleName(),params.parent=app.getParentModuleName(),params.view=app.getViewName(),params.srcModule=jQuery(e.currentTarget).val(),AppConnector.requestPjax(params).done(function(data){progress.progressIndicator({mode:"hide"}),container.html(data),App.Fields.Picklist.changeSelectElementView(container),thisInstance.registerEvents();}).fail(function(textStatus,errorThrown){progress.progressIndicator({mode:"hide"}),app.errorLog(textStatus,errorThrown);});});},progress:function progress(){return jQuery.progressIndicator({position:"html",blockInfo:{enabled:!0}})},registerButtonEvents:function registerButtonEvents(container){var thisInstance=this;container.find(".wrapperTrash, .wrapperLock").on("click",".fas",function(e){var progress=thisInstance.progress(),element=jQuery(e.currentTarget),mode=element.data("mode"),dataElement=element.closest("tr"),params={members:dataElement.data("value"),srcModule:container.find("#supportedModule").val()};"lock"===mode&&(params.lock=0===dataElement.data("lock")?1:0),app.saveAjax(mode,null,params).done(function(){progress.progressIndicator({mode:"hide"}),thisInstance.refreshView();});}),container.find(".addUser, .wrapperExceptions").on("click",function(e){e.stopPropagation(),e.preventDefault();var reload=!0,element=jQuery(e.currentTarget),url="index.php?module="+app.getModuleName()+"&parent="+app.getParentModuleName()+"&srcModule="+container.find("#supportedModule").val()+"&view=Members";element.hasClass("wrapperExceptions")&&(url+="&mode="+element.data("mode")+"&member="+element.closest("tr").data("value"),reload=!1),app.showModalWindow(null,url,function(data){var form=data.find("form");form.on("submit",function(e){e.preventDefault();var progress=thisInstance.progress(),params=form.serializeFormData();app.saveAjax(params.mode,null,params).done(function(){progress.progressIndicator({mode:"hide"}),app.hideModalWindow(),reload&&thisInstance.refreshView();});});});});},refreshView:function refreshView(){this.getContainer().find("#supportedModule").trigger("change");},getContainer:function getContainer(){return !1===this.container&&(this.container=jQuery("div.contentsDiv")),this.container},registerEvents:function registerEvents(){var container=this.getContainer();this.registerModulesChangeEvent(container),app.registerDataTables(container.find(".dataTable")),this.registerButtonEvents(container);}});
//# sourceMappingURL=Configuration.min.js.map
