
jQuery.Class("Settings_Notifications_Configuration_Js", {}, {container:false, registerModulesChangeEvent:function(a){var b = this; a.find("#supportedModule").on("change", function(d){var c = b.progress(); var f = {}; f.module = app.getModuleName(); f.parent = app.getParentModuleName(); f.view = app.getViewName(); f.srcModule = jQuery(d.currentTarget).val(); AppConnector.requestPjax(f).then(function(e){c.progressIndicator({mode:"hide"}); a.html(e); app.changeSelectElementView(a); b.registerEvents()}, function(g, e){c.progressIndicator({mode:"hide"}); app.errorLog(g, e)})})}, progress:function(){return jQuery.progressIndicator({position:"html", blockInfo:{enabled:true}})}, registerButtonEvents:function(a){var b = this; a.find(".wrapperTrash, .wrapperLock").on("click", "[data-fa-i2svg]", function(g){var d = b.progress(); var f = jQuery(g.currentTarget); var i = f.data("mode"); var c = f.closest("tr"); var h = {members:c.data("value"), srcModule:a.find("#supportedModule").val()}; if (i === "lock"){h.lock = c.data("lock") === 0?1:0}app.saveAjax(i, null, h).then(function(e){d.progressIndicator({mode:"hide"}); b.refreshView()})}); a.find(".addUser, .wrapperExceptions").on("click", function(g){g.stopPropagation(); g.preventDefault(); var f = true; var d = jQuery(g.currentTarget); var c = "index.php?module=" + app.getModuleName() + "&parent=" + app.getParentModuleName() + "&srcModule=" + a.find("#supportedModule").val() + "&view=Members"; if (d.hasClass("wrapperExceptions")){c += "&mode=" + d.data("mode") + "&member=" + d.closest("tr").data("value"); f = false}app.showModalWindow(null, c, function(h){var e = h.find("form"); e.on("submit", function(j){j.preventDefault(); var i = b.progress(); var k = e.serializeFormData(); app.saveAjax(k.mode, null, k).then(function(l){i.progressIndicator({mode:"hide"}); app.hideModalWindow(); if (f){b.refreshView()}})})})})}, refreshView:function(){this.getContainer().find("#supportedModule").trigger("change")}, getContainer:function(){if (this.container === false){this.container = jQuery("div.contentsDiv")}return this.container}, registerEvents:function(){var a = this.getContainer(); this.registerModulesChangeEvent(a); app.registerDataTables(a.find(".dataTable")); this.registerButtonEvents(a)}});
