'use strict';

jQuery.Class('Settings_Notifications_List_Js',{},{registerSave:function registerSave(container,id){var thisInstance=this,containerValidate=container.find('.validationEngineContainer'),roleId=$('[name="roleMenu"]').val();containerValidate.validationEngine(app.validationEngineOptions),container.find('[name="saveButton"]').on('click',function(){if(containerValidate.validationEngine('validate')){var params={module:app.getModuleName(),parent:app.getParentModuleName(),action:'SaveAjax',mode:'saveType',name:container.find('[name="name"]').val(),width:container.find('[name="width"]').val(),height:container.find('[name="height"]').val(),roleId:roleId,id:id},progress=jQuery.progressIndicator();AppConnector.request(params).done(function(){progress.progressIndicator({mode:'hide'}),app.hideModalWindow(),thisInstance.showTable();});}});},registerButtons:function registerButtons(){var thisInstance=this;$('.createNotification').on('click',function(){var progress=jQuery.progressIndicator();app.showModalWindow(null,'index.php?module=Notifications&parent=Settings&view=CreateNotification',function(container){progress.progressIndicator({mode:'hide'}),thisInstance.registerSave(container,0);});}),$('[name="roleMenu"]').on('change',function(){thisInstance.showTable();});},showTable:function showTable(){var thisInstance=this,container=$('.listWithNotifications'),params={module:app.getModuleName(),parent:app.getParentModuleName(),view:'ListContent',roleId:$('[name="roleMenu"]').val()},progress=jQuery.progressIndicator();AppConnector.request(params).done(function(data){progress.progressIndicator({mode:'hide'}),container.html(data),thisInstance.registerTableEvents(container);});},registerTableEvents:function registerTableEvents(container){var thisInstance=this;container.find('.edit').on('click',function(e){var currentTarget=$(e.currentTarget),progress=jQuery.progressIndicator();app.showModalWindow(null,currentTarget.data('url'),function(container){progress.progressIndicator({mode:'hide'});var trRow=currentTarget.closest('tr');thisInstance.registerSave(container,trRow.data('id'));});}),container.find('.remove').on('click',function(e){var removeButton=jQuery(e.currentTarget),currentTrElement=removeButton.closest('tr'),message=app.vtranslate('JS_DELETE_CONFIRMATION');Vtiger_Helper_Js.showConfirmationBox({message:message}).done(function(){var params={module:app.getModuleName(),parent:app.getParentModuleName(),action:'Delete',id:currentTrElement.data('id')},progress=jQuery.progressIndicator();AppConnector.request(params).done(function(){progress.progressIndicator({mode:'hide'}),thisInstance.showTable();});});});},registerEvents:function registerEvents(){this.registerButtons(),this.showTable();}});
//# sourceMappingURL=Notifications.min.js.map
