'use strict';

Settings_Workflows_Edit_Js("Settings_Workflows_Edit1_Js",{},{init:function a(){this.initialize();},getContainer:function a(){return this.step1Container},setContainer:function b(a){return this.step1Container=a,this},initialize:function b(a){"undefined"==typeof a&&(a=jQuery("#workflow_step1")),a.is("#workflow_step1")?this.setContainer(a):this.setContainer(jQuery("#workflow_step1"));},submit:function e(){var a=jQuery.Deferred(),b=this.getContainer(),c=b.serializeFormData(),d=jQuery.progressIndicator({position:"html",blockInfo:{enabled:!0}});return AppConnector.request(c).done(function(c){b.hide(),d.progressIndicator({mode:"hide"}),a.resolve(c);}),a.promise()},registerEventForScheduledWorkflow:function e(){var a=this;jQuery("input[name=\"execution_condition\"]").on("click",function(a){var b=jQuery(a.currentTarget),c=jQuery("#scheduleBox");b.is(":checked")&&"6"==b.val()?c.removeClass("d-none"):c.addClass("d-none");}),app.registerEventForClockPicker($(".clockPicker")),App.Fields.Date.register("#scheduleByDate",!0),App.Fields.Picklist.showSelect2ElementView($("#annualDates")),App.Fields.Picklist.showSelect2ElementView($("#schdayofweek")),App.Fields.Picklist.showSelect2ElementView($("#schdayofmonth"));var b=new Date().getFullYear(),c=jQuery("#weekStartDay").data("value");$("#annualDatePicker").datepicker({weekStart:c,startDate:"01/01/"+b,endDate:"12/31/"+b,format:"mm/dd/yyyy",maxViewMode:1,todayBtn:"linked",language:jQuery("body").data("language"),multidate:!0,todayHighlight:!0}).on("changeDate",function(b){var e="",f=jQuery("#annualDates");for(var g in a.updateAnnualDates(f),b.dates){var h=b.dates[g],i=moment(h).format("YYYY-MM-DD");e+="<option selected value="+i+">"+i+"</option>";}f.append(e),f.trigger("select2:updated");});var d=jQuery("#annualDates");a.updateAnnualDates(d),d.trigger("select2:updated");},updateAnnualDates:function f(a){a.html("");var b=jQuery("#hiddenAnnualDates").val();if(b){var c="",d=JSON.parse(b);for(var e in d)c+="<option selected value="+d[e]+">"+d[e]+"</option>";a.html(c);}},registerEventForChangeInScheduledType:function b(){var a=this;jQuery("#schtypeid").on("change",function(b){var c=jQuery(b.currentTarget),d=c.val();a.showScheduledTime(),a.hideScheduledWeekList(),a.hideScheduledMonthByDateList(),a.hideScheduledSpecificDate(),a.hideScheduledAnually(),"1"==d?a.hideScheduledTime():"3"==d?a.showScheduledWeekList():"4"==d?a.showScheduledSpecificDate():"5"==d?a.showScheduledMonthByDateList():"7"==d&&a.showScheduledAnually();});},hideScheduledTime:function a(){jQuery("#scheduledTime").addClass("d-none");},showScheduledTime:function a(){jQuery("#scheduledTime").removeClass("d-none");},hideScheduledWeekList:function a(){jQuery("#scheduledWeekDay").addClass("d-none");},showScheduledWeekList:function a(){jQuery("#scheduledWeekDay").removeClass("d-none");},hideScheduledMonthByDateList:function a(){jQuery("#scheduleMonthByDates").addClass("d-none");},showScheduledMonthByDateList:function a(){jQuery("#scheduleMonthByDates").removeClass("d-none");},hideScheduledSpecificDate:function a(){jQuery("#scheduleByDate").addClass("d-none");},showScheduledSpecificDate:function a(){jQuery("#scheduleByDate").removeClass("d-none");},hideScheduledAnually:function a(){jQuery("#scheduleAnually").addClass("d-none");},showScheduledAnually:function a(){jQuery("#scheduleAnually").removeClass("d-none");},registerEvents:function c(){var a=this.getContainer();a.find("[type=\"submit\"]").removeAttr("disabled");var b=app.validationEngineOptions;b.onValidationComplete=function(a,b){return b},b.promptPosition="bottomRight",a.validationEngine(b),this.registerEventForScheduledWorkflow(),this.registerEventForChangeInScheduledType();}});
