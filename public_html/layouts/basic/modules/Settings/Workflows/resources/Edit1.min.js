'use strict';

Settings_Workflows_Edit_Js('Settings_Workflows_Edit1_Js',{},{init:function init(){this.initialize();},getContainer:function getContainer(){return this.step1Container},setContainer:function setContainer(element){return this.step1Container=element,this},initialize:function initialize(container){'undefined'==typeof container&&(container=jQuery('#workflow_step1')),container.is('#workflow_step1')?this.setContainer(container):this.setContainer(jQuery('#workflow_step1'));},submit:function submit(){var aDeferred=jQuery.Deferred(),form=this.getContainer(),formData=form.serializeFormData(),progressIndicatorElement=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});return AppConnector.request(formData).done(function(data){form.hide(),progressIndicatorElement.progressIndicator({mode:'hide'}),aDeferred.resolve(data);}),aDeferred.promise()},registerEventForScheduledWorkflow:function registerEventForScheduledWorkflow(){var container=$('.js-wf-executions-container');$('input[name="execution_condition"]').on('click',function(e){var element=$(e.currentTarget),itemBox=element.closest('.js-wf-execution-container').find('.js-wf-execution-item');container.find('.js-wf-execution-item').addClass('d-none'),itemBox.length&&element.prop('checked')&&itemBox.removeClass('d-none');}),app.registerEventForClockPicker($('.clockPicker')),App.Fields.Date.register('#scheduleByDate',!0),App.Fields.DateTime.register('#scheduleByDate',!0);var newElement=App.Fields.Date.register('#annualDates',!1,{maxViewMode:1,multidate:!0,autoclose:!1}).on('changeDate',function(e){var values=[];for(var index in e.dates){var date=e.dates[index],formated=moment(date).format(CONFIG.dateFormat.toUpperCase());values.push(formated);}container.find('#annualDates').val(values.join(','));});newElement.closest('.date').find('.js-date__btn').on('click',function(){newElement.trigger('click');}),App.Fields.Picklist.showSelect2ElementView($('#schdayofweek')),App.Fields.Picklist.showSelect2ElementView($('#schdayofmonth'));},registerEventForChangeInScheduledType:function registerEventForChangeInScheduledType(){var thisInstance=this;jQuery('#schtypeid').on('change',function(e){var element=jQuery(e.currentTarget),value=element.val();thisInstance.hideScheduledTime(),thisInstance.hideScheduledWeekList(),thisInstance.hideScheduledMonthByDateList(),thisInstance.hideScheduledSpecificDate(),thisInstance.hideScheduledAnually(),'2'==value?thisInstance.showScheduledTime():'3'==value?thisInstance.showScheduledWeekList():'4'==value?thisInstance.showScheduledSpecificDate():'5'==value?thisInstance.showScheduledMonthByDateList():'7'==value&&thisInstance.showScheduledAnually();});},hideScheduledTime:function hideScheduledTime(){jQuery('#scheduledTime').addClass('d-none');},showScheduledTime:function showScheduledTime(){jQuery('#scheduledTime').removeClass('d-none');},hideScheduledWeekList:function hideScheduledWeekList(){jQuery('#scheduledWeekDay').addClass('d-none');},showScheduledWeekList:function showScheduledWeekList(){jQuery('#scheduledWeekDay').removeClass('d-none');},hideScheduledMonthByDateList:function hideScheduledMonthByDateList(){jQuery('#scheduleMonthByDates').addClass('d-none');},showScheduledMonthByDateList:function showScheduledMonthByDateList(){jQuery('#scheduleMonthByDates').removeClass('d-none');},hideScheduledSpecificDate:function hideScheduledSpecificDate(){jQuery('#scheduleByDate').addClass('d-none');},showScheduledSpecificDate:function showScheduledSpecificDate(){jQuery('#scheduleByDate').removeClass('d-none');},hideScheduledAnually:function hideScheduledAnually(){jQuery('#scheduleAnually').addClass('d-none');},showScheduledAnually:function showScheduledAnually(){jQuery('#scheduleAnually').removeClass('d-none');},registerEvents:function registerEvents(){var container=this.getContainer();container.find('[type="submit"]').removeAttr('disabled');var opts=app.validationEngineOptions;opts.onValidationComplete=function(form,valid){return valid},opts.promptPosition='bottomRight',container.validationEngine(opts),this.registerEventForScheduledWorkflow(),this.registerEventForChangeInScheduledType();}});
//# sourceMappingURL=Edit1.min.js.map
