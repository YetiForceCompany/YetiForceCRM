'use strict';

Settings_Vtiger_List_Js('Settings_Workflows_List_Js',{triggerCreate:function c(a){var b=jQuery('#moduleFilter').val();0<b.length&&(a+='&source_module='+b),window.location.href=a;},setChangeStatusTasks:function g(a,b,c){var d=jQuery(a),e=jQuery(a).closest('tr'),f=app.vtranslate('LBL_STATUS_CONFIRMATION');Vtiger_Helper_Js.showConfirmationBox({message:f}).done(function(){var a=app.getModuleName(),f={module:a,action:'TaskAjax',mode:'changeStatusAllTasks',record:b,status:c,parent:app.getParentModuleName()},g=app.vtranslate('JS_TASKS_STATUS_GETTING_CHANGED'),h=jQuery.progressIndicator({message:g,position:'html',blockInfo:{enabled:!0}});AppConnector.request(f).done(function(a){if(h.progressIndicator({mode:'hide'}),a.success){var b=a.result.count,f=e.find('[data-name="active_tasks"]');d.hide(),c?(f.html('&nbsp;'+b),d.closest('td').find('.deactiveTasks').show()):(f.html('&nbsp;0'),d.closest('td').find('.activeTasks').show());}else{var g={text:app.vtranslate(a.error.message),title:app.vtranslate('JS_LBL_PERMISSION')};Vtiger_Helper_Js.showPnotify(g);}});});}},{registerFilterChangeEvent:function b(){var a=this;jQuery('#moduleFilter').on('change',function(b){jQuery('#pageNumber').val('1'),jQuery('#pageToJump').val('1'),jQuery('#orderBy').val(''),jQuery('#sortOrder').val('');var c={module:app.getModuleName(),parent:app.getParentModuleName(),sourceModule:jQuery(b.currentTarget).val()};jQuery('#recordsCount').val(''),jQuery('#totalPageCount').text(''),a.getListViewRecords(c).done(function(){a.updatePagination();});});},registerRowClickEvent:function b(){var a=this.getListViewContentContainer();a.on('click','.listViewEntries',function(a){var b=jQuery(a.currentTarget).find('.fa-edit').closest('a').attr('href');window.location.href=b;});},getDefaultParams:function e(){var a=jQuery('#pageNumber').val(),b=app.getModuleName(),c=app.getParentModuleName(),d={module:b,parent:c,page:a,view:'List',sourceModule:jQuery('#moduleFilter').val()};return d},registerImportTemplate:function a(){jQuery('#importButton').on('click',function(){window.location.href=jQuery(this).data('url');});},registerEvents:function a(){this._super(),this.registerFilterChangeEvent(),this.registerImportTemplate();}});
