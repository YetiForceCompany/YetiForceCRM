'use strict';

jQuery.Class('Settings_Users_Locks_Js',{},{registerAdd:function c(a){var b=this;a.find('.js-add-item').on('click',function(){var c=parseInt(a.find('#js-lock-count').val())+1,d=a.find('.js-clone-item tbody').clone(!0,!0);d.find('tr').attr('data-id',c).addClass('row'+c),a.find('.js-locks-table tbody').append(d.html()),a.find('#js-lock-count').val(c),b.registerDelete(a.find('tr.row'+c)),App.Fields.Picklist.showSelect2ElementView(a.find('tr.row'+c).find('select'));});},registerDelete:function b(a){a.find('.js-delete-item').on('click',function(a){var b=$(a.currentTarget);b.closest('tr').remove();});},registerSave:function b(a){a.find('.js-save-items').on('click',function(){var b=[];a.find('.js-locks-table tbody tr').each(function(){b.push({user:$(this).find('.js-users').val(),locks:$(this).find('.js-locks').val()});}),app.saveAjax('saveLocks',b).done(function(a){Settings_Vtiger_Index_Js.showMessage({type:'success',text:a.result.message});});});},registerEvents:function b(){var a=$('.contentsDiv');this.registerAdd(a),this.registerDelete(a),this.registerSave(a);}});
