
jQuery.Class("Settings_WebserviceApps_Index_Js",{},{registerTableEvents:function(){var b=this;var a=$(".configContainer");a.find(".edit").on("click",function(f){var d=$(f.currentTarget);var c=d.closest("tr");b.showFormToEditKey(c.data("id"))});a.find(".remove").on("click",function(g){var f=jQuery(g.currentTarget);var c=f.closest("tr");var d=app.vtranslate("JS_DELETE_CONFIRMATION");Vtiger_Helper_Js.showConfirmationBox({message:d}).then(function(i){var j={module:app.getModuleName(),parent:app.getParentModuleName(),action:"Delete",id:c.data("id")};var h=jQuery.progressIndicator();AppConnector.request(j).then(function(e){h.progressIndicator({mode:"hide"});b.loadTable()})},function(e,h){})})},loadTable:function(){var b=this;var c={module:app.getModuleName(),parent:app.getParentModuleName(),view:"Index",};var a=jQuery.progressIndicator();AppConnector.request(c).then(function(d){a.progressIndicator({mode:"hide"});$(".configContainer").html(d);b.registerTableEvents()})},showFormToEditKey:function(d){var b=this;var c={module:app.getModuleName(),parent:app.getParentModuleName(),view:"CreateApp",};if(d!=""){c.record=d}var a=jQuery.progressIndicator();AppConnector.request(c).then(function(e){a.progressIndicator({mode:"hide"});app.showModalWindow(e,function(f){Vtiger_Edit_Js.getInstance().registerEvents();var g=f.find("form");g.validationEngine(app.validationEngineOptions);f.find('[name="saveButton"]').on("click",function(){if(g.validationEngine("validate")){var h={module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",name:f.find('[name="name"]').val(),url:f.find('[name="addressUrl"]').val(),status:f.find('[name="status"]').is(":checked"),type:f.find(".typeServer").val(),pass:f.find('[name="pass"]').val(),accounts:f.find('[name="accountsid"]').val(),};if(d!=""){h.id=d}AppConnector.request(h).then(function(i){b.loadTable();app.hideModalWindow()})}})})})},registerAddButton:function(){var a=this;$(".createKey").on("click",function(){a.showFormToEditKey()})},registerEvents:function(){this.registerAddButton();this.registerTableEvents()}});