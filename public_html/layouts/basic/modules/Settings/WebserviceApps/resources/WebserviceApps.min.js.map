{"version":3,"file":"WebserviceApps.min.js","sources":["WebserviceApps.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Settings_WebserviceApps_Index_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Get container\n\t\t *\n\t\t * @returns {HTMLElement|jQuery}\n\t\t */\n\t\tgetContainer() {\n\t\t\treturn this.container;\n\t\t},\n\t\t/**\n\t\t * Register actions for record\n\t\t */\n\t\tregisterTableEvents: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tconst container = (this.container = $('.configContainer'));\n\t\t\tcontainer.find('.edit').on('click', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet trRow = currentTarget.closest('tr');\n\t\t\t\tthisInstance.showFormToEditKey(trRow.data('id'));\n\t\t\t});\n\t\t\tcontainer.find('.remove').on('click', function (e) {\n\t\t\t\tlet currentTrElement = jQuery(e.currentTarget).closest('tr');\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_DELETE_CONFIRMATION'),\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\taction: 'Delete',\n\t\t\t\t\t\t\tid: currentTrElement.data('id')\n\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tthisInstance.loadTable();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Refresh tables with records\n\t\t */\n\t\tloadTable: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'Index'\n\t\t\t};\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t$('.configContainer').html(data);\n\t\t\t\tthisInstance.registerTableEvents();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Show forms to edit or create record\n\t\t * @param {int} id\n\t\t */\n\t\tshowFormToEditKey: function (id, type) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'CreateApp',\n\t\t\t\ttype: type\n\t\t\t};\n\t\t\tif (id != '') {\n\t\t\t\tparams['record'] = id;\n\t\t\t}\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done((data) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tapp.showModalWindow(data, (container) => {\n\t\t\t\t\tconst prevButton = container.find('.previewPassword');\n\t\t\t\t\tconst password = container.find('[name=\"pass\"]');\n\t\t\t\t\tprevButton.on('mousedown', function (e) {\n\t\t\t\t\t\tpassword.attr('type', 'text');\n\t\t\t\t\t});\n\t\t\t\t\tprevButton.on('mouseup', function (e) {\n\t\t\t\t\t\tpassword.attr('type', 'password');\n\t\t\t\t\t});\n\t\t\t\t\tprevButton.on('mouseout', function (e) {\n\t\t\t\t\t\tpassword.attr('type', 'password');\n\t\t\t\t\t});\n\t\t\t\t\tconst clipboard = App.Fields.Text.registerCopyClipboard(container, '.copyPassword');\n\t\t\t\t\tcontainer.one('hidden.bs.modal', function () {\n\t\t\t\t\t\tclipboard.destroy();\n\t\t\t\t\t});\n\t\t\t\t\tvar form = container.find('form');\n\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\t\t\tformData['module'] = app.getModuleName();\n\t\t\t\t\t\t\tformData['parent'] = app.getParentModuleName();\n\t\t\t\t\t\t\tformData['action'] = 'SaveAjax';\n\t\t\t\t\t\t\tformData['status'] = container.find('[name=\"status\"]').is(':checked');\n\t\t\t\t\t\t\tif (id != '') {\n\t\t\t\t\t\t\t\tformData['id'] = id;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tAppConnector.request(formData).done(function (data) {\n\t\t\t\t\t\t\t\tif (data.result === true) {\n\t\t\t\t\t\t\t\t\tthisInstance.loadTable();\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t} else if (typeof data.result.error !== 'undefined') {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttext: data.result.error,\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tcontainer.find('[name=\"type\"]').on('change', (e) => {\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tthis.showFormToEditKey('', $(e.currentTarget).val());\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register button to create record\n\t\t */\n\t\tregisterAddButton: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.createKey').on('click', function () {\n\t\t\t\tthisInstance.showFormToEditKey();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Main function\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.registerAddButton();\n\t\t\tthis.registerTableEvents();\n\t\t\tApp.Fields.Text.registerCopyClipboard(this.getContainer());\n\t\t}\n\t}\n);\n"],"names":["$","Class","getContainer","container","registerTableEvents","thisInstance","find","on","e","currentTarget","trRow","closest","showFormToEditKey","data","currentTrElement","jQuery","app","showConfirmModal","title","vtranslate","confirmedCallback","progress","progressIndicator","AppConnector","request","module","getModuleName","parent","getParentModuleName","action","id","done","mode","loadTable","params","view","html","type","showModalWindow","prevButton","password","attr","clipboard","App","Fields","Text","registerCopyClipboard","one","destroy","form","validationEngine","validationEngineOptions","formData","serializeFormData","is","result","hideModalWindow","error","showNotify","text","val","registerAddButton","registerEvents"],"mappings":";;AAAA,kKACA,YAAA,CAEAA,CAAC,CAACC,KAAF,CACC,kCADD,CAEC,EAFD,CAGC;AAED;AACA;AACA;AACA,KACEC,YAND,CAMgB,SAAA,YAAA,EAAA,CACd,OAAYC,IAAAA,CAAAA,SACZ,CARF;AAUD;AACA,KACEC,mBAAmB,CAAE,SAAA,mBAAA,EAAY,KAC5BC,YAAY,CAAG,IADa,CAE1BF,SAAS,CAAI,IAAA,CAAKA,SAAL,CAAiBH,CAAC,CAAC,kBAAD,CAFL,CAGhCG,SAAS,CAACG,IAAV,CAAe,OAAf,CAAwBC,CAAAA,EAAxB,CAA2B,OAA3B,CAAoC,SAAUC,CAAV,CAAa,KAC5CC,aAAa,CAAGT,CAAC,CAACQ,CAAC,CAACC,aAAH,CAD2B,CAE5CC,KAAK,CAAGD,aAAa,CAACE,OAAd,CAAsB,IAAtB,CAFoC,CAGhDN,YAAY,CAACO,iBAAb,CAA+BF,KAAK,CAACG,IAAN,CAAW,IAAX,CAA/B,EACA,CAJD,CAHgC,CAQhCV,SAAS,CAACG,IAAV,CAAe,SAAf,CAA0BC,CAAAA,EAA1B,CAA6B,OAA7B,CAAsC,SAAUC,CAAV,CAAa,CAClD,IAAIM,gBAAgB,CAAGC,MAAM,CAACP,CAAC,CAACC,aAAH,CAAN,CAAwBE,OAAxB,CAAgC,IAAhC,CAAvB,CACAK,GAAG,CAACC,gBAAJ,CAAqB,CACpBC,KAAK,CAAEF,GAAG,CAACG,UAAJ,CAAe,wBAAf,CADa,CAEpBC,iBAAiB,CAAE,SAAM,iBAAA,EAAA,CACxB,IAAIC,QAAQ,CAAGN,MAAM,CAACO,iBAAP,EAAf,CACAC,YAAY,CAACC,OAAb,CAAqB,CACpBC,MAAM,CAAET,GAAG,CAACU,aAAJ,EADY,CAEpBC,MAAM,CAAEX,GAAG,CAACY,mBAAJ,EAFY,CAGpBC,MAAM,CAAE,QAHY,CAIpBC,EAAE,CAAEhB,gBAAgB,CAACD,IAAjB,CAAsB,IAAtB,CAJgB,CAArB,EAKGkB,IALH,CAKQ,UAAgB,CACvBV,QAAQ,CAACC,iBAAT,CAA2B,CAAEU,IAAI,CAAE,MAAR,CAA3B,CADuB,CAEvB3B,YAAY,CAAC4B,SAAb,GACA,CARD,EASA,CAbmB,CAArB,EAeA,CAjBD,EAkBA,CAtCF;AAwCD;AACA,KACEA,SAAS,CAAE,SAAA,SAAA,EAAY,CAClB5B,IAAAA,YAAY,CAAG,IADG,CAElB6B,MAAM,CAAG,CACZT,MAAM,CAAET,GAAG,CAACU,aAAJ,EADI,CAEZC,MAAM,CAAEX,GAAG,CAACY,mBAAJ,EAFI,CAGZO,IAAI,CAAE,OAHM,CAFS,CAOlBd,QAAQ,CAAGN,MAAM,CAACO,iBAAP,EAPO,CAQtBC,YAAY,CAACC,OAAb,CAAqBU,MAArB,CAAA,CAA6BH,IAA7B,CAAkC,SAAUlB,IAAV,CAAgB,CACjDQ,QAAQ,CAACC,iBAAT,CAA2B,CAAEU,IAAI,CAAE,MAAR,CAA3B,CADiD,CAEjDhC,CAAC,CAAC,kBAAD,CAAD,CAAsBoC,IAAtB,CAA2BvB,IAA3B,CAFiD,CAGjDR,YAAY,CAACD,mBAAb,GACA,CAJD,EAKA,CAvDF;AAyDD;AACA;AACA,KACEQ,iBAAiB,CAAE,SAAUkB,iBAAAA,CAAAA,EAAV,CAAcO,IAAd,CAAoB,gBAClChC,YAAY,CAAG,IADmB,CAElC6B,MAAM,CAAG,CACZT,MAAM,CAAET,GAAG,CAACU,aAAJ,EADI,CAEZC,MAAM,CAAEX,GAAG,CAACY,mBAAJ,EAFI,CAGZO,IAAI,CAAE,WAHM,CAIZE,IAAI,CAAEA,IAJM,CAFyB,CAQ5B,EAAN,EAAAP,EARkC,GASrCI,MAAM,CAAN,MAAA,CAAmBJ,EATkB,CAAA,CAWtC,IAAIT,QAAQ,CAAGN,MAAM,CAACO,iBAAP,EAAf,CACAC,YAAY,CAACC,OAAb,CAAqBU,MAArB,CAAA,CAA6BH,IAA7B,CAAkC,SAAClB,IAAD,CAAU,CAC3CQ,QAAQ,CAACC,iBAAT,CAA2B,CAAEU,IAAI,CAAE,MAAR,CAA3B,CAD2C,CAE3ChB,GAAG,CAACsB,eAAJ,CAAoBzB,IAApB,CAA0B,SAACV,SAAD,CAAe,CAClCoC,IAAAA,UAAU,CAAGpC,SAAS,CAACG,IAAV,CAAe,kBAAf,CADqB,CAElCkC,QAAQ,CAAGrC,SAAS,CAACG,IAAV,CAAe,iBAAf,CAFuB,CAGxCiC,UAAU,CAAChC,EAAX,CAAc,WAAd,CAA2B,UAAa,CACvCiC,QAAQ,CAACC,IAAT,CAAc,MAAd,CAAsB,MAAtB,EACA,CAFD,CAHwC,CAMxCF,UAAU,CAAChC,EAAX,CAAc,SAAd,CAAyB,UAAa,CACrCiC,QAAQ,CAACC,IAAT,CAAc,MAAd,CAAsB,UAAtB,EACA,CAFD,CANwC,CASxCF,UAAU,CAAChC,EAAX,CAAc,UAAd,CAA0B,UAAa,CACtCiC,QAAQ,CAACC,IAAT,CAAc,MAAd,CAAsB,UAAtB,EACA,CAFD,CATwC,CAYxC,IAAMC,SAAS,CAAGC,GAAG,CAACC,MAAJ,CAAWC,IAAX,CAAgBC,qBAAhB,CAAsC3C,SAAtC,CAAiD,eAAjD,CAAlB,CACAA,SAAS,CAAC4C,GAAV,CAAc,iBAAd,CAAiC,UAAY,CAC5CL,SAAS,CAACM,OAAV,GACA,CAFD,CAbwC,CAgBxC,IAAIC,IAAI,CAAG9C,SAAS,CAACG,IAAV,CAAe,MAAf,CAAX,CACA2C,IAAI,CAACC,gBAAL,CAAsBlC,GAAG,CAACmC,uBAA1B,CAjBwC,CAkBxChD,SAAS,CAACG,IAAV,CAAe,uBAAf,CAAA,CAAsCC,EAAtC,CAAyC,OAAzC,CAAkD,UAAY,CAC7D,GAAI0C,IAAI,CAACC,gBAAL,CAAsB,UAAtB,CAAJ,CAAuC,CACtC,IAAIE,QAAQ,CAAGH,IAAI,CAACI,iBAAL,EAAf,CACAD,QAAQ,OAAR,CAAqBpC,GAAG,CAACU,aAAJ,EAFiB,CAGtC0B,QAAQ,CAAA,MAAR,CAAqBpC,GAAG,CAACY,mBAAJ,EAHiB,CAItCwB,QAAQ,CAAR,MAAA,CAAqB,UAJiB,CAKtCA,QAAQ,CAAA,MAAR,CAAqBjD,SAAS,CAACG,IAAV,CAAe,mBAAf,EAAkCgD,EAAlC,CAAqC,UAArC,CALiB,CAM5B,EAAN,EAAAxB,EANkC,GAOrCsB,QAAQ,CAAA,EAAR,CAAiBtB,EAPoB,CAAA,CAStCP,YAAY,CAACC,OAAb,CAAqB4B,QAArB,CAA+BrB,CAAAA,IAA/B,CAAoC,SAAUlB,IAAV,CAAgB,CAC/C,CAAA,CAAA,GAAAA,IAAI,CAAC0C,MAD0C,EAElDlD,YAAY,CAAC4B,SAAb,EAFkD,CAGlDjB,GAAG,CAACwC,eAAJ,EAHkD,EAIX,WAA7B,EAAA,OAAO3C,IAAI,CAAC0C,MAAL,CAAYE,KAJqB,EAKlDzC,GAAG,CAAC0C,UAAJ,CAAe,CACdC,IAAI,CAAE9C,IAAI,CAAC0C,MAAL,CAAYE,KADJ,CAEdpB,IAAI,CAAE,OAFQ,CAAf,EAKD,CAVD,EAWA,CACD,CAtBD,CAlBwC,CAyCxClC,SAAS,CAACG,IAAV,CAAe,iBAAf,CAAA,CAAgCC,EAAhC,CAAmC,QAAnC,CAA6C,SAACC,CAAD,CAAO,CACnDQ,GAAG,CAACwC,eAAJ,EADmD,CAEnD,KAAI,CAAC5C,iBAAL,CAAuB,EAAvB,CAA2BZ,CAAC,CAACQ,CAAC,CAACC,aAAH,CAAD,CAAmBmD,GAAnB,EAA3B,EACA,CAHD,EAIA,CA7CD,EA8CA,CAhDD,EAiDA,CAzHF;AA2HD;AACA,KACEC,iBAAiB,CAAE,SAAY,iBAAA,EAAA,CAC9B,IAAIxD,YAAY,CAAG,IAAnB,CACAL,CAAC,CAAC,YAAD,CAAD,CAAgBO,EAAhB,CAAmB,OAAnB,CAA4B,UAAY,CACvCF,YAAY,CAACO,iBAAb,GACA,CAFD,EAGA,CAlIF;AAoID;AACA,KACEkD,cAAc,CAAE,SAAA,cAAA,EAAY,CAC3B,IAAA,CAAKD,iBAAL,EAD2B,CAE3B,IAAA,CAAKzD,mBAAL,EAF2B,CAG3BuC,GAAG,CAACC,MAAJ,CAAWC,IAAX,CAAgBC,qBAAhB,CAAsC,IAAK5C,CAAAA,YAAL,EAAtC,EACA,CA1IF,CAHD;;"}