{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_TreesManager_Edit_Js',\n\t{},\n\t{\n\t\tjstreeInstance: false,\n\t\tjstreeLastID: 0,\n\t\tregisterEvents: function () {\n\t\t\tconst self = this,\n\t\t\t\teditContainer = $('#EditView'),\n\t\t\t\tjstreeInstance = self.createTree();\n\t\t\teditContainer.validationEngine();\n\t\t\t$('.addNewElementBtn').on('click', () => {\n\t\t\t\tconst newElement = $('input.addNewElement'),\n\t\t\t\t\tref = jstreeInstance.jstree(true);\n\t\t\t\tif (newElement.val() === '') {\n\t\t\t\t\tconst message = app.vtranslate('JS_FIELD_CAN_NOT_BE_EMPTY');\n\t\t\t\t\tnewElement.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tself.jstreeLastID += 1;\n\t\t\t\tref.create_node(\n\t\t\t\t\t'#',\n\t\t\t\t\t{\n\t\t\t\t\t\tid: self.jstreeLastID,\n\t\t\t\t\t\ttext: newElement.val(),\n\t\t\t\t\t\ticon: false\n\t\t\t\t\t},\n\t\t\t\t\t'last'\n\t\t\t\t);\n\t\t\t\tnewElement.val('');\n\t\t\t});\n\t\t\t$('.saveTree').on('click', () => {\n\t\t\t\tjstreeInstance.jstree('deselect_all', true);\n\t\t\t\tconst json = jstreeInstance.jstree('get_json');\n\t\t\t\tlet forSave = [];\n\t\t\t\t$.each(json, function (index, value) {\n\t\t\t\t\tif (value.text == value.li_attr.text) {\n\t\t\t\t\t\tvalue.text = value.li_attr.key;\n\t\t\t\t\t}\n\t\t\t\t\tforSave[index] = value;\n\t\t\t\t});\n\t\t\t\t$('#treeValues').val(JSON.stringify(forSave));\n\t\t\t\teditContainer.submit();\n\t\t\t});\n\t\t\t$('.addNewElement').on('keydown', (event) => {\n\t\t\t\tif (event.keyCode == 13) {\n\t\t\t\t\t$('.addNewElementBtn').trigger('click');\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcreateTree: function () {\n\t\t\tconst self = this;\n\t\t\tif (this.jstreeInstance == false) {\n\t\t\t\tself.jstreeLastID = parseInt($('#treeLastID').val());\n\t\t\t\tlet treeValues = $('#treeValues').val(),\n\t\t\t\t\tdata = JSON.parse(treeValues);\n\t\t\t\tself.jstreeInstance = $('#treeContents');\n\t\t\t\tself.jstreeInstance.jstree({\n\t\t\t\t\tcore: {\n\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\tresponsive: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcheck_callback: true\n\t\t\t\t\t},\n\t\t\t\t\tcontextmenu: {\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\tcreate: {\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_CREATE'),\n\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\tselectedNode = treeInstance.get_node(data.reference);\n\t\t\t\t\t\t\t\t\tself.jstreeLastID = self.jstreeLastID + 1;\n\t\t\t\t\t\t\t\t\ttreeInstance.create_node(\n\t\t\t\t\t\t\t\t\t\tselectedNode,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: self.jstreeLastID,\n\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_NEW_ITEM')\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t'last',\n\t\t\t\t\t\t\t\t\t\tfunction (new_node) {\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\t\t\t\ttreeInstance.edit(new_node);\n\t\t\t\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trename: {\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_RENAME'),\n\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\tselectedNode = treeInstance.get_node(data.reference);\n\t\t\t\t\t\t\t\t\ttreeInstance.edit(selectedNode);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tchangeIcon: {\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_CHANGE_ICON'),\n\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\tselectedNode = treeInstance.get_node(data.reference);\n\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.selectIcon().done(function (data) {\n\t\t\t\t\t\t\t\t\t\tif (data['name'] == '-') {\n\t\t\t\t\t\t\t\t\t\t\tself.jstreeInstance.jstree(true).set_icon(selectedNode.id, false);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tself.jstreeInstance.jstree(true).set_icon(selectedNode.id, data['name']);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tremove: {\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_REMOVE'),\n\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\tid = treeInstance.get_selected(),\n\t\t\t\t\t\t\t\t\t\tstatus = true;\n\t\t\t\t\t\t\t\t\t$.each(id, function (index, value) {\n\t\t\t\t\t\t\t\t\t\tlet menu = treeInstance.get_node(value);\n\t\t\t\t\t\t\t\t\t\tif (menu.children.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_YOU_CANNOT_DELETE_PERENT_ITEM'),\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (status) {\n\t\t\t\t\t\t\t\t\t\tself.deleteItemEvent(id, treeInstance).done(function (e) {\n\t\t\t\t\t\t\t\t\t\t\tif (e.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t$.each(id, function (index, value) {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttreeInstance.delete_node(value);\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tccp: {\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_CCP'),\n\t\t\t\t\t\t\t\tsubmenu: {\n\t\t\t\t\t\t\t\t\tcut: {\n\t\t\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_CUT'),\n\t\t\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\t\t\tselectedNode = treeInstance.get_node(data.reference);\n\t\t\t\t\t\t\t\t\t\t\tif (treeInstance.is_selected(selectedNode)) {\n\t\t\t\t\t\t\t\t\t\t\t\ttreeInstance.cut(treeInstance.get_top_selected());\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\ttreeInstance.cut(selectedNode);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tpaste: {\n\t\t\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_JSTREE_PASTE'),\n\t\t\t\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\t\t\t\tlet treeInstance = $.jstree.reference(data.reference),\n\t\t\t\t\t\t\t\t\t\t\t\tselectedNode = treeInstance.get_node(data.reference);\n\t\t\t\t\t\t\t\t\t\t\ttreeInstance.paste(selectedNode);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tplugins: ['contextmenu', 'dnd']\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.jstreeInstance;\n\t\t},\n\t\tdeleteItemEvent: function (id, inst) {\n\t\t\tlet self = this,\n\t\t\t\taDeferred = jQuery.Deferred(),\n\t\t\t\tdata = inst.get_json();\n\t\t\t$.each(id, function (index, id) {\n\t\t\t\tdata = self.checkChildren(id, data);\n\t\t\t});\n\t\t\tif (data.length == 0) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_YOU_CANNOT_DELETE_ALL_THE_ITEMS'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\taDeferred.resolve();\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t\tapp.showModalWindow(null, 'index.php?module=TreesManager&parent=Settings&view=ReplaceTreeItem', function (\n\t\t\t\twizardContainer\n\t\t\t) {\n\t\t\t\tlet jstreeInstanceReplace = wizardContainer.find('#treePopupContents');\n\t\t\t\tjstreeInstanceReplace\n\t\t\t\t\t.jstree({\n\t\t\t\t\t\tcore: {\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\t\tresponsive: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.on('loaded.jstree', function (event, data) {\n\t\t\t\t\t\t$(this).jstree('open_all');\n\t\t\t\t\t});\n\t\t\t\twizardContainer.find('.js-modal__save').on('click', () => {\n\t\t\t\t\tlet selected = jstreeInstanceReplace.jstree('get_selected'),\n\t\t\t\t\t\treplaceIdsElement = $('#replaceIds'),\n\t\t\t\t\t\treplaceIds = replaceIdsElement.val(),\n\t\t\t\t\t\tdata = [];\n\t\t\t\t\tif (replaceIds !== '') {\n\t\t\t\t\t\tdata = JSON.parse(replaceIds);\n\t\t\t\t\t}\n\t\t\t\t\tif (!selected.length || selected.length > 1) {\n\t\t\t\t\t\tlet message = 'JS_ONLY_ONE_ITEM_SELECTED';\n\t\t\t\t\t\tif (!selected.length) {\n\t\t\t\t\t\t\tmessage = 'JS_NO_ITEM_SELECTED';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: app.vtranslate(message)\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tdata = $.merge(data, [{ old: id, new: selected }]);\n\t\t\t\t\treplaceIdsElement.val(JSON.stringify(data));\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\taDeferred.resolve(selected);\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tcheckChildren: function (id, data) {\n\t\t\tlet self = this,\n\t\t\t\tdataNew = [];\n\t\t\tfor (var key in data) {\n\t\t\t\tif (data[key].id != id) {\n\t\t\t\t\tif (data[key].children.length) {\n\t\t\t\t\t\tdata[key].children = self.checkChildren(id, data[key].children);\n\t\t\t\t\t}\n\t\t\t\t\tdataNew.push(data[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn dataNew;\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","jstreeInstance","jstreeLastID","registerEvents","self","editContainer","$","createTree","validationEngine","on","newElement","ref","jstree","val","message","app","vtranslate","create_node","id","text","icon","json","forSave","each","index","value","li_attr","key","JSON","stringify","submit","event","keyCode","trigger","preventDefault","parseInt","treeValues","data","parse","core","themes","name","responsive","check_callback","contextmenu","items","create","label","action","treeInstance","reference","selectedNode","get_node","new_node","setTimeout","edit","rename","changeIcon","Settings_Vtiger_Index_Js","selectIcon","done","set_icon","remove","get_selected","status","menu","children","length","showMessage","type","deleteItemEvent","e","delete_node","ccp","submenu","cut","is_selected","get_top_selected","paste","plugins","inst","aDeferred","Deferred","get_json","checkChildren","resolve","promise","showModalWindow","wizardContainer","jstreeInstanceReplace","find","selected","replaceIdsElement","replaceIds","merge","old","new","hideModalWindow","dataNew","push"],"mappings":"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"}