'use strict';

Settings_Vtiger_List_Js('Settings_TreesManager_List_Js',{triggerCreate:function c(a){var b=jQuery('#moduleFilter').val();0<b.length&&(a+='&source_module='+b),window.location.href=a;}},{DeleteRecord:function d(a){var b=this,c=app.vtranslate('LBL_DELETE_CONFIRMATION');Vtiger_Helper_Js.showConfirmationBox({message:c}).done(function(){AppConnector.request(a).done(function(a){if(!0==a.success){var c={text:app.vtranslate('JS_TREE_DELETED_SUCCESSFULLY')};Settings_Vtiger_Index_Js.showMessage(c),jQuery('#recordsCount').val(''),jQuery('#totalPageCount').text(''),b.getListViewRecords().done(function(){b.updatePagination();});}else Vtiger_Helper_Js.showPnotify(a.error.message);});});},registerFilterChangeEvent:function b(){var a=this;jQuery('#moduleFilter').on('change',function(b){jQuery('#pageNumber').val('1'),jQuery('#pageToJump').val('1'),jQuery('#orderBy').val(''),jQuery('#sortOrder').val('');var c={module:app.getModuleName(),parent:app.getParentModuleName(),sourceModule:jQuery(b.currentTarget).val()};jQuery('#recordsCount').val(''),jQuery('#totalPageCount').text(''),a.getListViewRecords(c).done(function(){a.updatePagination();});});},loadContents:function c(a){var b=jQuery.Deferred();return AppConnector.requestPjax(a).done(function(a){jQuery('.contentsDiv').html(a),b.resolve(a);}).fail(function(a,c){b.reject(a,c);}),b.promise()},registerEvents:function a(){this._super(),this.registerFilterChangeEvent();}});
