
Settings_PDF_Edit_Js("Settings_PDF_Edit4_Js",{},{step4Container:false,advanceFilterInstance:false,init:function(){this.initialize()},getContainer:function(){return this.step4Container},setContainer:function(a){this.step4Container=a;return this},initialize:function(a){if(typeof a==="undefined"){a=jQuery("#pdf_step4")}if(a.is("#pdf_step4")){this.setContainer(a)}else{this.setContainer(jQuery("#pdf_step4"))}},submit:function(){for(var b in CKEDITOR.instances){CKEDITOR.instances[b].updateElement()}var c=jQuery.Deferred();var d=this.getContainer();var f=d.serializeFormData();var e=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});var a=d.serializeFormData();a.action="Save";a.step=4;AppConnector.request(a).then(function(g){g=JSON.parse(g);if(g.success==true){Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_PDF_SAVED_SUCCESSFULLY")});AppConnector.request(f).then(function(h){d.hide();e.progressIndicator({mode:"hide"});c.resolve(h)},function(h,i){app.errorLog(h,i)})}},function(g,h){app.errorLog(g,h)});return c.promise()},registerCancelStepClickEvent:function(a){jQuery("button.cancelLink",a).on("click",function(){window.history.back()})},registerNewCkEditor:function(){CKEDITOR.replace("body_content",{disableNativeSpellChecker:true,scayt_autoStartup:false,removePlugins:"scayt"})},registerEvents:function(){var a=this.getContainer();var b=app.validationEngineOptions;b.onValidationComplete=function(d,c){return c};b.promptPosition="bottomRight";a.validationEngine(b);app.showSelect2ElementView(a.find("select"));this.registerCancelStepClickEvent(a);this.registerNewCkEditor()}});