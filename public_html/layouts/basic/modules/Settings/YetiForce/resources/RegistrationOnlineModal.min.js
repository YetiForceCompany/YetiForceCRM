'use strict';

jQuery.Class('Settings_YetiForce_RegistrationOnlineModal_Js',{registerNewsletter:function registerNewsletter(){var form=$('[data-view="RegistrationOnlineModal"]').find('form');form.find('[id$="newsletter]"]').on('click',function(e){var inputsContainer=$(e.target).closest('.js-card-body');$(e.target).prop('checked')?(inputsContainer.find('[id$="firstname]"]').attr('data-validation-engine','validate[required]'),inputsContainer.find('[id$="lastname]"]').attr('data-validation-engine','validate[required]'),inputsContainer.find('[id$="email]"]').attr('data-validation-engine','validate[required,custom[email]]'),inputsContainer.find('.js-newsletter-content').removeClass('d-none')):(inputsContainer.find('[id$="firstname]"]').removeAttr('data-validation-engine').val(''),inputsContainer.find('[id$="lastname]"]').removeAttr('data-validation-engine').val(''),inputsContainer.find('[id$="email]"]').removeAttr('data-validation-engine').val(''),inputsContainer.find('.js-newsletter-content').addClass('d-none'));});},registerEvents:function registerEvents(){var container=$('[data-view=\'RegistrationOnlineModal\']'),form=container.find('form');form.validationEngine(app.validationEngineOptions),form.on('submit',function(e){e.preventDefault(),container.find('[name="saveButton"]').click();}),container.find('[name="saveButton"]').on('click',function(e){if(!form.validationEngine('validate'))return e.preventDefault(),Vtiger_Helper_Js.showPnotify({text:app.vtranslate('JS_ENTER_ALL_REGISTRATION_DATA'),type:'error'}),!1;container.find('button[name=saveButton]').prop('disabled',!0);var progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request(form.serializeFormData()).done(function(data){return Vtiger_Helper_Js.showPnotify({text:data.result.message,type:data.result.type}),progress.progressIndicator({mode:'hide'}),'success'===data.result.type&&app.hideModalWindow(),container.find('button[name=saveButton]').prop('disabled',!1),data.result});}),this.registerNewsletter();}},{}),Settings_YetiForce_RegistrationOnlineModal_Js.registerEvents();
//# sourceMappingURL=RegistrationOnlineModal.min.js.map
