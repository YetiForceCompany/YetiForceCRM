jQuery.Class("Settings_AutomaticAssignment_Edit_Js",{},{container:false,advanceFilterInstance:false,getContainer:function(){if(this.container==false){this.container=jQuery("div.contentsDiv")}return this.container},registerBasicEvents:function(a){var e=this;var b=a.find(".filterContainer");if(b.length){this.advanceFilterInstance=Vtiger_AdvanceFilter_Js.getInstance(b)}var d=a.find("form");if(d.length){d.validationEngine(app.validationEngineOptions);d.find("[data-inputmask]").inputmask()}a.find(".select2noactive").each(function(g,h){var f=$(h);if(!f.data("select2")){app.showSelect2ElementView(f,{placeholder:app.vtranslate("JS_SELECT_AN_OPTION")})}});var c=app.registerDataTables(a.find(".dataTable"));if(c){c.$(".changeRoleType").on("click",function(h){h.stopPropagation();h.preventDefault();var g=jQuery(h.currentTarget);var f=g.closest("tr");app.saveAjax("changeRoleType",f.data("value"),{record:app.getMainParams("record")}).then(function(i){e.refreshTab()})});c.$(".delete").on("click",function(h){h.stopPropagation();h.preventDefault();var g=jQuery(h.currentTarget);var f=g.closest("tr");var i={record:app.getMainParams("record"),value:f.data("value"),name:f.data("name")};app.saveAjax("deleteElement",null,i).then(function(j){e.refreshTab()})})}a.find(".fieldContainer").on("click",function(f){f.stopPropagation();f.preventDefault()});a.find(".saveValue").on("click",function(k){var j=jQuery(k.currentTarget);var i=j.closest(".fieldContainer");var l=i.data("dbname");if(l==="conditions"){var g=e.advanceFilterInstance.getValues();var m=JSON.stringify(g)}else{var n=i.data("name");var f=i.find('[name="'+n+'"]');if(f.validationEngine("validate")){return false}var m=f.val()}var h=[];h[l]=m;app.saveAjax("save",jQuery.extend({},h),{record:app.getMainParams("record")}).then(function(o){e.refreshTab()})});a.find(".switchBtn").on("switchChange.bootstrapSwitch",function(g,h){var f=jQuery(this);var i=[];if(f.hasClass("noField")){if(h){f.closest("form").find(".fieldToShowHide").removeClass("d-none");return false}else{f.closest("form").find(".fieldToShowHide").addClass("d-none")}}i[f.attr("name")]=Number(h);app.saveAjax("save",jQuery.extend({},i),{record:app.getMainParams("record")}).then(function(j){e.refreshTab()})})},refreshTab:function(){var b=this;Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_SAVE_SUCCESS")});var a=this.getContainer().find(".tab-pane.active");if(a.hasClass("noRefresh")){return false}AppConnector.request(a.data("url")).then(function(c){a.html(c);b.registerBasicEvents(a)},function(d,c){app.errorLog(d,c)})},registerEvents:function(){this.registerBasicEvents(this.getContainer())}});