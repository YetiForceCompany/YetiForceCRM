{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_AutomaticAssignment_Edit_Js',\n\t{},\n\t{\n\t\tcontainer: false,\n\t\tadvanceFilterInstance: false,\n\t\tconditionBuilders: [],\n\t\tsetContainer: function (container) {\n\t\t\tthis.container = container;\n\t\t\treturn this.container;\n\t\t},\n\t\tgetContainer: function () {\n\t\t\tif (this.container == false) {\n\t\t\t\tthis.container = jQuery('div.contentsDiv form');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tregisterBlockToggleEvent() {\n\t\t\tthis.container.on('click', '.blockHeader', function (e) {\n\t\t\t\tconst target = $(e.target);\n\t\t\t\tif (\n\t\t\t\t\ttarget.is('input') ||\n\t\t\t\t\ttarget.is('button') ||\n\t\t\t\t\ttarget.parents().is('button') ||\n\t\t\t\t\ttarget.hasClass('js-stop-propagation') ||\n\t\t\t\t\ttarget.parents().hasClass('js-stop-propagation')\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst blockHeader = $(e.currentTarget);\n\t\t\t\tconst blockContents = blockHeader.next();\n\t\t\t\tconst iconToggle = blockHeader.find('.iconToggle');\n\t\t\t\tif (blockContents.hasClass('d-none')) {\n\t\t\t\t\tblockContents.removeClass('d-none');\n\t\t\t\t\ticonToggle.removeClass(iconToggle.data('hide')).addClass(iconToggle.data('show'));\n\t\t\t\t} else {\n\t\t\t\t\tblockContents.addClass('d-none');\n\t\t\t\t\ticonToggle.removeClass(iconToggle.data('show')).addClass(iconToggle.data('hide'));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register submit event\n\t\t */\n\t\tregisterSubmitEvent() {\n\t\t\tthis.container.off('submit').on('submit', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.container.find('.js-toggle-panel').find('.js-block-content').removeClass('d-none');\n\t\t\t\tif ($(e.currentTarget).validationEngine('validate')) {\n\t\t\t\t\tdocument.progressLoader = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tfor (var key in this.conditionBuilders) {\n\t\t\t\t\t\tthis.container\n\t\t\t\t\t\t\t.find(`input[name=\"${key}\"]`)\n\t\t\t\t\t\t\t.val(JSON.stringify(this.conditionBuilders[key].getConditions()));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.preSaveValidation().done((response) => {\n\t\t\t\t\t\tif (response === true) {\n\t\t\t\t\t\t\tlet formData = this.container.serializeFormData();\n\t\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t\t.saveAjax('save', [], formData)\n\t\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\t\tif (data.result && data.result.success) {\n\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_SUCCESS') });\n\t\t\t\t\t\t\t\t\t\twindow.location.href = data.result.url;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * PreSave validation\n\t\t */\n\t\tpreSaveValidation: function () {\n\t\t\tconst aDeferred = $.Deferred();\n\t\t\tlet formData = new FormData(this.container[0]);\n\t\t\tformData.append('mode', 'preSaveValidation');\n\t\t\tAppConnector.request({\n\t\t\t\tasync: false,\n\t\t\t\turl: 'index.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: formData,\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false\n\t\t\t})\n\t\t\t\t.done((data) => {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tfor (let i in response) {\n\t\t\t\t\t\tif (response[i].result !== true) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response[i].message ? response[i].message : app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (response[i].hoverField != undefined) {\n\t\t\t\t\t\t\t\tthis.container.find('[name=\"' + response[i].hoverField + '\"]').focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve(data.result.length <= 0);\n\t\t\t\t})\n\t\t\t\t.fail((textStatus, errorThrown) => {\n\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t});\n\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Load condition builder\n\t\t *\n\t\t * @param   {Integer}  sourceTabId\n\t\t */\n\t\tloadConditionBuilderView(sourceTabId) {\n\t\t\tif (!sourceTabId) {\n\t\t\t\tthis.container.find('.js-condition-builder-container').html('');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet progress = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'Conditions',\n\t\t\t\tsourceTabId: sourceTabId\n\t\t\t}).done((data) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tthis.container.find('.js-condition-builder-container').html(data);\n\t\t\t\tthis.registerConditionBuilder();\n\t\t\t});\n\t\t},\n\t\tregisterConditionBuilder() {\n\t\t\tlet sourceModuleName = this.sourceModuleSelect.val();\n\t\t\tif (sourceModuleName) {\n\t\t\t\tthis.container.find('.js-condition-builder').each((_, e) => {\n\t\t\t\t\tlet conditionBuilder = new Vtiger_ConditionBuilder_Js($(e), sourceModuleName);\n\t\t\t\t\tconditionBuilder.registerEvents();\n\t\t\t\t\tlet name = $(e).closest('.js-field-container').find('.js-condition-value').attr('name');\n\t\t\t\t\tthis.conditionBuilders[name] = conditionBuilder;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register source module change\n\t\t */\n\t\tregisterSourceModuleChange() {\n\t\t\tthis.sourceModuleSelect = this.container.find('select[name=\"tabid\"]');\n\t\t\tthis.sourceTabId = this.sourceModuleSelect.val();\n\t\t\tthis.sourceModuleSelect.on('change', (e) => {\n\t\t\t\tlet value = $(e.currentTarget).val();\n\t\t\t\tif (this.sourceTabId !== value && this.sourceTabId !== null) {\n\t\t\t\t\tthis.sourceTabId = value;\n\t\t\t\t\tthis.loadConditionBuilderView(this.sourceTabId);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterMethodChange() {\n\t\t\tthis.container.find('[name=\"method\"]').on('change', (e) => {\n\t\t\t\tlet countingCriteria = this.container.find('[name=\"record_limit_conditions\"]').closest('.js-field-container');\n\t\t\t\tif ($(e.currentTarget).val() == 1) {\n\t\t\t\t\tcountingCriteria.addClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tcountingCriteria.removeClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterBasicEvents: function () {\n\t\t\tthis.container.validationEngine(app.validationEngineOptionsForRecord);\n\t\t\tthis.registerSubmitEvent();\n\t\t\tthis.registerBlockToggleEvent();\n\t\t\tthis.registerSourceModuleChange();\n\t\t\tthis.registerConditionBuilder();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis.setContainer($('.contentsDiv form'));\n\t\t\tthis.registerBasicEvents();\n\t\t\tapp.showPopoverElementView(this.container.find('.js-popover-tooltip'));\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","container","advanceFilterInstance","conditionBuilders","setContainer","getContainer","registerBlockToggleEvent","on","e","target","$","is","parents","hasClass","blockHeader","currentTarget","blockContents","next","iconToggle","find","removeClass","data","addClass","registerSubmitEvent","off","preventDefault","validationEngine","key","document","progressLoader","progressIndicator","message","app","vtranslate","position","blockInfo","enabled","val","JSON","stringify","getConditions","preSaveValidation","done","response","formData","serializeFormData","saveAjax","result","success","Settings_Vtiger_Index_Js","showMessage","text","window","location","href","url","mode","showNotify","type","fail","stopPropagation","aDeferred","Deferred","FormData","append","AppConnector","request","async","processData","contentType","i","hoverField","focus","resolve","length","textStatus","errorThrown","errorLog","promise","loadConditionBuilderView","sourceTabId","html","progress","module","getModuleName","parent","getParentModuleName","view","registerConditionBuilder","sourceModuleName","sourceModuleSelect","each","_","conditionBuilder","Vtiger_ConditionBuilder_Js","registerEvents","name","closest","attr","registerSourceModuleChange","value","registerMethodChange","countingCriteria","registerBasicEvents","validationEngineOptionsForRecord","showPopoverElementView"],"mappings":"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"}