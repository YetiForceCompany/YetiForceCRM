
Settings_Vtiger_List_Js("Settings_AutomaticAssignment_List_Js", {changeRecordState:function(b, d){var a = jQuery.Deferred(); var c = app.vtranslate("JS_STATE_CONFIRMATION"); Vtiger_Helper_Js.showConfirmationBox({message:c}).then(function(f){app.saveAjax("save", {active:d}, {record:b}).then(function(g){var e = Settings_AutomaticAssignment_List_Js.getInstance(); e.getListViewRecords()})}, function(e, f){app.errorLog(e, f)}); return a.promise()}, }, {container:false, registerFilterChangeEvent:function(){var a = this; jQuery("#moduleFilter").on("change", function(b){jQuery("#pageNumber").val("1"); jQuery("#pageToJump").val("1"); jQuery("#orderBy").val(""); jQuery("#sortOrder").val(""); var c = {module:app.getModuleName(), parent:app.getParentModuleName(), sourceModule:jQuery(b.currentTarget).val()}; jQuery("#recordsCount").val(""); jQuery("#totalPageCount").text(""); a.getListViewRecords(c).then(function(d){a.updatePagination()})})}, getContainer:function(){if (this.container == false){this.container = jQuery("div.contentsDiv")}return this.container}, registerModalEvents:function(d, a){var c = d.find("form"); var b = d.find(".submitButton"); d.find('[name="tabid"]').on("change", function(i){var g = jQuery.progressIndicator({position:"html", blockInfo:{enabled:true}}); var h = jQuery(i.currentTarget); var f = a + "&tabid=" + h.val(); AppConnector.request(f).then(function(e){d.find(".fieldList").html(e); app.showSelect2ElementView(d.find(".fieldList select")); b.removeClass("hide"); g.progressIndicator({mode:"hide"})}, function(j, e){g.progressIndicator({mode:"hide"}); app.errorLog(j, e)})}); c.on("submit", function(f){f.preventDefault(); var g = c.serializeFormData(); app.saveAjax("save", g).then(function(h){var i = h.result; if (i){var e = c.attr("action"); e = e + "&record=" + i; window.location.href = e}})})}, registerEvents:function(){var a = this; this._super(); this.registerFilterChangeEvent(); this.getContainer().find(".addRecord").on("click", function(d){var c = jQuery(d.currentTarget); var b = c.data("url"); app.showModalWindow(null, b, function(e){a.registerModalEvents(e, b)})})}});
