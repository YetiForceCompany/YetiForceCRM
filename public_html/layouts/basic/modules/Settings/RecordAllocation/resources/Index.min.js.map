{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_RecordAllocation_Index_Js', {}, {\n\tcontainer: false,\n\t/**\n\t * Register tables\n\t * @param {jQuery} contentData\n\t */\n\tregisterDataTables: function (contentData) {\n\t\tconst thisInstance = this;\n\t\t$.extend($.fn.dataTable.defaults, {\n\t\t\tlanguage: {\n\t\t\t\tsLengthMenu: app.vtranslate('JS_S_LENGTH_MENU'),\n\t\t\t\tsZeroRecords: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\tsInfo: app.vtranslate('JS_S_INFO'),\n\t\t\t\tsInfoEmpty: app.vtranslate('JS_S_INFO_EMPTY'),\n\t\t\t\tsSearch: app.vtranslate('JS_SEARCH'),\n\t\t\t\tsEmptyTable: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\tsInfoFiltered: app.vtranslate('JS_S_INFO_FILTERED'),\n\t\t\t\tsLoadingRecords: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\tsProcessing: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\toAria: {\n\t\t\t\t\tsSortAscending: app.vtranslate('JS_S_SORT_ASCENDING'),\n\t\t\t\t\tsSortDescending: app.vtranslate('JS_S_SORT_DESCENDING')\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (contentData == undefined) {\n\t\t\tcontentData = thisInstance.getContainer();\n\t\t}\n\t\tcontentData.find('.js-data-table').dataTable({\n\t\t\tscrollY: 200,\n\t\t\tdeferRender: true,\n\t\t\tscroller: true,\n\t\t\tpaging: false,\n\t\t\tinfo: false\n\t\t});\n\t},\n\t/**\n\t * Register event drag and drop\n\t * @param {jQuery} contentData\n\t */\n\tregisterDragDropEvent: function (contentData) {\n\t\tif (contentData == undefined) {\n\t\t\treturn;\n\t\t}\n\t\tconst thisInstance = this;\n\t\tlet panel = contentData.closest('.js-panel'),\n\t\t\tindex = panel.data('index'),\n\t\t\twidth;\n\t\tcontentData.find('.js-drag-drop-' + index).draggable({\n\t\t\tappendTo: 'body',\n\t\t\thelper: 'clone',\n\t\t\tstart: function (e, ui) {\n\t\t\t\twidth = $(ui.helper.context).width();\n\t\t\t\t$(ui.helper).css('width', width).addClass('dataTableDragDrop bg-primary');\n\t\t\t},\n\t\t\tzIndex: 9999999999\n\t\t});\n\t\tcontentData.find('.dataTables_scrollBody .js-data-table').droppable({\n\t\t\tactiveClass: 'ui-state-default',\n\t\t\thoverClass: 'ui-state-hover',\n\t\t\taccept: '.js-drag-drop-' + index,\n\t\t\tdrop: function (event, ui) {\n\t\t\t\tlet tableBase = $(ui.draggable).closest('.js-data-table'),\n\t\t\t\t\ttable = $(this);\n\t\t\t\tif (tableBase.data('mode') != table.data('mode')) {\n\t\t\t\t\ttableBase.DataTable().row(ui.draggable).remove().draw();\n\t\t\t\t\ttable.DataTable().row.add(ui.draggable[0]).draw();\n\t\t\t\t\ttable = table.data('mode') == 'active' ? table : tableBase;\n\t\t\t\t\tthisInstance.save(table.closest('.js-panel'));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Save users for module\n\t * @param {jQuery} container\n\t */\n\tsave: function (container) {\n\t\tlet data = {\n\t\t\t\tmodule: container.data('modulename'),\n\t\t\t\tuserid: container.find('.js-base-user').val(),\n\t\t\t\ttype: app.getMainParams('fieldType')\n\t\t\t},\n\t\t\tuserData = [],\n\t\t\tdataContainer = container.find('.dataTables_scrollBody:first tbody tr');\n\t\tdataContainer.each(function (e) {\n\t\t\tlet id = $(this).data('id'),\n\t\t\t\tmode = $(this).data('type');\n\t\t\tif (id && mode) {\n\t\t\t\tif (!userData[mode]) {\n\t\t\t\t\tuserData[mode] = [];\n\t\t\t\t}\n\t\t\t\tuserData[mode].push(id);\n\t\t\t}\n\t\t});\n\t\tdata['ids'] = jQuery.extend({}, userData);\n\t\tapp.saveAjax('save', jQuery.extend({}, data));\n\t},\n\t/**\n\t * Register event to show form\n\t */\n\tregisterModalButton: function () {\n\t\tconst thisInstance = this,\n\t\t\tcontainer = this.getContainer();\n\t\tcontainer.find('button.js-add-panel').on('click', function () {\n\t\t\tlet modalWindow = container.find('.js-modal-add-panel').clone(true, true),\n\t\t\t\tinUseModules = thisInstance.getModules();\n\t\t\tmodalWindow.find('select option').each(function () {\n\t\t\t\tif ($.inArray($(this).val(), inUseModules) != -1) {\n\t\t\t\t\t$(this).remove();\n\t\t\t\t}\n\t\t\t});\n\t\t\tapp.showModalWindow(modalWindow, function (data) {\n\t\t\t\t//register all select2 Elements\n\t\t\t\tlet selectElement = data.find('select'),\n\t\t\t\t\tform = data.find('form');\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(selectElement);\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\tlet currentTarget = $(e.currentTarget),\n\t\t\t\t\t\tmodule = currentTarget.find('.js-modules-list');\n\t\t\t\t\tif (module.length && module.val()) {\n\t\t\t\t\t\tthisInstance.addPanel(module.val());\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Returns list of modules which are visible\n\t * @returns {Array}\n\t */\n\tgetModules: function () {\n\t\tvar modules = [];\n\t\tthis.getContainer().find('.js-panel').each(function () {\n\t\t\tmodules.push(jQuery(this).data('modulename'));\n\t\t});\n\t\treturn modules;\n\t},\n\t/**\n\t * Load users form modules\n\t * @param {string} module\n\t * @returns {jQuery.Deferred}\n\t */\n\taddPanel: function (module) {\n\t\tconst thisInstance = this;\n\t\tlet aDeferred = jQuery.Deferred(),\n\t\t\tprogressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t}),\n\t\t\tlastPanel = this.getContainer().find('.js-panel:last');\n\t\tAppConnector.request({\n\t\t\tindex: lastPanel.data('index'),\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tsourceModule: module,\n\t\t\tview: 'Index',\n\t\t\tmode: 'getPanel',\n\t\t\ttype: app.getMainParams('fieldType')\n\t\t}).done(function (data) {\n\t\t\tlet elements = thisInstance.getContainer().find('.js-panels-container').append(data);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(elements.find('.select2'));\n\t\t\tapp.hideModalWindow();\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\taDeferred.resolve(data);\n\t\t}, function (error) {\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\taDeferred.reject(error);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Register event to load users\n\t */\n\tregisterLoadData: function () {\n\t\tconst thisInstance = this;\n\t\tthis.getContainer().on('change', '.js-base-user', function (e) {\n\t\t\tlet selectElement = jQuery(e.currentTarget),\n\t\t\t\tpanel = selectElement.closest('.js-panel-item'),\n\t\t\t\tdataJson = panel.find('.js-module-allocation-data').val(),\n\t\t\t\tdata = [];\n\t\t\tif (dataJson && dataJson != 'null') {\n\t\t\t\tdata = JSON.parse(dataJson);\n\t\t\t}\n\t\t\tlet userData = data[selectElement.val()],\n\t\t\t\tbodyContainer = panel.find('.js-active-panel');\n\t\t\tif (bodyContainer.length) {\n\t\t\t\tbodyContainer.remove();\n\t\t\t}\n\t\t\tlet bodyContainerTable = panel.find('.js-clear-tables').clone(true, true);\n\t\t\tif (userData != undefined) {\n\t\t\t\tlet activeData = bodyContainerTable.find('.js-data-table .dropContainer:first'),\n\t\t\t\t\tbaseData = bodyContainerTable.find('.js-data-table .dropContainer:last');\n\t\t\t\tbaseData.find('tr').each(function () {\n\t\t\t\t\tlet mode = jQuery(this).data('type'),\n\t\t\t\t\t\tid = jQuery(this).data('id');\n\t\t\t\t\tif ($.inArray(id, userData[mode]) != -1 || $.inArray(id.toString(), userData[mode]) != -1) {\n\t\t\t\t\t\tactiveData.append(jQuery(this));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tpanel.find('.js-panel-body').removeClass('d-none').append(bodyContainerTable.removeClass('js-clear-tables d-none').addClass('js-active-panel'));\n\t\t\tthisInstance.registerDataTables(bodyContainerTable);\n\t\t\tthisInstance.registerDragDropEvent(bodyContainerTable);\n\t\t});\n\t},\n\t/**\n\t * Register basic events\n\t */\n\tregisterHeaderElements: function () {\n\t\tthis.getContainer().on('click', '.js-remove-panel', function (e) {\n\t\t\tlet currentTarget = jQuery(e.currentTarget),\n\t\t\t\tpanel = currentTarget.closest('.js-panel');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': app.vtranslate('JS_ARE_YOU_SURE_YOU_WANT_TO_DELETE_PANEL')}).done(function (e) {\n\t\t\t\tapp.saveAjax('removePanel', {\n\t\t\t\t\tmodule: panel.data('modulename'),\n\t\t\t\t\ttype: app.getMainParams('fieldType')\n\t\t\t\t}).done(function () {\n\t\t\t\t\tpanel.fadeOut(300, function () {\n\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\tthis.registerLoadData();\n\t},\n\t/**\n\t * Returns container\n\t * @returns {jQuery}\n\t */\n\tgetContainer: function () {\n\t\tif (this.container == false) {\n\t\t\tthis.container = jQuery('div.contentsDiv');\n\t\t}\n\t\treturn this.container;\n\t},\n\t/**\n\t * Main function\n\t */\n\tregisterEvents: function () {\n\t\tthis.registerModalButton();\n\t\tthis.registerHeaderElements();\n\t}\n});\n"],"names":["jQuery","Class","container","registerDataTables","contentData","$","extend","fn","dataTable","defaults","language","sLengthMenu","app","vtranslate","sZeroRecords","sInfo","sInfoEmpty","sSearch","sEmptyTable","sInfoFiltered","sLoadingRecords","sProcessing","oAria","sSortAscending","sSortDescending","thisInstance","getContainer","find","scrollY","deferRender","scroller","paging","info","registerDragDropEvent","panel","closest","index","data","width","draggable","appendTo","helper","start","e","ui","context","css","addClass","zIndex","droppable","activeClass","hoverClass","accept","drop","event","table","tableBase","DataTable","row","remove","draw","add","save","module","userid","val","type","getMainParams","userData","dataContainer","each","mode","id","push","saveAjax","registerModalButton","on","clone","inUseModules","getModules","modalWindow","inArray","showModalWindow","form","App","Fields","Picklist","showSelect2ElementView","selectElement","currentTarget","length","addPanel","preventDefault","modules","aDeferred","Deferred","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","lastPanel","request","getModuleName","parent","getParentModuleName","sourceModule","view","done","append","elements","hideModalWindow","resolve","error","reject","promise","registerLoadData","dataJson","JSON","parse","bodyContainer","bodyContainerTable","baseData","toString","activeData","removeClass","registerHeaderElements","Vtiger_Helper_Js","showConfirmationBox","fadeOut","registerEvents"],"mappings":"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"}