
Settings_Vtiger_List_Js("Settings_Mail_List_Js",{},{registerAcceptanceEvent:function(){var a=this;var b=jQuery(".listViewEntriesDiv");b.on("click",".acceptanceRecord",function(f){var d=this;var g=$(this).closest("tr").data("id");var c=jQuery.progressIndicator();AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",mode:"acceptanceRecord",id:g}).then(function(e){c.progressIndicator({mode:"hide"});Settings_Vtiger_Index_Js.showMessage({text:e.result.message});$(d).remove()},function(e){c.progressIndicator({mode:"hide"})})})},massDeleteAction:function(){$(".massDelete").on("click",function(){var e=Settings_Vtiger_List_Js.getInstance();var c=e.checkListRecordSelected();if(c!=true){var b=e.readSelectedIds(true);var f=e.readExcludedIds(true);var a=e.getCurrentCvId();var d=app.vtranslate("LBL_MASS_DELETE_CONFIRMATION");Vtiger_Helper_Js.showConfirmationBox({message:d}).then(function(h){var j={};j.module=app.getModuleName();j.parent=app.getParentModuleName();j.action="MassDelete";j.selected_ids=b;var i=app.vtranslate("JS_RECORDS_ARE_GETTING_DELETED");var g=jQuery.progressIndicator({message:i,position:"html",blockInfo:{enabled:true}});AppConnector.request(j).then(function(k){g.progressIndicator({mode:"hide"});e.postMassDeleteRecords();if(k.error){Vtiger_Helper_Js.showPnotify({text:app.vtranslate(k.error.message),title:app.vtranslate("JS_LBL_PERMISSION")})}},function(k){console.log("Error: "+k)})},function(g,h){Vtiger_List_Js.clearList()})}else{e.noRecordSelectedAlert()}})},registerFilterChangeEvent:function(){var a=this;jQuery("#mailQueueFilter").on("change",function(b){jQuery("#pageNumber").val("1");jQuery("#pageToJump").val("1");jQuery("#orderBy").val("");jQuery("#sortOrder").val("");var c={module:app.getModuleName(),parent:app.getParentModuleName(),orderby:jQuery(b.currentTarget).val(),page:1,};jQuery("#totalPageCount").text("");a.getListViewRecords(c).then(function(d){a.updatePagination()})})},getParams:function(){var a=this.getListViewContainer();var c={};a.find("input.listSearchContributor, select.listSearchContributor").each(function(d,f){if($(f).val()!=null){var e=$(f).attr("name");c[e]={};c[e]["value"]=$(f).val()}});var b={module:app.getModuleName(),parent:app.getParentModuleName(),page:1,view:"List",searchParams:c};return b},registerListSearch:function(){var a=this;var b=this.getListViewContainer();b.find("input.listSearchContributor").on("keypress",function(c){if(c.keyCode==13){var d=a.getParams();jQuery("#totalPageCount").text("");a.getListViewRecords(d).then(function(e){a.updatePagination()})}});b.find('[data-trigger="listSearch"]').on("click",function(c){var d=a.getParams();a.getListViewRecords(d).then(function(e){a.updatePagination()})})},registerListViewSelect:function(){if(app.getMainParams("autoRefreshListOnChange")=="1"){var a=this;var b=this.getListViewContainer();b.on("change",".listViewEntriesTable select",function(c){var d=a.getParams();a.getListViewRecords(d).then(function(e){a.updatePagination()})})}},registerEvents:function(){this._super();this.registerFilterChangeEvent();this.massDeleteAction();this.registerAcceptanceEvent();this.registerListSearch();this.registerListViewSelect()}});