'use strict';

/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */"use strict";Settings_Vtiger_List_Js("Settings_Mail_List_Js",{},{registerAcceptanceEvent:function registerAcceptanceEvent(){var list=jQuery(".listViewEntriesDiv");list.on("click",".acceptanceRecord",function(){var elem=this,id=$(this).closest("tr").data("id"),progressIndicator=jQuery.progressIndicator();AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",mode:"acceptanceRecord",id:id}).done(function(data){progressIndicator.progressIndicator({mode:"hide"}),Settings_Vtiger_Index_Js.showMessage({text:data.result.message}),$(elem).remove();}).fail(function(){progressIndicator.progressIndicator({mode:"hide"});});});},massDeleteAction:function massDeleteAction(){$(".massDelete").on("click",function(){var listInstance=Settings_Vtiger_List_Js.getInstance(),validationResult=listInstance.checkListRecordSelected();!0==validationResult?listInstance.noRecordSelectedAlert():app.showConfirmModal({title:app.vtranslate("LBL_MASS_DELETE_CONFIRMATION"),confirmedCallback:function confirmedCallback(){var params={module:app.getModuleName(),parent:app.getParentModuleName(),action:"MassDelete",selected_ids:listInstance.readSelectedIds(!0)},deleteMessage=app.vtranslate("JS_RECORDS_ARE_GETTING_DELETED"),progressIndicatorElement=jQuery.progressIndicator({message:deleteMessage,position:"html",blockInfo:{enabled:!0}});AppConnector.request(params).done(function(data){progressIndicatorElement.progressIndicator({mode:"hide"}),data&&data.result&&data.result.notify&&Vtiger_Helper_Js.showMessage(data.result.notify),listInstance.postMassDeleteRecords(),data.error&&app.showNotify({text:app.vtranslate(data.error.message),title:app.vtranslate("JS_LBL_PERMISSION"),type:"error"});});},rejectedCallback:function rejectedCallback(){Vtiger_List_Js.clearList();}});});},registerFilterChangeEvent:function registerFilterChangeEvent(){var thisInstance=this;jQuery("#mailQueueFilter").on("change",function(e){jQuery("#pageNumber").val("1"),jQuery("#pageToJump").val("1"),jQuery("#orderBy").val(""),jQuery("#sortOrder").val("");var params={module:app.getModuleName(),parent:app.getParentModuleName(),orderby:jQuery(e.currentTarget).val(),page:1};//Make total number of pages as empty
jQuery("#totalPageCount").text(""),thisInstance.getListViewRecords(params).done(function(){thisInstance.updatePagination();});});},getParams:function getParams(){var listViewContainer=this.getListViewContainer(),searchParams={};listViewContainer.find("input.listSearchContributor, select.listSearchContributor").each(function(i,obj){if(null!=$(obj).val()){var column=$(obj).attr("name");searchParams[column]={},searchParams[column].value=$(obj).val();}});var params={module:app.getModuleName(),parent:app.getParentModuleName(),page:1,view:"List",searchParams:searchParams};return params},registerListSearch:function registerListSearch(){var thisInstance=this,listViewContainer=this.getListViewContainer();listViewContainer.find("input.listSearchContributor").on("keypress",function(e){if(13==e.keyCode){var params=thisInstance.getParams();jQuery("#totalPageCount").text(""),thisInstance.getListViewRecords(params).done(function(){thisInstance.updatePagination();});}}),listViewContainer.find("[data-trigger=\"listSearch\"]").on("click",function(){var params=thisInstance.getParams();thisInstance.getListViewRecords(params).done(function(){thisInstance.updatePagination();});});},registerListViewSelect:function registerListViewSelect(){if("1"==app.getMainParams("autoRefreshListOnChange")){var thisInstance=this,listViewContainer=this.getListViewContainer();listViewContainer.on("change",".listViewEntriesTable select",function(){var params=thisInstance.getParams();thisInstance.getListViewRecords(params).done(function(){thisInstance.updatePagination();});});}},registerEvents:function registerEvents(){this._super(),this.registerFilterChangeEvent(),this.massDeleteAction(),this.registerAcceptanceEvent(),this.registerListSearch(),this.registerListViewSelect();}});
//# sourceMappingURL=List.min.js.map
