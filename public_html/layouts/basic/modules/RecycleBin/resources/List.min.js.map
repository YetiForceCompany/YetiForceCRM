{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_List_Js(\n\t'RecycleBin_List_Js',\n\t{\n\t\t/**\n\t\t * Mass activation trigerred on the list\n\t\t */\n\t\tmassActivation: function () {\n\t\t\tconst self = this;\n\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\tmessage: app.vtranslate('JS_ACTIVATE_RECORD_DESC'),\n\t\t\t\ttitle: app.vtranslate('JS_MASS_ACTIVATE')\n\t\t\t}).done(function (e) {\n\t\t\t\tlet params = self.getSelectedRecordsParams(),\n\t\t\t\t\tlistInstance = Vtiger_List_Js.getInstance(),\n\t\t\t\t\tcontainer = listInstance.getListViewContainer();\n\t\t\t\tparams.module = container.find('.js-source-module').val();\n\t\t\t\tparams.state = 'Active';\n\t\t\t\tparams.entityState = 'Trash';\n\t\t\t\tparams.action = 'MassState';\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tif (data && data.result && data.result.notify) {\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage(data.result.notify);\n\t\t\t\t\t}\n\t\t\t\t\tlistInstance.getListViewRecords({\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\tview: 'List',\n\t\t\t\t\t\tsourceModule: container.find('.js-source-module').val()\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Mass delete trigerred on the list\n\t\t */\n\t\tmassDelete: function () {\n\t\t\tconst self = this;\n\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\tmessage: app.vtranslate('JS_DELETE_ALL_RECYCLE_RECORD_DESC'),\n\t\t\t\ttitle: app.vtranslate('JS_MASS_DELETE')\n\t\t\t}).done(function (e) {\n\t\t\t\tlet params = self.getSelectedRecordsParams(),\n\t\t\t\t\tlistInstance = Vtiger_List_Js.getInstance(),\n\t\t\t\t\tcontainer = listInstance.getListViewContainer();\n\t\t\t\tparams.module = container.find('.js-source-module').val();\n\t\t\t\tparams.sourceModule = container.find('.js-source-module').val();\n\t\t\t\tparams.action = 'MassDelete';\n\t\t\t\tparams.entityState = 'Trash';\n\t\t\t\tparams.viewname = 'undefined';\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tif (data && data.result && data.result.notify) {\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage(data.result.notify);\n\t\t\t\t\t}\n\t\t\t\t\tlistInstance.getListViewRecords({\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\tview: 'List',\n\t\t\t\t\t\tsourceModule: container.find('.js-source-module').val()\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Register module select\n\t\t */\n\t\tregisterModuleFilter: function () {\n\t\t\tconst self = this,\n\t\t\t\tcontainer = this.getListViewContainer();\n\t\t\tlet filterSelectElement = container.find('.js-source-module');\n\t\t\tfilterSelectElement.on('select2:selecting', function (e) {\n\t\t\t\tself\n\t\t\t\t\t.getListViewRecords({\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\tview: 'List',\n\t\t\t\t\t\tsourceModule: e.params.args.data.id\n\t\t\t\t\t})\n\t\t\t\t\t.done(function () {\n\t\t\t\t\t\tself.calculatePages().done(function () {\n\t\t\t\t\t\t\tcontainer.find('.js-pagination-list').data('totalCount', 0);\n\t\t\t\t\t\t\tself.updatePagination();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to update pagination page numer\n\t\t * @param {boolean} force\n\t\t */\n\t\tupdatePaginationAjax(force = false) {\n\t\t\tconst self = this,\n\t\t\t\tlistViewPageDiv = this.getListViewContainer();\n\t\t\tlet params = self.getDefaultParams(),\n\t\t\t\tcontainer = listViewPageDiv.find('.paginationDiv');\n\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\ttext: app.vtranslate('JS_GET_PAGINATION_INFO'),\n\t\t\t\ttype: 'info'\n\t\t\t});\n\t\t\tif (container.find('.js-pagination-list').data('total-count') > 0 || force) {\n\t\t\t\tparams.totalCount = '-1';\n\t\t\t\tparams.view = 'Pagination';\n\t\t\t\tparams.mode = 'getPagination';\n\t\t\t\tparams.entityState = 'Trash';\n\t\t\t\tparams.module = listViewPageDiv.find('.js-source-module').val();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tcontainer.html(data);\n\t\t\t\t\tself.registerPageNavigationEvents();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register empty recycle button\n\t\t */\n\t\tregisterEmptyRecycle: function () {\n\t\t\tconst self = this,\n\t\t\t\tcontainer = this.getListViewContainer();\n\t\t\tcontainer.find('.js-recycle-empty').on('click', function () {\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\t\tmessage: app.vtranslate('JS_DELETE_ALL_RECYCLE_RECORD_DESC'),\n\t\t\t\t\ttitle: app.vtranslate('JS_DELETE_ALL_RECYCLE_RECORD')\n\t\t\t\t}).done(function (e) {\n\t\t\t\t\tlet progressIndicatorElement = $.progressIndicator();\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: 'RecycleBin',\n\t\t\t\t\t\tsourceModule: container.find('.js-source-module').val(),\n\t\t\t\t\t\taction: 'MassDeleteAll',\n\t\t\t\t\t\tsourceView: 'List'\n\t\t\t\t\t})\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tlet result = {\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_FAILED_TO_SAVE')\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (data && data.result) {\n\t\t\t\t\t\t\t\tresult = {\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ADDED_TO_QUEUE'),\n\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage(result);\n\t\t\t\t\t\t\tself.getListViewRecords();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Get record list of actual selected module\n\t\t * @param {string} urlParams\n\t\t * @returns {*|jQuery}\n\t\t */\n\t\tgetListViewRecords: function (urlParams) {\n\t\t\tlet overrideUrlParams = {},\n\t\t\t\taDeferred = $.Deferred();\n\t\t\toverrideUrlParams.sourceModule = $('.js-source-module').val();\n\t\t\turlParams = $.extend(overrideUrlParams, urlParams);\n\t\t\tthis._super(urlParams)\n\t\t\t\t.done(function () {\n\t\t\t\t\taDeferred.resolve();\n\t\t\t\t})\n\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerModuleFilter();\n\t\t\tthis.registerEmptyRecycle();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_List_Js","massActivation","self","Vtiger_Helper_Js","showConfirmationBox","message","app","vtranslate","title","done","params","getSelectedRecordsParams","listInstance","getInstance","container","getListViewContainer","module","find","val","state","entityState","action","AppConnector","request","data","result","notify","showMessage","getListViewRecords","getModuleName","view","sourceModule","massDelete","viewname","registerModuleFilter","filterSelectElement","on","e","args","id","calculatePages","updatePagination","updatePaginationAjax","force","listViewPageDiv","getDefaultParams","text","type","totalCount","mode","html","registerPageNavigationEvents","registerEmptyRecycle","progressIndicatorElement","$","progressIndicator","sourceView","fail","urlParams","overrideUrlParams","aDeferred","Deferred","extend","_super","resolve","textStatus","errorThrown","reject","promise","registerEvents"],"mappings":"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"}