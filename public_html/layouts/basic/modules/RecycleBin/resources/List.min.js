'use strict';

Vtiger_List_Js('RecycleBin_List_Js',{massActivation:function massActivation(){var self=this;Vtiger_Helper_Js.showConfirmationBox({message:app.vtranslate('JS_ACTIVATE_RECORD_DESC'),title:app.vtranslate('JS_MASS_ACTIVATE')}).done(function(){var params=self.getSelectedRecordsParams(),listInstance=Vtiger_List_Js.getInstance(),container=listInstance.getListViewContainer();params.module=container.find('.js-source-module').val(),params.state='Active',params.entityState='Trash',params.action='MassState',AppConnector.request(params).done(function(data){data&&data.result&&data.result.notify&&Vtiger_Helper_Js.showMessage(data.result.notify),listInstance.getListViewRecords({module:app.getModuleName(),view:'List',parent:app.getModuleName(),sourceModule:container.find('.js-source-module').val()});});});},massDelete:function massDelete(){var self=this;Vtiger_Helper_Js.showConfirmationBox({message:app.vtranslate('JS_DELETE_ALL_RECYCLE_RECORD_DESC'),title:app.vtranslate('JS_MASS_DELETE')}).done(function(){var params=self.getSelectedRecordsParams(),listInstance=Vtiger_List_Js.getInstance(),container=listInstance.getListViewContainer();params.module=container.find('.js-source-module').val(),params.sourceModule=container.find('.js-source-module').val(),params.action='MassDelete',params.entityState='Trash',params.viewname='undefined',AppConnector.request(params).done(function(data){data&&data.result&&data.result.notify&&Vtiger_Helper_Js.showMessage(data.result.notify),listInstance.getListViewRecords({module:app.getModuleName(),view:'List',parent:app.getModuleName(),sourceModule:container.find('.js-source-module').val()});});});}},{registerModuleFilter:function registerModuleFilter(){var self=this,container=this.getListViewContainer(),filterSelectElement=container.find('.js-source-module');filterSelectElement.on('select2:selecting',function(e){self.getListViewRecords({module:app.getModuleName(),view:'List',parent:app.getModuleName(),sourceModule:e.params.args.data.id}).done(function(){self.calculatePages().done(function(){container.find('.js-pagination-list').data('totalCount',''),self.updatePagination();});});});},updatePaginationAjax:function updatePaginationAjax(){var force=!!(0<arguments.length&&arguments[0]!==void 0)&&arguments[0],self=this,listViewPageDiv=this.getListViewContainer(),params=self.getDefaultParams(),container=listViewPageDiv.find('.paginationDiv');Vtiger_Helper_Js.showMessage({title:app.vtranslate('JS_LBL_PERMISSION'),text:app.vtranslate('JS_GET_PAGINATION_INFO'),type:'info'}),(0<container.find('.js-pagination-list').data('total-count')||force)&&(params.totalCount='-1',params.view='Pagination',params.mode='getPagination',params.entityState='Trash',params.module=listViewPageDiv.find('.js-source-module').val(),AppConnector.request(params).done(function(data){container.html(data),self.registerPageNavigationEvents();}));},registerEmptyRecycle:function registerEmptyRecycle(){var self=this,container=this.getListViewContainer();container.find('.js-recycle-empty').on('click',function(){Vtiger_Helper_Js.showConfirmationBox({message:app.vtranslate('JS_DELETE_ALL_RECYCLE_RECORD_DESC'),title:app.vtranslate('JS_DELETE_ALL_RECYCLE_RECORD')}).done(function(){var progressIndicatorElement=$.progressIndicator();AppConnector.request({module:'RecycleBin',sourceModule:container.find('.js-source-module').val(),action:'MassDeleteAll',sourceView:'List'}).done(function(data){progressIndicatorElement.progressIndicator({mode:'hide'});var result={text:app.vtranslate('JS_FAILED_TO_SAVE')};data&&data.result&&(result={text:app.vtranslate('JS_ADDED_TO_QUEUE'),type:'success'}),Vtiger_Helper_Js.showMessage(result),self.getListViewRecords();}).fail(function(){progressIndicatorElement.progressIndicator({mode:'hide'});});});});},getListViewRecords:function getListViewRecords(urlParams){var overrideUrlParams={},aDeferred=$.Deferred();return overrideUrlParams.sourceModule=$('.js-source-module').val(),urlParams=$.extend(overrideUrlParams,urlParams),this._super(urlParams).done(function(){aDeferred.resolve();}).fail(function(textStatus,errorThrown){aDeferred.reject(textStatus,errorThrown);}),aDeferred.promise()},registerEvents:function registerEvents(){this._super(),this.registerModuleFilter(),this.registerEmptyRecycle();}});
//# sourceMappingURL=List.min.js.map
