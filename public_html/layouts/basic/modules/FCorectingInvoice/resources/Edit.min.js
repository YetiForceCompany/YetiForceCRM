'use strict';

Vtiger_Edit_Js('FCorectingInvoice_Edit_Js',{},{loadInvoiceData:function loadInvoiceData(){var recordId=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];if(recordId||(recordId=this.getForm().find('input[name="finvoiceid"]').val()),recordId){var form=this.getForm(),progressLoader=$.progressIndicator({blockInfo:{enabled:!0}});AppConnector.request({module:'FInvoice',record:recordId,mode:'showInventoryDetails',view:'Detail'}).done(function(response){form.find('.js-before-inventory').html(response),progressLoader.progressIndicator({mode:'hide'});}).fail(function(){progressLoader.progressIndicator({mode:'hide'});});}},registerReferenceFieldsEvents:function registerReferenceFieldsEvents(){var _this=this;app.event.on('EditView.SelectReference',function(e,params){'FInvoice'===params.source_module&&_this.loadInvoiceData(params.record);});var form=this.getForm();app.event.on('EditView.ClearField',function(e,params){if('finvoiceid'===params.fieldName){var invoiceidInput=form.find('[name="finvoiceid"]');invoiceidInput.length&&form.find('.js-before-inventory').html('<div class="text-center">'+app.vtranslate('JS_FCORECTINGINVOICE_CHOOSE_INVOICE')+'</div>');}});},registerCopyFromInvoice:function registerCopyFromInvoice(){var _this2=this,form=this.getForm(),thisInstance=this,activeModules=this.activeModules=[];form.find('.js-add-item').each(function(index,addBtn){_this2.activeModules.push($(addBtn).data('module'));}),form.find('.js-copy-from-invoice').on('click',function(e){e.preventDefault(),e.stopPropagation();var finvoiceidInput=form.find('input[name="finvoiceid"]');if(!finvoiceidInput.length)return !1;var finvoiceid=finvoiceidInput.val();return finvoiceid?void thisInstance.inventoryController.loadInventoryData(finvoiceid,'FInvoice'):Vtiger_Helper_Js.showMessage({type:'error',text:app.vtranslate('JS_FCORECTINGINVOICE_CHOOSE_INVOICE')})});},registerEvents:function registerEvents(){this._super(),this.registerCopyFromInvoice(),this.registerReferenceFieldsEvents(),this.loadInvoiceData();}});
//# sourceMappingURL=Edit.min.js.map
