'use strict';

Vtiger_Detail_Js('IStorages_Detail_Js',{},{hierarchyResponseCache:{},getHierarchyResponseData:function d(a){var b=this,c=jQuery.Deferred();return jQuery.isEmptyObject(b.hierarchyResponseCache)?AppConnector.request(a).done(function(a){b.hierarchyResponseCache=a,c.resolve(b.hierarchyResponseCache);}):c.resolve(b.hierarchyResponseCache),c.promise()},displayHierarchyResponseData:function c(a){var b=function(){app.showScrollBar(jQuery('#hierarchyScroll'),{height:'300px',railVisible:!0,size:'6px'});};app.showModalWindow(a,function(a){'function'==typeof b&&300<jQuery('#hierarchyScroll').height()&&b(a);});},registerHierarchyRecordCount:function c(){var a=$('.detailViewTitle .hierarchy');if(a.length){var b={module:app.getModuleName(),action:'RelationAjax',record:app.getRecordId(),mode:'getHierarchyCount'};AppConnector.request(b).done(function(a){a.success&&$('.detailViewTitle .hierarchy').append(' <span class="badge">'+a.result+'</span>');});}},registerShowHierarchy:function d(){var a=this,b=$('.detailViewTitle'),c='index.php?module=IStorages&view=Hierarchy&record='+app.getRecordId();b.on('click','.js-detail__icon',function(){a.getHierarchyResponseData(c).done(function(b){a.displayHierarchyResponseData(b);});});},registerEvents:function a(){this._super(),this.registerHierarchyRecordCount(),this.registerShowHierarchy();}});
//# sourceMappingURL=Detail.min.js.map
