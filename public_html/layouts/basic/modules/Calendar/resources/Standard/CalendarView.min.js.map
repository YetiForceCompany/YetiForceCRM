{"version":3,"file":"CalendarView.min.js","sources":["CalendarView.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n/**\n *  Class representing a standard calendar.\n * @extends Calendar_Js\n */\nwindow.Calendar_Calendar_Js = class extends (\n\tCalendar_Js\n) {\n\tsetCalendarModuleOptions() {\n\t\tlet self = this,\n\t\t\toptions = {\n\t\t\t\tselect: function (start, end) {\n\t\t\t\t\tself.selectDays(start, end);\n\t\t\t\t\tself.getCalendarView().fullCalendar('unselect');\n\t\t\t\t},\n\t\t\t\teventClick: function (calEvent, jsEvent, view) {\n\t\t\t\t\tjsEvent.preventDefault();\n\t\t\t\t\tconst link = new URL($(this)[0].href);\n\t\t\t\t\tif (self.createView) {\n\t\t\t\t\t\tlet progressInstance = jQuery.progressIndicator({\n\t\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst callbackFunction = (data) => {\n\t\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t};\n\t\t\t\t\t\tapp.showModalWindow({\n\t\t\t\t\t\t\turl: `index.php?module=${this.module}&view=ActivityStateModal&record=${link.searchParams.get('record')}`,\n\t\t\t\t\t\t\tcb: callbackFunction\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.location.assign(\n\t\t\t\t\t\t\t`index.php?module=${this.module}&view=Detail&record=${link.searchParams.get('record')}`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\treturn options;\n\t}\n\n\tgetValuesFromSelect2(element, data, text) {\n\t\tif (element.hasClass('select2-hidden-accessible')) {\n\t\t\tvar types = element.select2('data');\n\t\t\tfor (var i = 0; i < types.length; i++) {\n\t\t\t\tif (text) {\n\t\t\t\t\tdata.push(types[i].text);\n\t\t\t\t} else {\n\t\t\t\t\tdata.push(types[i].id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t}\n\n\tgetDefaultParams() {\n\t\tlet parentParams = super.getDefaultParams(),\n\t\t\tusers = app.moduleCacheGet('calendar-groups') || [],\n\t\t\tfilters = [];\n\t\t$('.calendarFilters .filterField').each(function () {\n\t\t\tlet element = $(this),\n\t\t\t\tname,\n\t\t\t\tvalue;\n\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\tname = element.val();\n\t\t\t\tvalue = element.prop('checked') ? 1 : 0;\n\t\t\t} else {\n\t\t\t\tname = element.attr('name');\n\t\t\t\tvalue = element.val();\n\t\t\t}\n\t\t\tfilters.push({ name: name, value: value });\n\t\t});\n\t\tlet params = {\n\t\t\ttime: app.getMainParams('showType'),\n\t\t\tfilters: filters\n\t\t};\n\t\tif (users.length) {\n\t\t\tparams.user = parentParams.user.concat(users);\n\t\t\tparams.emptyFilters = false;\n\t\t}\n\t\tparams = Object.assign(parentParams, params);\n\t\treturn params;\n\t}\n\n\tselectDays(startDate, endDate) {\n\t\tvar thisInstance = this;\n\t\tvar start_hour = app.getMainParams('startHour');\n\t\tvar end_hour = app.getMainParams('endHour');\n\t\tif (endDate.hasTime() == false) {\n\t\t\tendDate.add(-1, 'days');\n\t\t}\n\t\tstartDate = startDate.format();\n\t\tendDate = endDate.format();\n\t\tvar view = thisInstance.getCalendarView().fullCalendar('getView');\n\t\tif (start_hour == '') {\n\t\t\tstart_hour = '00';\n\t\t}\n\t\tif (end_hour == '') {\n\t\t\tend_hour = '00';\n\t\t}\n\t\tthis.getCalendarCreateView().done(function (data) {\n\t\t\tif (data.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (view.name != 'agendaDay' && view.name != 'agendaWeek') {\n\t\t\t\tstartDate = startDate + 'T' + start_hour + ':00';\n\t\t\t\tendDate = endDate + 'T' + start_hour + ':00';\n\t\t\t\tif (startDate == endDate) {\n\t\t\t\t\tlet activityType = data.find('[name=\"activitytype\"]').val();\n\t\t\t\t\tlet activityDurations = JSON.parse(data.find('[name=\"defaultOtherEventDuration\"]').val());\n\t\t\t\t\tlet minutes = 0;\n\t\t\t\t\tfor (let i in activityDurations) {\n\t\t\t\t\t\tif (activityDurations[i].activitytype === activityType) {\n\t\t\t\t\t\t\tminutes = parseInt(activityDurations[i].duration);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tendDate = moment(endDate).add(minutes, 'minutes').toISOString();\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar dateFormat = data.find('[name=\"date_start\"]').data('dateFormat').toUpperCase();\n\t\t\tvar timeFormat = data.find('[name=\"time_start\"]').data('format');\n\t\t\tif (timeFormat == 24) {\n\t\t\t\tvar defaultTimeFormat = 'HH:mm';\n\t\t\t} else {\n\t\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t\t}\n\t\t\tvar startDateString = moment(startDate).format(dateFormat);\n\t\t\tvar startTimeString = moment(startDate).format(defaultTimeFormat);\n\t\t\tvar endDateString = moment(endDate).format(dateFormat);\n\t\t\tvar endTimeString = moment(endDate).format(defaultTimeFormat);\n\n\t\t\tdata.find('[name=\"date_start\"]').val(startDateString);\n\t\t\tdata.find('[name=\"due_date\"]').val(endDateString);\n\t\t\tdata.find('[name=\"time_start\"]').val(startTimeString);\n\t\t\tdata.find('[name=\"time_end\"]').val(endTimeString);\n\n\t\t\tApp.Components.QuickCreate.showModal(data, {\n\t\t\t\tcallbackFunction: function (data) {\n\t\t\t\t\tthisInstance.addCalendarEvent(data.result);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tisNewEventToDisplay(eventObject) {\n\t\tif (super.isNewEventToDisplay(eventObject)) {\n\t\t\tlet taskstatus = $.inArray(eventObject.activitystatus.value, ['PLL_POSTPONED', 'PLL_CANCELLED', 'PLL_COMPLETED']);\n\t\t\tvar state = $('.fc-toolbar .js-switch--label-on').last().hasClass('active');\n\t\t\tif ((state === true && taskstatus >= 0) || (state != true && taskstatus == -1)) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tgetCalendarCreateView() {\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\tif (this.calendarCreateView !== false) {\n\t\t\taDeferred.resolve(this.calendarCreateView.clone(true, true));\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t\tvar progressInstance = jQuery.progressIndicator({\n\t\t\tblockInfo: { enabled: true }\n\t\t});\n\t\tthis.loadCalendarCreateView()\n\t\t\t.done(function (data) {\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tthisInstance.calendarCreateView = data;\n\t\t\t\taDeferred.resolve(data.clone(true, true));\n\t\t\t})\n\t\t\t.fail(function (error) {\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\n\tloadCalendarCreateView() {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar url = `index.php?module=${this.module}&view=QuickCreateAjax`;\n\t\tApp.Components.QuickCreate.getForm(url, this.module)\n\t\t\t.done(function (data) {\n\t\t\t\taDeferred.resolve(jQuery(data));\n\t\t\t})\n\t\t\t.fail(function () {\n\t\t\t\taDeferred.reject();\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\n\tswitchTpl(on, off, state) {\n\t\treturn `<div class=\"btn-group btn-group-toggle js-switch c-calendar-switch\" data-toggle=\"buttons\">\n\t\t\t\t\t<label class=\"btn btn-outline-primary c-calendar-switch__button js-switch--label-on ${state ? '' : 'active'}\">\n\t\t\t\t\t\t<input type=\"radio\" name=\"options\" data-on-text=\"${on}\" autocomplete=\"off\" ${state ? '' : 'checked'}>\n\t\t\t\t\t\t${on}\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class=\"btn btn-outline-primary c-calendar-switch__button ${state ? 'active' : ''}\">\n\t\t\t\t\t\t<input type=\"radio\" name=\"options\" data-off-text=\"${off}\" autocomplete=\"off\" ${state ? 'checked' : ''}>\n\t\t\t\t\t\t${off}\n\t\t\t\t\t</label>\n\t\t\t\t</div>`;\n\t}\n\n\tregisterSwitchEvents() {\n\t\tconst calendarview = this.getCalendarView();\n\t\tlet switchHistory,\n\t\t\tswitchAllDays,\n\t\t\tswitchContainer = $(`<div class=\"js-calendar-switch-container\"></div>`).insertAfter(\n\t\t\t\tcalendarview.find('.fc-center')\n\t\t\t);\n\t\tif (app.getMainParams('showType') == 'current' && app.moduleCacheGet('defaultShowType') != 'history') {\n\t\t\tswitchHistory = false;\n\t\t} else {\n\t\t\tswitchHistory = true;\n\t\t}\n\t\t$(this.switchTpl(app.vtranslate('JS_TO_REALIZE'), app.vtranslate('JS_HISTORY'), switchHistory))\n\t\t\t.prependTo(switchContainer)\n\t\t\t.on('change', 'input', (e) => {\n\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('showType', 'current');\n\t\t\t\t\tapp.moduleCacheSet('defaultShowType', 'current');\n\t\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('showType', 'history');\n\t\t\t\t\tapp.moduleCacheSet('defaultShowType', 'history');\n\t\t\t\t}\n\t\t\t\tthis.loadCalendarData();\n\t\t\t});\n\t\tif (app.getMainParams('switchingDays') === 'workDays' && app.moduleCacheGet('defaultSwitchingDays') !== 'all') {\n\t\t\tswitchAllDays = false;\n\t\t} else {\n\t\t\tswitchAllDays = true;\n\t\t}\n\t\tif (app.getMainParams('hiddenDays', true) !== false) {\n\t\t\t$(this.switchTpl(app.vtranslate('JS_WORK_DAYS'), app.vtranslate('JS_ALL'), switchAllDays))\n\t\t\t\t.prependTo(switchContainer)\n\t\t\t\t.on('change', 'input', (e) => {\n\t\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\t\tlet hiddenDays = [];\n\t\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\t\t\tapp.setMainParams('switchingDays', 'workDays');\n\t\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'workDays');\n\t\t\t\t\t\thiddenDays = app.getMainParams('hiddenDays', true);\n\t\t\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\t\t\tapp.setMainParams('switchingDays', 'all');\n\t\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'all');\n\t\t\t\t\t}\n\t\t\t\t\tcalendarview.fullCalendar('option', 'hiddenDays', hiddenDays);\n\t\t\t\t\tthis.registerSwitchEvents();\n\t\t\t\t\tthis.loadCalendarData();\n\t\t\t\t});\n\t\t}\n\t}\n\n\tregisterCacheSettings() {\n\t\tvar thisInstance = this;\n\t\tvar calendar = thisInstance.getCalendarView();\n\t\t$('.siteBarRight .filterField').each(function (index) {\n\t\t\tvar name = $(this).attr('id');\n\t\t\tvar value = app.moduleCacheGet(name);\n\t\t\tvar element = $('#' + name);\n\t\t\tif (element.length > 0 && value != null) {\n\t\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\t\telement.prop('checked', value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tcalendar.find('.fc-toolbar .fc-button').on('click', function (e) {\n\t\t\tlet view;\n\t\t\tlet element = $(e.currentTarget);\n\t\t\tview = calendar.fullCalendar('getView');\n\t\t\tif (element.hasClass('fc-' + view.name + '-button')) {\n\t\t\t\tapp.moduleCacheSet('defaultView', view.name);\n\t\t\t} else if (\n\t\t\t\telement.hasClass('fc-prev-button') ||\n\t\t\t\telement.hasClass('fc-next-button') ||\n\t\t\t\telement.hasClass('fc-today-button')\n\t\t\t) {\n\t\t\t\tapp.moduleCacheSet('start', view.start.format());\n\t\t\t\tapp.moduleCacheSet('end', view.end.format());\n\t\t\t}\n\t\t});\n\t\tvar keys = app.moduleCacheKeys();\n\t\tif (keys.length > 0) {\n\t\t\tvar alert = $('#moduleCacheAlert');\n\t\t\t$('.bodyContents').on('Vtiger.Widget.Load.undefined', function (e, data) {\n\t\t\t\talert.removeClass('d-none');\n\t\t\t});\n\t\t\talert.find('.cacheClear').on('click', function (e) {\n\t\t\t\tapp.moduleCacheClear();\n\t\t\t\talert.addClass('d-none');\n\t\t\t\tlocation.reload();\n\t\t\t});\n\t\t}\n\t}\n\n\tregisterEvents() {\n\t\tsuper.registerEvents();\n\t\tthis.registerCacheSettings();\n\t\tthis.registerSwitchEvents();\n\t}\n};\n"],"names":["window","Calendar_Calendar_Js","self","select","start","end","selectDays","getCalendarView","fullCalendar","eventClick","calEvent","jsEvent","preventDefault","link","URL","$","href","createView","progressInstance","jQuery","progressIndicator","blockInfo","enabled","callbackFunction","mode","app","showModalWindow","url","module","searchParams","get","cb","location","assign","element","data","text","hasClass","types","select2","i","length","push","id","parentParams","users","moduleCacheGet","filters","each","name","value","attr","val","prop","params","time","getMainParams","user","concat","emptyFilters","Object","startDate","endDate","thisInstance","start_hour","end_hour","hasTime","add","format","view","getCalendarCreateView","done","activityType","find","activityDurations","JSON","parse","minutes","activitytype","parseInt","duration","moment","toISOString","dateFormat","toUpperCase","timeFormat","defaultTimeFormat","startDateString","startTimeString","endDateString","endTimeString","App","Components","QuickCreate","showModal","addCalendarEvent","result","eventObject","taskstatus","inArray","activitystatus","state","last","aDeferred","Deferred","calendarCreateView","resolve","clone","promise","loadCalendarCreateView","fail","error","console","getForm","reject","on","off","switchHistory","switchAllDays","calendarview","switchContainer","insertAfter","switchTpl","vtranslate","prependTo","e","currentTarget","setMainParams","moduleCacheSet","loadCalendarData","hiddenDays","registerSwitchEvents","calendar","keys","moduleCacheKeys","alert","removeClass","moduleCacheClear","addClass","reload","registerCacheSettings","Calendar_Js"],"mappings":"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"}