{"version":3,"file":"CalendarView.min.js","sources":["CalendarView.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n/**\n *  Class representing an extended calendar.\n * @extends Calendar_Calendar_Js\n */\nwindow.calendarLoaded = false; //Global calendar flag needed for correct loading data from history browser in year view\nwindow.Calendar_CalendarExtended_Js = class extends Calendar_Calendar_Js {\n\tconstructor(container, readonly) {\n\t\tsuper(container, readonly);\n\t\tthis.sidebarView = {\n\t\t\tlength: 0\n\t\t};\n\t\tthis.calendarContainer = false;\n\t\tthis.addCommonMethodsToYearView();\n\t\tthis.calendar = this.getCalendarView();\n\t}\n\n\t/**\n\t * Function extends FC.views.year with current class methods\n\t */\n\taddCommonMethodsToYearView() {\n\t\tconst self = this;\n\t\tFC.views.year = FC.views.year.extend({\n\t\t\tselectDays: self.selectDays,\n\t\t\tgetCalendarCreateView: self.getCalendarCreateView,\n\t\t\tgetSidebarView: self.getSidebarView,\n\t\t\tgetCurrentCvId: self.getCurrentCvId,\n\t\t\tgetCalendarView: self.getCalendarView,\n\t\t\tshowRightPanelForm: self.showRightPanelForm,\n\t\t\tgetSelectedUsersCalendar: self.getSelectedUsersCalendar,\n\t\t\tregisterClearFilterButton: self.registerClearFilterButton,\n\t\t\tclearFilterButton: self.clearFilterButton,\n\t\t\tregisterFilterTabChange: self.registerFilterTabChange,\n\t\t\tsidebarView: self.sidebarView,\n\t\t\tregisterAfterSubmitForm: self.registerAfterSubmitForm,\n\t\t\tregisterViewRenderEvents: self.registerViewRenderEvents,\n\t\t\tappendSubDateRow: self.appendSubDateRow,\n\t\t\trefreshDatesRowView: self.refreshDatesRowView,\n\t\t\tgenerateYearList: self.generateYearList,\n\t\t\tupdateCountTaskCalendar: self.updateCountTaskCalendar,\n\t\t\tregisterDatesChange: self.registerDatesChange,\n\t\t\taddHeaderButtons: self.addHeaderButtons,\n\t\t\tbrowserHistoryConfig: self.browserHistoryConfig,\n\t\t\treadonly: self.readonly,\n\t\t\tcontainer: self.container,\n\t\t\tmodule: self.module,\n\t\t\tshowChangeDateButtons: self.showChangeDateButtons,\n\t\t\tshowTodayButtonCheckbox: self.showTodayButtonCheckbox\n\t\t});\n\t}\n\n\t/**\n\t * Render calendar\n\t */\n\trenderCalendar() {\n\t\tlet self = this,\n\t\t\tbasicOptions = this.setCalendarOptions(),\n\t\t\toptions = {\n\t\t\t\theader: {\n\t\t\t\t\tleft: 'year,month,' + app.getMainParams('weekView') + ',' + app.getMainParams('dayView'),\n\t\t\t\t\tcenter: 'prevYear,prev,title,next,nextYear',\n\t\t\t\t\tright: 'today'\n\t\t\t\t},\n\t\t\t\tviews: {\n\t\t\t\t\tbasic: {\n\t\t\t\t\t\teventLimit: false\n\t\t\t\t\t},\n\t\t\t\t\tyear: {\n\t\t\t\t\t\teventLimit: 10,\n\t\t\t\t\t\teventLimitText: app.vtranslate('JS_COUNT_RECORDS'),\n\t\t\t\t\t\ttitleFormat: 'YYYY',\n\t\t\t\t\t\tselect: function(start, end) {},\n\t\t\t\t\t\tloadView: function() {\n\t\t\t\t\t\t\tself.getCalendarView()\n\t\t\t\t\t\t\t\t.fullCalendar('getCalendar')\n\t\t\t\t\t\t\t\t.view.render();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmonth: {\n\t\t\t\t\t\ttitleFormat: this.parseDateFormat('month'),\n\t\t\t\t\t\tloadView: function() {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tweek: {\n\t\t\t\t\t\ttitleFormat: this.parseDateFormat('week'),\n\t\t\t\t\t\tloadView: function() {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tday: {\n\t\t\t\t\t\ttitleFormat: this.parseDateFormat('day'),\n\t\t\t\t\t\tloadView: function() {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tbasicDay: {\n\t\t\t\t\t\ttype: 'agendaDay',\n\t\t\t\t\t\tloadView: function() {\n\t\t\t\t\t\t\tself.loadCalendarData();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tselect: function(start, end) {\n\t\t\t\t\tself.selectDays(start, end);\n\t\t\t\t\tself.getCalendarView().fullCalendar('unselect');\n\t\t\t\t},\n\t\t\t\teventRender: function(event, element) {\n\t\t\t\t\tself.eventRenderer(event, element);\n\t\t\t\t},\n\t\t\t\tviewRender: function(view, element) {\n\t\t\t\t\tif (view.type !== 'year') {\n\t\t\t\t\t\tself.loadCalendarData(view);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\taddCalendarEvent(calendarDetails) {\n\t\t\t\t\tself.getCalendarView().fullCalendar('renderEvent', self.getEventData(calendarDetails));\n\t\t\t\t}\n\t\t\t};\n\t\toptions = Object.assign(basicOptions, options);\n\t\tif (!this.readonly && self.eventEdit) {\n\t\t\toptions.eventClick = function(calEvent, jsEvent) {\n\t\t\t\tjsEvent.preventDefault();\n\t\t\t\tself.getCalendarSidebarData($(this).attr('href'));\n\t\t\t};\n\t\t} else {\n\t\t\toptions.eventClick = function(calEvent, jsEvent) {\n\t\t\t\tjsEvent.preventDefault();\n\t\t\t\tconst link = new URL($(this)[0].href);\n\t\t\t\twindow.location.assign(\n\t\t\t\t\t`index.php?module=${this.module}&view=Detail&record=${link.searchParams.get('record')}`\n\t\t\t\t);\n\t\t\t};\n\t\t}\n\t\tthis.calendar.fullCalendar(options);\n\t}\n\n\tregisterChangeView() {}\n\n\taddHeaderButtons() {\n\t\tif (this.calendarContainer.find('.js-calendar__view-btn').length) {\n\t\t\treturn;\n\t\t}\n\t\tlet buttonsContainer = this.calendarContainer.prev('.js-calendar__header-buttons'),\n\t\t\tviewBtn = buttonsContainer.find('.js-calendar__view-btn').clone(),\n\t\t\tfilters = buttonsContainer.find('.js-calendar__filter-container').clone();\n\t\tthis.calendarContainer.find('.fc-left').prepend(viewBtn);\n\t\tthis.calendarContainer.find('.fc-center').after(filters);\n\t\tthis.registerClearFilterButton();\n\t\tthis.registerFilterTabChange();\n\t}\n\n\tregisterSwitchEvents() {\n\t\tconst calendarView = this.getCalendarView();\n\t\tlet isWorkDays,\n\t\t\tswitchShowTypeVal,\n\t\t\tswitchContainer = $('.js-calendar__tab--filters'),\n\t\t\tswitchShowType = switchContainer.find('.js-switch--showType'),\n\t\t\tswitchSwitchingDays = switchContainer.find('.js-switch--switchingDays');\n\t\tlet historyParams = app.getMainParams('historyParams', true);\n\t\tif (historyParams === '') {\n\t\t\t(isWorkDays =\n\t\t\t\tapp.getMainParams('switchingDays') === 'workDays' &&\n\t\t\t\tapp.moduleCacheGet('defaultSwitchingDays') !== 'all'),\n\t\t\t\t(switchShowTypeVal =\n\t\t\t\t\tapp.getMainParams('showType') === 'current' && app.moduleCacheGet('defaultShowType') !== 'history');\n\t\t\tif (!switchShowTypeVal) {\n\t\t\t\tswitchShowType.find('.js-switch--label-off').button('toggle');\n\t\t\t}\n\t\t} else {\n\t\t\tapp.setMainParams('showType', historyParams.time);\n\t\t\tapp.setMainParams('switchingDays', historyParams.hiddenDays === '' ? 'all' : 'workDays');\n\t\t}\n\t\tswitchShowType.on('change', 'input', e => {\n\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\tapp.setMainParams('showType', 'current');\n\t\t\t\tapp.moduleCacheSet('defaultShowType', 'current');\n\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\tapp.setMainParams('showType', 'history');\n\t\t\t\tapp.moduleCacheSet('defaultShowType', 'history');\n\t\t\t}\n\t\t\tcalendarView.fullCalendar('getCalendar').view.options.loadView();\n\t\t});\n\t\t$('label.active', switchShowType)\n\t\t\t.find('input')\n\t\t\t.filter(':first')\n\t\t\t.change();\n\t\tif (switchSwitchingDays.length) {\n\t\t\tif (typeof isWorkDays !== 'undefined' && !isWorkDays) {\n\t\t\t\tswitchSwitchingDays.find('.js-switch--label-off').button('toggle');\n\t\t\t}\n\t\t\tswitchSwitchingDays.on('change', 'input', e => {\n\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\tlet hiddenDays = [];\n\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('switchingDays', 'workDays');\n\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'workDays');\n\t\t\t\t\thiddenDays = app.getMainParams('hiddenDays', true);\n\t\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('switchingDays', 'all');\n\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'all');\n\t\t\t\t}\n\t\t\t\tcalendarView.fullCalendar('option', 'hiddenDays', hiddenDays);\n\t\t\t\tcalendarView.fullCalendar('option', 'height', this.setCalendarHeight());\n\t\t\t\tif (calendarView.fullCalendar('getView').type === 'year') {\n\t\t\t\t\tthis.registerViewRenderEvents(calendarView.fullCalendar('getView'));\n\t\t\t\t}\n\t\t\t});\n\t\t\t$('label.active', switchSwitchingDays)\n\t\t\t\t.find('input')\n\t\t\t\t.filter(':first')\n\t\t\t\t.change();\n\t\t}\n\t}\n\n\t/**\n\t * Appends subdate row to calendar header and register its scroll\n\t * @param toolbar\n\t */\n\tappendSubDateRow(toolbar) {\n\t\tif (!this.calendarContainer.find('.js-dates-row').length) {\n\t\t\tthis.subDateRow = $(`\n\t\t\t\t\t\t\t\t<div class=\"js-scroll js-dates-row u-overflow-auto-lg-down order-4 flex-grow-1 position-relative my-1 w-100\" data-js=\"perfectScrollbar | container\">\n\t\t\t\t\t\t\t\t\t<div class=\"d-flex flex-nowrap w-100\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"js-sub-date-list w-100 sub-date-list row no-gutters flex-nowrap nav nav-tabs\" data-js=\"data-type\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`);\n\t\t\ttoolbar.append(this.subDateRow);\n\t\t\tif ($(window).width() > app.breakpoints.lg) {\n\t\t\t\tapp.showNewScrollbar(this.subDateRow);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Function toggles next year/month and general arrows on view render\n\t * @param view\n\t * @param element\n\t */\n\tregisterViewRenderEvents(view) {\n\t\tthis.calendarContainer = this.getCalendarView();\n\t\tlet toolbar = this.calendarContainer.find('.fc-toolbar.fc-header-toolbar');\n\t\tthis.showChangeDateButtons(view, toolbar);\n\t\tthis.appendSubDateRow(toolbar);\n\t\tthis.refreshDatesRowView(view);\n\t\tthis.addHeaderButtons();\n\t\tthis.showTodayButtonCheckbox(toolbar);\n\t}\n\n\t/**\n\t * Function appends and shows today button's checkbox\n\t * @param {jQuery} toolbar\n\t */\n\tshowTodayButtonCheckbox(toolbar) {\n\t\tlet todayButton = toolbar.find('.fc-today-button'),\n\t\t\ttodyButtonIcon = todayButton.hasClass('fc-state-disabled') ? 'fa-calendar-check' : 'fa-calendar',\n\t\t\tpopoverContent = `${app.vtranslate('JS_CURRENT')} ${toolbar\n\t\t\t\t.find('.fc-state-active')\n\t\t\t\t.text()\n\t\t\t\t.toLowerCase()}`;\n\t\ttodayButton.removeClass('.fc-button');\n\t\ttodayButton.html(\n\t\t\t`<div class=\"js-popover-tooltip--day-btn\" data-toggle=\"popover\"><span class=\"far fa-lg ${todyButtonIcon}\"></span></div>`\n\t\t);\n\t\tapp.showPopoverElementView(todayButton.find('.js-popover-tooltip--day-btn'), {\n\t\t\tcontent: popoverContent,\n\t\t\tcontainer: '.fc-today-button .js-popover-tooltip--day-btn'\n\t\t});\n\t}\n\n\t/**\n\t * Function shows change date buttons in calendar's header for specific view\n\t * @param view\n\t * @param toolbar\n\t */\n\tshowChangeDateButtons(view, toolbar) {\n\t\tlet viewType = view.type.replace(/basic|agenda/g, '').toLowerCase(),\n\t\t\tnextPrevButtons = toolbar.find('.fc-prev-button, .fc-next-button'),\n\t\t\tyearButtons = toolbar.find('.fc-prevYear-button, .fc-nextYear-button');\n\t\tif (!window.calendarLoaded) {\n\t\t\tyearButtons.first().html(`<span class=\"fas fa-xs fa-minus mr-1\"></span>${view.options.buttonText['year']}`);\n\t\t\tyearButtons.last().html(`${view.options.buttonText['year']}<span class=\"fas fa-xs fa-plus ml-1\"></span>`);\n\t\t}\n\t\tif (view.type !== 'year') {\n\t\t\tnextPrevButtons\n\t\t\t\t.first()\n\t\t\t\t.html(`<span class=\"fas fa-xs fa-minus mr-1\"></span>${view.options.buttonText[viewType]}`);\n\t\t\tnextPrevButtons\n\t\t\t\t.last()\n\t\t\t\t.html(`${view.options.buttonText[viewType]}<span class=\"fas fa-xs fa-plus ml-1\"></span>`);\n\t\t}\n\t\tif (view.type === 'year') {\n\t\t\tnextPrevButtons.hide();\n\t\t\tyearButtons.show();\n\t\t} else if (view.type === 'month') {\n\t\t\tnextPrevButtons.show();\n\t\t\tyearButtons.show();\n\t\t} else {\n\t\t\tnextPrevButtons.show();\n\t\t\tyearButtons.hide();\n\t\t}\n\t}\n\n\t/**\n\t * Date bar with counts\n\t * @param object calendarView\n\t */\n\trefreshDatesRowView(calendarView) {\n\t\tconst self = this;\n\t\tswitch (calendarView.type) {\n\t\t\tcase 'year':\n\t\t\t\tself.generateYearList(calendarView.intervalStart, calendarView.intervalEnd);\n\t\t\t\tbreak;\n\t\t\tcase 'month':\n\t\t\t\tself.generateSubMonthList(calendarView.intervalStart, calendarView.intervalEnd);\n\t\t\t\tbreak;\n\t\t\tcase 'week':\n\t\t\tcase 'agendaWeek':\n\t\t\t\tself.generateSubWeekList(calendarView.start, calendarView.end);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.generateSubDaysList(calendarView.start, calendarView.end);\n\t\t}\n\t\tself.updateCountTaskCalendar();\n\t\tself.registerDatesChange();\n\t}\n\n\tregisterDatesChange() {\n\t\tthis.container.find('.js-dates-row .js-sub-record').on('click', e => {\n\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\tcurrentTarget.addClass('active');\n\t\t\tthis.getCalendarView().fullCalendar('gotoDate', moment(currentTarget.data('date'), 'YYYY-MM-DD'));\n\t\t});\n\t}\n\n\tgetCurrentCvId() {\n\t\treturn $('.js-calendar__extended-filter-tab .active')\n\t\t\t.parent('.js-filter-tab')\n\t\t\t.data('cvid');\n\t}\n\n\tregisterFilterTabChange() {\n\t\tconst thisInstance = this;\n\t\tthis.getCalendarView()\n\t\t\t.find('.js-calendar__extended-filter-tab')\n\t\t\t.on('shown.bs.tab', function() {\n\t\t\t\tthisInstance\n\t\t\t\t\t.getCalendarView()\n\t\t\t\t\t.fullCalendar('getCalendar')\n\t\t\t\t\t.view.options.loadView();\n\t\t\t});\n\t}\n\n\tgetSelectedUsersCalendar() {\n\t\tconst sidebar = this.getSidebarView();\n\t\tlet selectedUsers = sidebar.find('.js-input-user-owner-id:checked'),\n\t\t\tselectedUsersAjax = sidebar.find('.js-input-user-owner-id-ajax'),\n\t\t\tselectedRolesAjax = sidebar.find('.js-input-role-owner-id-ajax'),\n\t\t\tusers = [];\n\t\tif (selectedUsers.length > 0) {\n\t\t\tselectedUsers.each(function() {\n\t\t\t\tusers.push($(this).val());\n\t\t\t});\n\t\t} else if (selectedUsersAjax.length > 0) {\n\t\t\tusers = selectedUsersAjax.val().concat(selectedRolesAjax.val());\n\t\t}\n\t\treturn users;\n\t}\n\n\tgetSidebarView() {\n\t\tif (!this.sidebarView.length) {\n\t\t\tthis.sidebarView = this.container.find('.js-calendar-right-panel');\n\t\t}\n\t\treturn this.sidebarView;\n\t}\n\n\tupdateCountTaskCalendar() {\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tsubDatesElements = datesView.find('.js-sub-record'),\n\t\t\tdateArray = {},\n\t\t\tuserDateFormat = CONFIG.dateFormat.toUpperCase(),\n\t\t\tuser = this.getSelectedUsersCalendar();\n\t\tif (user.length === 0) {\n\t\t\tuser = app.getMainParams('usersId');\n\t\t}\n\t\tif (user === undefined) {\n\t\t\tuser = [app.getMainParams('userId')];\n\t\t}\n\t\tsubDatesElements.each(function(key, element) {\n\t\t\tlet data = $(this).data('date'),\n\t\t\t\ttype = $(this).data('type');\n\t\t\tif (type === 'years') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data + '-01').format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data + '-01')\n\t\t\t\t\t\t.endOf('year')\n\t\t\t\t\t\t.format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t} else if (type === 'months') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data)\n\t\t\t\t\t\t.endOf('month')\n\t\t\t\t\t\t.format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t} else if (type === 'weeks') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data)\n\t\t\t\t\t\t.add(6, 'day')\n\t\t\t\t\t\t.format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t} else if (type === 'days') {\n\t\t\t\tdateArray[key] = [\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 00:00:00',\n\t\t\t\t\tmoment(data).format(userDateFormat) + ' 23:59:59'\n\t\t\t\t];\n\t\t\t}\n\t\t});\n\t\tAppConnector.request({\n\t\t\tmodule: this.module,\n\t\t\taction: 'Calendar',\n\t\t\tmode: 'getCountEventsGroup',\n\t\t\tdates: dateArray,\n\t\t\tuser: user,\n\t\t\ttime: app.getMainParams('showType'),\n\t\t\tcvid: this.getCurrentCvId()\n\t\t}).done(function(events) {\n\t\t\tsubDatesElements.each(function(key, element) {\n\t\t\t\t$(this)\n\t\t\t\t\t.find('.js-count-events')\n\t\t\t\t\t.removeClass('hide')\n\t\t\t\t\t.html(events.result[key]);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Register events to EditView\n\t * @param {jQuery} sideBar\n\t */\n\tregisterEditForm(sideBar) {\n\t\tlet editViewInstance = Vtiger_Edit_Js.getInstanceByModuleName(sideBar.find('[name=\"module\"]').val()),\n\t\t\theaderInstance = new Vtiger_Header_Js(),\n\t\t\tparams = [];\n\t\tlet rightFormCreate = sideBar.find('form[name=\"QuickCreate\"]');\n\t\teditViewInstance.registerBasicEvents(rightFormCreate);\n\t\trightFormCreate.validationEngine(app.validationEngineOptions);\n\t\theaderInstance.registerHelpInfo(rightFormCreate);\n\t\tApp.Fields.Picklist.showSelect2ElementView(sideBar.find('select'));\n\t\tsideBar.find('.js-summary-close-edit').on('click', () => {\n\t\t\tthis.getCalendarCreateView();\n\t\t});\n\t\tparams.callbackFunction = this.registerAfterSubmitForm(this, rightFormCreate);\n\t\theaderInstance.registerQuickCreatePostLoadEvents(rightFormCreate, params);\n\t\tnew App.Fields.Text.Editor(sideBar.find('.js-editor'), { height: '5em', toolbar: 'Min' });\n\t}\n\n\t/**\n\t * EditView\n\t * @param {Object}|{number} params\n\t */\n\tgetCalendarSidebarData(params) {\n\t\tconst thisInstance = this,\n\t\t\taDeferred = $.Deferred();\n\t\tconst progressInstance = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\tif ($.isNumeric(params)) {\n\t\t\tparams = {\n\t\t\t\tmodule: this.module,\n\t\t\t\tview: 'EventForm',\n\t\t\t\trecord: params\n\t\t\t};\n\t\t}\n\t\tAppConnector.request(params)\n\t\t\t.done(data => {\n\t\t\t\tthisInstance.openRightPanel();\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tlet sidebar = thisInstance.getSidebarView();\n\t\t\t\tthis.updateSidebar(sidebar, data);\n\t\t\t\tif (sidebar.find('form').length) {\n\t\t\t\t\tthisInstance.registerEditForm(sidebar);\n\t\t\t\t} else {\n\t\t\t\t\tapp.showNewScrollbar(sidebar.find('.js-calendar__form__wrapper'), { suppressScrollX: true });\n\t\t\t\t\tsidebar.find('.js-activity-state .js-summary-close-edit').on('click', function() {\n\t\t\t\t\t\tthisInstance.getCalendarCreateView();\n\t\t\t\t\t});\n\t\t\t\t\tsidebar.find('.js-activity-state .editRecord').on('click', function() {\n\t\t\t\t\t\tthisInstance.getCalendarSidebarData($(this).data('id'));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\taDeferred.resolve(sidebar.find('.js-qc-form'));\n\t\t\t})\n\t\t\t.fail(error => {\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tapp.errorLog(error);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\n\t/**\n\t * Update sidebar\n\t * @param {jQuery} sidebar\n\t * @param {html} data\n\t */\n\tupdateSidebar(sidebar, data) {\n\t\tsidebar.find('.js-qc-form').html(data);\n\t\tthis.showRightPanelForm();\n\t}\n\tloadCalendarData(view = this.getCalendarView().fullCalendar('getView')) {\n\t\tconst self = this;\n\t\tlet formatDate = CONFIG.dateFormat.toUpperCase(),\n\t\t\tcvid = self.getCurrentCvId(),\n\t\t\tcalendarInstance = this.getCalendarView();\n\t\tcalendarInstance.fullCalendar('removeEvents');\n\t\tlet progressInstance = $.progressIndicator({ blockInfo: { enabled: true } }),\n\t\t\tuser = self.getSelectedUsersCalendar();\n\t\tif (0 === user.length) {\n\t\t\tuser = app.getMainParams('usersId');\n\t\t}\n\t\tif (user === undefined) {\n\t\t\tuser = [app.getMainParams('userId')];\n\t\t}\n\t\tself.clearFilterButton(user, cvid);\n\t\tif (view.type === 'agendaDay') {\n\t\t\tself.selectDays(view.start, view.end);\n\t\t\tview.end = view.end.add(1, 'day');\n\t\t}\n\t\tlet options = {\n\t\t\tmodule: this.module,\n\t\t\taction: 'Calendar',\n\t\t\tmode: 'getEvents',\n\t\t\tstart: view.start.format(formatDate),\n\t\t\tend: view.end.format(formatDate),\n\t\t\tuser: user,\n\t\t\ttime: app.getMainParams('showType'),\n\t\t\tcvid: cvid,\n\t\t\thistoryUrl: `index.php?module=${this.module}&view=CalendarExtended&history=true&viewType=${\n\t\t\t\tview.type\n\t\t\t}&start=${view.start.format(formatDate)}&end=${view.end.format(\n\t\t\t\tformatDate\n\t\t\t)}&user=${user}&time=${app.getMainParams('showType')}&cvid=${cvid}&hiddenDays=${view.options.hiddenDays}`\n\t\t};\n\t\tlet connectorMethod = window['AppConnector']['request'];\n\t\tif (this.browserHistory && window.calendarLoaded) {\n\t\t\tconnectorMethod = window['AppConnector']['requestPjax'];\n\t\t}\n\t\tif (this.browserHistoryConfig && Object.keys(this.browserHistoryConfig).length && !window.calendarLoaded) {\n\t\t\toptions = Object.assign(options, {\n\t\t\t\tstart: this.browserHistoryConfig.start,\n\t\t\t\tend: this.browserHistoryConfig.end,\n\t\t\t\tuser: this.browserHistoryConfig.user,\n\t\t\t\ttime: this.browserHistoryConfig.time,\n\t\t\t\tcvid: this.browserHistoryConfig.cvid\n\t\t\t});\n\t\t\tconnectorMethod = window['AppConnector']['request'];\n\t\t\tapp.setMainParams('showType', this.browserHistoryConfig.time);\n\t\t\tapp.setMainParams('usersId', this.browserHistoryConfig.user);\n\t\t}\n\t\tconnectorMethod(options).done(events => {\n\t\t\tcalendarInstance.fullCalendar('removeEvents');\n\t\t\tcalendarInstance.fullCalendar('addEventSource', events.result);\n\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t});\n\t\tself.registerViewRenderEvents(view);\n\t\twindow.calendarLoaded = true;\n\t}\n\n\tclearFilterButton(user, cvid) {\n\t\tlet currentUser = parseInt(app.getMainParams('userId')),\n\t\t\ttime = app.getMainParams('showType'),\n\t\t\tstatement =\n\t\t\t\t(user.length === 0 || (user.length === 1 && parseInt(user) === currentUser)) &&\n\t\t\t\tcvid === undefined &&\n\t\t\t\ttime === 'current';\n\t\t$('.js-calendar__clear-filters').toggleClass('d-none', statement);\n\t}\n\n\tregisterClearFilterButton() {\n\t\tconst sidebar = this.getSidebarView(),\n\t\t\tcalendarView = this.getCalendarView();\n\t\tlet clearBtn = calendarView.find('.js-calendar__clear-filters');\n\t\tapp.showPopoverElementView(clearBtn);\n\t\tclearBtn.on('click', () => {\n\t\t\t$('.js-calendar__extended-filter-tab a').removeClass('active');\n\t\t\tapp.setMainParams('showType', 'current');\n\t\t\tapp.moduleCacheSet('defaultShowType', 'current');\n\t\t\tsidebar.find('input:checkbox').prop('checked', false);\n\t\t\tsidebar.find('option:selected').prop('selected', false);\n\t\t\tlet calendarSwitch = sidebar.find('.js-switch--showType [class*=\"js-switch--label\"]'),\n\t\t\t\tactualUserCheckbox = sidebar.find('.js-input-user-owner-id[value=' + app.getMainParams('userId') + ']');\n\t\t\tcalendarSwitch.last().removeClass('active');\n\t\t\tcalendarSwitch.first().addClass('active');\n\t\t\tif (actualUserCheckbox.length) {\n\t\t\t\tactualUserCheckbox.prop('checked', true);\n\t\t\t} else {\n\t\t\t\tapp.setMainParams('usersId', undefined);\n\t\t\t}\n\t\t\tcalendarView.fullCalendar('getCalendar').view.options.loadView();\n\t\t});\n\t}\n\n\tgenerateYearList(dateStart, dateEnd) {\n\t\tconst datesView = this.container.find('.js-dates-row');\n\t\tlet prevYear = moment(dateStart).subtract(1, 'year'),\n\t\t\tactualYear = moment(dateStart),\n\t\t\tnextYear = moment(dateStart).add(1, 'year'),\n\t\t\thtml = '',\n\t\t\tactive = '';\n\t\twhile (prevYear <= nextYear) {\n\t\t\tif (prevYear.format('YYYY') === actualYear.format('YYYY')) {\n\t\t\t\tactive = 'active';\n\t\t\t} else {\n\t\t\t\tactive = '';\n\t\t\t}\n\t\t\thtml += `<div class=\"js-sub-record sub-record col-4 nav-item\" data-date=\"${prevYear.format(\n\t\t\t\t'YYYY'\n\t\t\t)}\" data-type=\"years\" data-js=\"click | class: active\">\n\t\t\t\t\t<div class=\"sub-record-content nav-link ${active}\">\n\t\t\t\t\t\t<div class=\"sub-date-name\">\n\t\t\t\t\t\t\t${prevYear.format('YYYY')}\n\t\t\t\t\t\t\t<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t\tprevYear = moment(prevYear).add(1, 'year');\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\n\tgenerateSubMonthList(dateStart, dateEnd) {\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tactiveMonth =\n\t\t\t\tparseInt(\n\t\t\t\t\tmoment(dateStart)\n\t\t\t\t\t\t.locale('en')\n\t\t\t\t\t\t.format('M')\n\t\t\t\t) - 1,\n\t\t\thtml = '',\n\t\t\tactive = '';\n\t\tfor (let month = 0; 12 > month; ++month) {\n\t\t\tif (month === activeMonth) {\n\t\t\t\tactive = 'active';\n\t\t\t} else {\n\t\t\t\tactive = '';\n\t\t\t}\n\t\t\thtml += `<div class=\"js-sub-record sub-record nav-item col-1 px-0\" data-type=\"months\" data-date=\"${moment(\n\t\t\t\tdateStart\n\t\t\t)\n\t\t\t\t.month(month)\n\t\t\t\t.format('YYYY-MM')}\" data-js=\"click | class: active\">\n\t\t\t\t\t<div class=\"sub-record-content nav-link ${active}\">\n\t\t\t\t\t\t<div class=\"sub-date-name\">${app\n\t\t\t\t\t\t\t.vtranslate(\n\t\t\t\t\t\t\t\t'JS_' +\n\t\t\t\t\t\t\t\t\tmoment()\n\t\t\t\t\t\t\t\t\t\t.month(month)\n\t\t\t\t\t\t\t\t\t\t.format('MMM')\n\t\t\t\t\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.toUpperCase()}\n\t\t\t\t\t\t\t<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\n\tgenerateSubWeekList(dateStart, dateEnd) {\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tprevWeeks = moment(dateStart).subtract(5, 'weeks'),\n\t\t\tactualWeek = moment(dateStart).format('WW'),\n\t\t\tnextWeeks = moment(dateStart).add(6, 'weeks'),\n\t\t\thtml = '';\n\t\twhile (prevWeeks <= nextWeeks) {\n\t\t\tlet active = '';\n\t\t\tif (prevWeeks.format('WW') === actualWeek) {\n\t\t\t\tactive = ' active';\n\t\t\t}\n\t\t\thtml +=\n\t\t\t\t'<div class=\"js-sub-record sub-record nav-item col-1 px-0\" data-type=\"weeks\" data-date=\"' +\n\t\t\t\tprevWeeks.format('YYYY-MM-DD') +\n\t\t\t\t'\" data-js=\"click | class: active\">' +\n\t\t\t\t'<div class=\"sub-record-content nav-link' +\n\t\t\t\tactive +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sub-date-name\">' +\n\t\t\t\tapp.vtranslate('JS_WEEK_SHORT') +\n\t\t\t\t' ' +\n\t\t\t\tprevWeeks.format('WW') +\n\t\t\t\t'<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>';\n\t\t\tprevWeeks = moment(prevWeeks).add(1, 'weeks');\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\n\tgenerateSubDaysList(dateStart, dateEnd) {\n\t\tlet datesView = this.container.find('.js-dates-row'),\n\t\t\tprevDays = moment(dateStart).subtract(5, 'days'),\n\t\t\tactualDay = moment(dateStart).format('DDD'),\n\t\t\tnextDays = moment(dateStart).add(7, 'days'),\n\t\t\tdaysToShow = nextDays.diff(prevDays, 'days'),\n\t\t\thtml = '';\n\t\tfor (let day = 0; day < daysToShow; ++day) {\n\t\t\tlet active = '';\n\t\t\tif (\n\t\t\t\tapp.getMainParams('switchingDays') === 'workDays' &&\n\t\t\t\tapp.moduleCacheGet('defaultSwitchingDays') !== 'all'\n\t\t\t) {\n\t\t\t\tif ($.inArray(prevDays.day(), app.getMainParams('hiddenDays', true)) !== -1) {\n\t\t\t\t\tprevDays = moment(prevDays).add(1, 'days');\n\t\t\t\t\tdaysToShow++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (prevDays.format('DDD') === actualDay) {\n\t\t\t\tactive = ' active';\n\t\t\t}\n\t\t\thtml +=\n\t\t\t\t'<div class=\"js-sub-record sub-record nav-item col-1 px-0\" data-type=\"days\" data-date=\"' +\n\t\t\t\tprevDays.format('YYYY-MM-DD') +\n\t\t\t\t'\" data-js=\"click | class: active\">' +\n\t\t\t\t'<div class=\"sub-record-content nav-link' +\n\t\t\t\tactive +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sub-date-name\">' +\n\t\t\t\tapp.vtranslate('JS_DAY_SHORT') +\n\t\t\t\t' ' +\n\t\t\t\tprevDays.format('DD') +\n\t\t\t\t'<div class=\"js-count-events count badge c-badge--md ml-1\" data-js=\"html\">0</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>';\n\t\t\tprevDays = moment(prevDays).add(1, 'days');\n\t\t}\n\t\tdatesView.find('.js-sub-date-list').html(html);\n\t}\n\n\tselectDays(startDate, endDate) {\n\t\tthis.container.find('.js-right-panel-event-link').tab('show');\n\t\tlet start_hour = app.getMainParams('startHour'),\n\t\t\tend_hour = app.getMainParams('endHour'),\n\t\t\tview = this.getCalendarView().fullCalendar('getView');\n\t\tif (endDate.hasTime() == false) {\n\t\t\tendDate.add(-1, 'days');\n\t\t}\n\t\tstartDate = startDate.format();\n\t\tendDate = endDate.format();\n\t\tif (start_hour == '') {\n\t\t\tstart_hour = '00';\n\t\t}\n\t\tif (end_hour == '') {\n\t\t\tend_hour = '00';\n\t\t}\n\t\tthis.getCalendarCreateView().done(function(data) {\n\t\t\tif (data.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (view.name != 'agendaDay' && view.name != 'agendaWeek') {\n\t\t\t\tstartDate = startDate + 'T' + start_hour + ':00';\n\t\t\t\tendDate = endDate + 'T' + end_hour + ':00';\n\t\t\t\tif (startDate == endDate) {\n\t\t\t\t\tlet activityType = data.find('[name=\"activitytype\"]').val();\n\t\t\t\t\tlet activityDurations = JSON.parse(data.find('[name=\"defaultOtherEventDuration\"]').val());\n\t\t\t\t\tlet minutes = 0;\n\t\t\t\t\tfor (let i in activityDurations) {\n\t\t\t\t\t\tif (activityDurations[i].activitytype === activityType) {\n\t\t\t\t\t\t\tminutes = parseInt(activityDurations[i].duration);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tendDate = moment(endDate)\n\t\t\t\t\t\t.add(minutes, 'minutes')\n\t\t\t\t\t\t.toISOString();\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet dateFormat = data\n\t\t\t\t\t.find('[name=\"date_start\"]')\n\t\t\t\t\t.data('dateFormat')\n\t\t\t\t\t.toUpperCase(),\n\t\t\t\ttimeFormat = data.find('[name=\"time_start\"]').data('format'),\n\t\t\t\tdefaultTimeFormat = '';\n\t\t\tif (timeFormat == 24) {\n\t\t\t\tdefaultTimeFormat = 'HH:mm';\n\t\t\t} else {\n\t\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t\t}\n\t\t\tdata.find('[name=\"date_start\"]').val(moment(startDate).format(dateFormat));\n\t\t\tdata.find('[name=\"due_date\"]').val(moment(endDate).format(dateFormat));\n\t\t\tif (data.find('.js-autofill').prop('checked') === true) {\n\t\t\t\tCalendar_Edit_Js.getInstance().getFreeTime(data);\n\t\t\t} else {\n\t\t\t\tdata.find('[name=\"time_start\"]').val(moment(startDate).format(defaultTimeFormat));\n\t\t\t\tdata.find('[name=\"time_end\"]').val(moment(endDate).format(defaultTimeFormat));\n\t\t\t}\n\t\t});\n\t}\n\n\tregisterUsersChange(formContainer) {\n\t\tformContainer.find('.js-input-user-owner-id-ajax, .js-input-user-owner-id').on('change', () => {\n\t\t\tthis.getCalendarView()\n\t\t\t\t.fullCalendar('getCalendar')\n\t\t\t\t.view.options.loadView();\n\t\t});\n\t\tthis.registerPinUser();\n\t}\n\n\t/**\n\t * Register actions to do after save record\n\t * @param instance\n\t * @param data\n\t * @returns {function}\n\t */\n\tregisterAfterSubmitForm(self, data) {\n\t\tconst calendarView = this.getCalendarView();\n\t\tlet returnFunction = function(data) {\n\t\t\tif (data.success) {\n\t\t\t\tlet recordActivityStatus = data.result.activitystatus.value,\n\t\t\t\t\thistoryStatus = app.getMainParams('activityStateLabels', true).history,\n\t\t\t\t\tinHistoryStatus = $.inArray(recordActivityStatus, historyStatus),\n\t\t\t\t\tshowType = app.getMainParams('showType');\n\t\t\t\tif (\n\t\t\t\t\t(-1 !== inHistoryStatus && 'history' === showType) ||\n\t\t\t\t\t(-1 === inHistoryStatus && 'history' !== showType)\n\t\t\t\t) {\n\t\t\t\t\tif (calendarView.fullCalendar('clientEvents', data.result._recordId)[0]) {\n\t\t\t\t\t\tself.updateCalendarEvent(data.result._recordId, data.result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst calendarInstance = calendarView.fullCalendar('getCalendar');\n\t\t\t\t\t\tif (calendarInstance.view.type !== 'year') {\n\t\t\t\t\t\t\tcalendarInstance.view.options.addCalendarEvent(data.result);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcalendarInstance.view.render();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.result.followup.value !== undefined) {\n\t\t\t\t\t\t\tcalendarView.fullCalendar('removeEvents', data.result.followup.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tself.refreshDatesRowView(calendarView.fullCalendar('getView'));\n\t\t\t\tself.getSidebarView()\n\t\t\t\t\t.find('.js-qc-form')\n\t\t\t\t\t.html('');\n\t\t\t\tself.getCalendarCreateView();\n\t\t\t\twindow.popoverCache = {};\n\t\t\t}\n\t\t};\n\t\treturn returnFunction;\n\t}\n\n\topenRightPanel() {\n\t\tlet calendarRightPanel = $('.js-calendar-right-panel');\n\t\tif (calendarRightPanel.hasClass('hideSiteBar')) {\n\t\t\tcalendarRightPanel.find('.js-toggle-site-bar-right-button').trigger('click');\n\t\t}\n\t}\n\n\tshowRightPanelForm() {\n\t\tlet calendarRightPanel = $('.js-calendar-right-panel');\n\t\tif (!calendarRightPanel.find('.js-right-panel-event').hasClass('active')) {\n\t\t\tcalendarRightPanel.find('.js-right-panel-event-link').trigger('click');\n\t\t}\n\t\tapp.showNewScrollbar(calendarRightPanel.find('.js-calendar__form__wrapper'), {\n\t\t\tsuppressScrollX: true\n\t\t});\n\t}\n\n\tregisterSiteBarEvents() {\n\t\tlet calendarRightPanel = $('.js-calendar-right-panel');\n\t\tcalendarRightPanel.find('.js-show-sitebar').on('click', () => {\n\t\t\tif (calendarRightPanel.hasClass('hideSiteBar')) {\n\t\t\t\tcalendarRightPanel.find('.js-toggle-site-bar-right-button').trigger('click');\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Parse calendar data\n\t * @param {Object} calendarDetails\n\t * @returns {{id: *, title: *, start: *, end: *, module: string, url: string, className: string[], start_display: *, end_display: *}}\n\t */\n\tgetEventData(calendarDetails) {\n\t\tlet calendar = this.getCalendarView(),\n\t\t\tstartDate = calendar.fullCalendar(\n\t\t\t\t'moment',\n\t\t\t\tcalendarDetails.date_start.value + ' ' + calendarDetails.time_start.value\n\t\t\t),\n\t\t\tendDate = calendar.fullCalendar(\n\t\t\t\t'moment',\n\t\t\t\tcalendarDetails.due_date.value + ' ' + calendarDetails.time_end.value\n\t\t\t),\n\t\t\teventObject = {\n\t\t\t\tid: calendarDetails._recordId,\n\t\t\t\ttitle: calendarDetails.subject.display_value,\n\t\t\t\tstart: startDate.format(),\n\t\t\t\tend: endDate.format(),\n\t\t\t\tmodule: this.module,\n\t\t\t\turl: `index.php?module=${this.module}&view=ActivityState&record=${calendarDetails._recordId}`,\n\t\t\t\tclassName: [\n\t\t\t\t\t'ownerCBg_' + calendarDetails.assigned_user_id.value,\n\t\t\t\t\t' picklistCBr_Calendar_activitytype_' + calendarDetails.activitytype.value,\n\t\t\t\t\t'js-popover-tooltip--record'\n\t\t\t\t],\n\t\t\t\tstart_display: calendarDetails.date_start.display_value,\n\t\t\t\tend_display: calendarDetails.due_date.display_value\n\t\t\t};\n\t\tif (calendarDetails.isEditable && app.getMainParams('showEditForm')) {\n\t\t\teventObject.url = `index.php?module=${this.module}&view=EventForm&record=${eventObject.id}`;\n\t\t}\n\t\treturn eventObject;\n\t}\n\n\t/**\n\t * Update Event\n\t * @param {Number} calendarEventId\n\t * @param {Object} calendarDetails\n\t */\n\tupdateCalendarEvent(calendarEventId, calendarDetails) {\n\t\tconst calendar = this.getCalendarView();\n\t\tlet recordToUpdate = calendar.fullCalendar('clientEvents', calendarEventId)[0];\n\t\t$.extend(recordToUpdate, this.getEventData(calendarDetails));\n\t\tcalendar.fullCalendar('updateEvent', recordToUpdate);\n\t}\n\n\tgetCalendarCreateView() {\n\t\tlet aDeferred = $.Deferred();\n\t\tif (this.eventCreate) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet sideBar = thisInstance.getSidebarView(),\n\t\t\t\tqcForm = sideBar.find('.js-qc-form');\n\t\t\tif (qcForm.find('form').length > 0 && qcForm.find('input[name=record]').length === 0) {\n\t\t\t\taDeferred.resolve(qcForm);\n\t\t\t} else {\n\t\t\t\tlet progressInstance = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\tthis.getCalendarSidebarData({ module: this.module, view: 'EventForm' })\n\t\t\t\t\t.done(() => {\n\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tthisInstance.registerAutofillTime();\n\t\t\t\t\t\taDeferred.resolve(qcForm);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(error => {\n\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.errorLog(error);\n\t\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\taDeferred.reject();\n\t\t}\n\t\treturn aDeferred.promise();\n\t}\n\n\t/**\n\t * Autoselect date in create view in extended calendar\n\t */\n\tregisterAutofillTime() {\n\t\tif (app.getMainParams('autofillTime')) {\n\t\t\tthis.container\n\t\t\t\t.find('.js-autofill')\n\t\t\t\t.prop('checked', 'checked')\n\t\t\t\t.trigger('change');\n\t\t}\n\t}\n\n\tregisterPinUser() {\n\t\t$('.js-pin-user')\n\t\t\t.off('click')\n\t\t\t.on('click', function() {\n\t\t\t\tconst thisInstance = $(this);\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: this.module,\n\t\t\t\t\taction: 'Calendar',\n\t\t\t\t\tmode: 'pinOrUnpinUser',\n\t\t\t\t\telement_id: thisInstance.data('elementid')\n\t\t\t\t}).done(data => {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tif (response === 'unpin') {\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.find('.js-pin-icon')\n\t\t\t\t\t\t\t.removeClass('fas')\n\t\t\t\t\t\t\t.addClass('far');\n\t\t\t\t\t} else if (response === 'pin') {\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.find('.js-pin-icon')\n\t\t\t\t\t\t\t.removeClass('far')\n\t\t\t\t\t\t\t.addClass('fas');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_ERROR'));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tregisterAddForm() {\n\t\tconst thisInstance = this;\n\t\tlet sideBar = thisInstance.getSidebarView();\n\t\tthisInstance.getCalendarCreateView();\n\t\tlet user = app.getMainParams('usersId');\n\t\tif (user === undefined) {\n\t\t\tuser = [app.getMainParams('userId')];\n\t\t}\n\t\tAppConnector.request(\n\t\t\t`index.php?module=${this.module}&view=RightPanelExtended&mode=getUsersList&user=${user}`\n\t\t).done(function(data) {\n\t\t\tif (data) {\n\t\t\t\tlet formContainer = sideBar.find('.js-users-form');\n\t\t\t\tformContainer.html(data);\n\t\t\t\tthisInstance.registerUsersChange(formContainer);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(formContainer.find('select'));\n\t\t\t\tapp.showNewScrollbar(formContainer, {\n\t\t\t\t\tsuppressScrollX: true\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tAppConnector.request(\n\t\t\t`index.php?module=${this.module}&view=RightPanelExtended&mode=getGroupsList&user=${user}`\n\t\t).done(function(data) {\n\t\t\tif (data) {\n\t\t\t\tlet formContainer = sideBar.find('.js-group-form');\n\t\t\t\tformContainer.html(data);\n\t\t\t\tthisInstance.registerUsersChange(formContainer);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(formContainer.find('select'));\n\t\t\t\tformContainer.addClass('u-min-h-30per');\n\t\t\t\tapp.showNewScrollbar(formContainer, {\n\t\t\t\t\tsuppressScrollX: true\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Find element on list (user, group)\n\t * @param {jQuery.Event} e\n\t */\n\tfindElementOnList(e) {\n\t\tlet target = $(e.target),\n\t\t\tvalue = target.val().toLowerCase(),\n\t\t\tcontainer = target.closest('.js-filter__container');\n\t\tcontainer.find('.js-filter__item__value').filter(function() {\n\t\t\tlet item = $(this).closest('.js-filter__item__container');\n\t\t\tif (\n\t\t\t\t$(this)\n\t\t\t\t\t.text()\n\t\t\t\t\t.trim()\n\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t.indexOf(value) > -1\n\t\t\t) {\n\t\t\t\titem.removeClass('d-none');\n\t\t\t} else {\n\t\t\t\titem.addClass('d-none');\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Register filter for users and groups\n\t */\n\tregisterFilterForm() {\n\t\tconst self = this;\n\t\tthis.getSidebarView()\n\t\t\t.find('a[data-toggle=\"tab\"]')\n\t\t\t.one('shown.bs.tab', function(e) {\n\t\t\t\t$('.js-filter__search').on('keyup', self.findElementOnList.bind(self));\n\t\t\t});\n\t}\n\n\t/**\n\t * Register popover buttons' click\n\t */\n\tregisterPopoverButtonsClickEvent() {\n\t\t$(document).on('click', '.js-calendar-popover__button', this.showCalendarPopoverLinkInSidebar.bind(this));\n\t}\n\n\t/**\n\t * Show popover link in sidebar\n\t *\n\t * @param   {Object}  e  click event\n\t */\n\tshowCalendarPopoverLinkInSidebar(e) {\n\t\tlet href = e.currentTarget.href;\n\t\tconst hrefObject = app.convertUrlToObject(href);\n\t\tif (hrefObject.module !== 'Calendar' || (hrefObject.view !== 'Edit' && hrefObject.view !== 'Detail')) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\te.preventDefault();\n\t\t\tconst sidebarView = hrefObject.view === 'Edit' ? 'EventForm' : 'ActivityState';\n\t\t\thref = href.replace(hrefObject.view, sidebarView);\n\t\t\tthis.getCalendarSidebarData(href);\n\t\t}\n\t}\n\n\t/**\n\t * Register events\n\t */\n\tregisterEvents() {\n\t\tsuper.registerEvents();\n\t\tthis.registerAddForm();\n\t\tthis.registerSiteBarEvents();\n\t\tthis.registerFilterForm();\n\t\tthis.registerPopoverButtonsClickEvent();\n\t\tElementQueries.listen();\n\t}\n};\n"],"names":["window","calendarLoaded","Calendar_CalendarExtended_Js","container","readonly","sidebarView","length","calendarContainer","addCommonMethodsToYearView","calendar","getCalendarView","FC","views","year","extend","selectDays","self","getCalendarCreateView","getSidebarView","getCurrentCvId","showRightPanelForm","getSelectedUsersCalendar","registerClearFilterButton","clearFilterButton","registerFilterTabChange","registerAfterSubmitForm","registerViewRenderEvents","appendSubDateRow","refreshDatesRowView","generateYearList","updateCountTaskCalendar","registerDatesChange","addHeaderButtons","browserHistoryConfig","module","showChangeDateButtons","showTodayButtonCheckbox","basicOptions","setCalendarOptions","options","header","left","app","getMainParams","center","right","basic","eventLimit","eventLimitText","vtranslate","titleFormat","select","loadView","fullCalendar","view","render","month","parseDateFormat","loadCalendarData","week","day","basicDay","type","start","end","eventRender","event","element","eventRenderer","viewRender","addCalendarEvent","calendarDetails","getEventData","Object","assign","eventClick","eventEdit","calEvent","jsEvent","preventDefault","getCalendarSidebarData","$","attr","href","location","link","searchParams","get","find","prev","viewBtn","buttonsContainer","clone","filters","prepend","after","calendarView","isWorkDays","switchShowTypeVal","switchContainer","switchShowType","switchSwitchingDays","historyParams","moduleCacheGet","button","setMainParams","time","hiddenDays","on","e","currentTarget","data","moduleCacheSet","filter","change","setCalendarHeight","toolbar","subDateRow","append","width","breakpoints","lg","showNewScrollbar","todyButtonIcon","todayButton","hasClass","popoverContent","text","toLowerCase","removeClass","html","showPopoverElementView","content","replace","nextPrevButtons","yearButtons","first","buttonText","last","viewType","hide","show","intervalStart","intervalEnd","generateSubMonthList","generateSubWeekList","generateSubDaysList","addClass","moment","parent","thisInstance","selectedUsers","sidebar","selectedUsersAjax","selectedRolesAjax","users","each","push","val","concat","subDatesElements","datesView","dateArray","userDateFormat","CONFIG","dateFormat","toUpperCase","user","key","format","endOf","add","AppConnector","request","action","mode","dates","cvid","done","events","result","sideBar","editViewInstance","Vtiger_Edit_Js","getInstanceByModuleName","headerInstance","params","rightFormCreate","registerBasicEvents","validationEngine","validationEngineOptions","registerHelpInfo","App","Fields","Picklist","showSelect2ElementView","callbackFunction","registerQuickCreatePostLoadEvents","Text","Editor","height","aDeferred","Deferred","progressInstance","progressIndicator","blockInfo","enabled","isNumeric","record","openRightPanel","updateSidebar","registerEditForm","suppressScrollX","resolve","fail","errorLog","error","promise","formatDate","calendarInstance","historyUrl","connectorMethod","browserHistory","keys","parseInt","statement","currentUser","toggleClass","clearBtn","prop","actualUserCheckbox","calendarSwitch","dateStart","prevYear","subtract","actualYear","nextYear","active","activeMonth","locale","prevWeeks","actualWeek","nextWeeks","prevDays","actualDay","nextDays","daysToShow","diff","inArray","startDate","endDate","tab","end_hour","hasTime","start_hour","name","activityDurations","JSON","parse","minutes","i","activitytype","activityType","duration","toISOString","timeFormat","defaultTimeFormat","Calendar_Edit_Js","getInstance","getFreeTime","formContainer","registerPinUser","success","activitystatus","value","historyStatus","history","inHistoryStatus","recordActivityStatus","showType","_recordId","updateCalendarEvent","followup","popoverCache","calendarRightPanel","trigger","date_start","time_start","due_date","time_end","eventObject","id","title","subject","display_value","url","className","assigned_user_id","start_display","end_display","isEditable","calendarEventId","recordToUpdate","eventCreate","qcForm","registerAutofillTime","reject","off","element_id","Vtiger_Helper_Js","showPnotify","registerUsersChange","target","closest","trim","indexOf","item","one","findElementOnList","bind","document","showCalendarPopoverLinkInSidebar","hrefObject","convertUrlToObject","registerAddForm","registerSiteBarEvents","registerFilterForm","registerPopoverButtonsClickEvent","ElementQueries","listen","Calendar_Calendar_Js"],"mappings":"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"}