'use strict';

Vtiger_List_Js('OSSMailView_List_Js',{bindMails:function d(){var a=Vtiger_List_Js.getInstance(),b=a.checkListRecordSelected();if(!0!=b){if(!confirm(app.vtranslate('JS_BIND_CONFIRM')))return !1;var c={};c.data={module:'OSSMailView',action:'BindMails'},$.extend(c.data,Vtiger_List_Js.getSelectedRecordsParams()),c.async=!1,AppConnector.request(c).done(function(a){Vtiger_Helper_Js.showPnotify({text:a.result,delay:'4000',type:'success'});});}else a.noRecordSelectedAlert();},triggerChangeTypeForm:function c(){var a=Vtiger_List_Js.getInstance(),b=a.readSelectedIds(!0);$('#ChangeType').on('submit',function(c){var d=jQuery('#mail_type').val(),e={};e.data={module:'OSSMailView',action:'ChangeType',data:b,mail_type:d},e.async=!1,AppConnector.request(e).done(function(b){var c={title:app.vtranslate('JS_MESSAGE'),text:b.result,type:'info'};Vtiger_Helper_Js.showPnotify(c),Vtiger_List_Js.clearList(),a.getListViewRecords(),app.hideModalWindow();}),c.preventDefault();});},triggerChangeType:function e(a){var b=this,c=Vtiger_List_Js.getInstance(),d=c.checkListRecordSelected();if(!0!=d){b.getRelatedModulesContainer=!1;AppConnector.request({type:'POST',url:a,dataType:'html',data:{}}).done(function(a){a&&app.showModalWindow(a,function(){b.triggerChangeTypeForm();});});}else c.noRecordSelectedAlert();}},{});
