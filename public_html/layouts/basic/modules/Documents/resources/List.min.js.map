{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_List_Js(\n\t'Documents_List_Js',\n\t{\n\t\tmassMove: function (url) {\n\t\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\t\tif (validationResult != true) {\n\t\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\t\tvar excludedIds = listInstance.readExcludedIds(true);\n\t\t\t\tvar cvId = listInstance.getCurrentCvId();\n\t\t\t\tvar postData = {\n\t\t\t\t\tselected_ids: selectedIds,\n\t\t\t\t\texcluded_ids: excludedIds,\n\t\t\t\t\tviewname: cvId\n\t\t\t\t};\n\n\t\t\t\tvar searchValue = listInstance.getAlphabetSearchValue();\n\n\t\t\t\tif (searchValue.length > 0) {\n\t\t\t\t\tpostData['search_key'] = listInstance.getAlphabetSearchField();\n\t\t\t\t\tpostData['search_value'] = searchValue;\n\t\t\t\t\tpostData['operator'] = 's';\n\t\t\t\t}\n\n\t\t\t\tvar params = {\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData\n\t\t\t\t};\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\t\tlistInstance.moveDocuments().done(function (data) {\n\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\tvar result = data.result;\n\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MOVE_DOCUMENTS'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tvar urlParams = listInstance.getDefaultParams();\n\t\t\t\t\t\t\t\t\tlistInstance.getListViewRecords(urlParams);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_OPERATION_DENIED'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tapp.showModalWindow(data, callBackFunction);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tmoveDocuments: function () {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tjQuery('#moveDocuments').on('submit', function (e) {\n\t\t\t\tvar formData = jQuery(e.currentTarget).serializeFormData();\n\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterDeleteFilterClickEvent: function () {\n\t\t\tvar thisInstance = this;\n\n\t\t\tvar listViewFilterBlock = this.getFilterBlock();\n\t\t\tif (listViewFilterBlock != false) {\n\t\t\t\t//used mouseup event to stop the propagation of customfilter select change event.\n\t\t\t\tlistViewFilterBlock.on('mouseup', '.js-filter-delete', function (event) {\n\t\t\t\t\t//to close the dropdown\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tthisInstance.getFilterSelectElement().data('select2').close();\n\t\t\t\t\tvar liElement = jQuery(event.currentTarget).closest('.select2-results__option');\n\t\t\t\t\tvar message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\t\tif (liElement.hasClass('folderOption')) {\n\t\t\t\t\t\tif (liElement.find('.js-filter-delete').hasClass('dull')) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_FOLDER_IS_NOT_EMPTY'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message }).done(function (e) {\n\t\t\t\t\t\t\t\tvar currentOptionElement = thisInstance.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\t\t\tvar folderId = currentOptionElement.data('folderid');\n\t\t\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\tmode: 'delete',\n\t\t\t\t\t\t\t\t\taction: 'Folder',\n\t\t\t\t\t\t\t\t\tfolderid: folderId\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\t\t\tcurrentOptionElement.remove();\n\t\t\t\t\t\t\t\t\t\tthisInstance.getFilterSelectElement().trigger('change');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message }).done(function (e) {\n\t\t\t\t\t\t\tvar currentOptionElement = thisInstance.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\t\tAppConnector.requestForm(currentOptionElement.data('deleteurl'));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n);\n"],"names":["Vtiger_List_Js","massMove","url","listInstance","getInstance","validationResult","checkListRecordSelected","selectedIds","readSelectedIds","excludedIds","readExcludedIds","cvId","getCurrentCvId","postData","selected_ids","excluded_ids","viewname","searchValue","getAlphabetSearchValue","length","getAlphabetSearchField","progressIndicatorElement","jQuery","progressIndicator","AppConnector","request","data","done","mode","app","showModalWindow","callBackFunction","moveDocuments","result","success","hideModalWindow","showNotify","title","vtranslate","text","message","delay","type","urlParams","getDefaultParams","getListViewRecords","noRecordSelectedAlert","aDeferred","Deferred","on","e","formData","currentTarget","serializeFormData","resolve","fail","textStatus","errorThrown","reject","preventDefault","promise","registerDeleteFilterClickEvent","thisInstance","listViewFilterBlock","getFilterBlock","event","stopPropagation","getFilterSelectElement","close","liElement","closest","hasClass","find","Vtiger_Helper_Js","showConfirmationBox","currentOptionElement","getSelectOptionFromChosenOption","folderId","params","module","getModuleName","action","folderid","remove","trigger","requestForm"],"mappings":"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"}