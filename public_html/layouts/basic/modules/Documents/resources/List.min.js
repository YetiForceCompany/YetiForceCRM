'use strict';

Vtiger_List_Js("Documents_List_Js",{massMove:function j(a){var b=Vtiger_List_Js.getInstance(),c=b.checkListRecordSelected();if(!0!=c){var d=b.readSelectedIds(!0),e=b.readExcludedIds(!0),f=b.getCurrentCvId(),g={selected_ids:d,excluded_ids:e,viewname:f},h=b.getAlphabetSearchValue();0<h.length&&(g.search_key=b.getAlphabetSearchField(),g.search_value=h,g.operator="s");var i=jQuery.progressIndicator();AppConnector.request({url:a,data:g}).done(function(a){i.progressIndicator({mode:"hide"});app.showModalWindow(a,function a(){b.moveDocuments().done(function(a){if(a){var c=a.result;if(c.success){app.hideModalWindow(),Vtiger_Helper_Js.showPnotify({title:app.vtranslate("JS_MOVE_DOCUMENTS"),text:c.message,delay:"2000",type:"success"});var d=b.getDefaultParams();b.getListViewRecords(d);}else Vtiger_Helper_Js.showPnotify({title:app.vtranslate("JS_OPERATION_DENIED"),text:c.message,delay:"2000",type:"error"});}});});});}else b.noRecordSelectedAlert();}},{moveDocuments:function b(){var a=jQuery.Deferred();return jQuery("#moveDocuments").on("submit",function(b){var c=jQuery(b.currentTarget).serializeFormData();AppConnector.request(c).done(function(b){a.resolve(b);}).fail(function(b,c){a.reject(b,c);}),b.preventDefault();}),a.promise()},registerDeleteFilterClickEvent:function c(){var a=this,b=this.getFilterBlock();console.log(b.find("li [data-fa-i2svg].deleteFilter")),!1!=b&&b.on("mouseup","li [data-fa-i2svg].deleteFilter",function(b){a.getFilterSelectElement().data("select2").close();var c=jQuery(b.currentTarget).closest(".select2-results__option"),d=app.vtranslate("JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE");if(c.hasClass("folderOption")){if(c.find(".deleteFilter").hasClass("dull"))return void Vtiger_Helper_Js.showPnotify(app.vtranslate("JS_FOLDER_IS_NOT_EMPTY"));Vtiger_Helper_Js.showConfirmationBox({message:d}).done(function(){var b=a.getSelectOptionFromChosenOption(c),d=b.data("folderid"),e={module:app.getModuleName(),mode:"delete",action:"Folder",folderid:d};AppConnector.request(e).done(function(c){c.success&&(b.remove(),a.getFilterSelectElement().trigger("change"));});});}else Vtiger_Helper_Js.showConfirmationBox({message:d}).done(function(){var b=a.getSelectOptionFromChosenOption(c);AppConnector.requestForm(b.data("deleteurl"));});});}});
