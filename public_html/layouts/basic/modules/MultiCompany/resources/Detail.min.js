'use strict';

Vtiger_Detail_Js('MultiCompany_Detail_Js',{},{hierarchyResponseCache:{},getHierarchyResponseData:function getHierarchyResponseData(params){var thisInstance=this,aDeferred=jQuery.Deferred();return jQuery.isEmptyObject(thisInstance.hierarchyResponseCache)?AppConnector.request(params).done(function(data){thisInstance.hierarchyResponseCache=data,aDeferred.resolve(thisInstance.hierarchyResponseCache);}):aDeferred.resolve(thisInstance.hierarchyResponseCache),aDeferred.promise()},displayHierarchyResponseData:function displayHierarchyResponseData(data){var callbackFunction=function(){app.showScrollBar(jQuery('#hierarchyScroll'),{height:'300px',railVisible:!0,size:'6px'});};app.showModalWindow(data,function(data){'function'==typeof callbackFunction&&300<jQuery('#hierarchyScroll').height()&&callbackFunction(data);});},registerHierarchyRecordCount:function registerHierarchyRecordCount(){var hierarchyButton=$('.detailViewTitle .hierarchy');if(hierarchyButton.length){var params={module:app.getModuleName(),action:'RelationAjax',record:app.getRecordId(),mode:'getHierarchyCount'};AppConnector.request(params).done(function(response){response.success&&$('.detailViewTitle .hierarchy .badge').html(response.result);});}},registerShowHierarchy:function registerShowHierarchy(){var thisInstance=this,hierarchyButton=$('.detailViewTitle'),params={module:app.getModuleName(),view:'Hierarchy',record:app.getRecordId()};hierarchyButton.on('click','.js-detail__icon',function(){thisInstance.getHierarchyResponseData(params).done(function(data){thisInstance.displayHierarchyResponseData(data);});});},registerEvents:function registerEvents(){this._super(),this.registerHierarchyRecordCount(),this.registerShowHierarchy();}});
//# sourceMappingURL=Detail.min.js.map
