{"version":3,"file":"CustomView.min.js","sources":["CustomView.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nclass CustomView {\n\tconstructor(url) {\n\t\tlet progressIndicatorElement = $.progressIndicator();\n\t\tapp.showModalWindow(null, url, () => {\n\t\t\tthis.contentsCotainer = $('.js-filter-modal__container');\n\t\t\tthis.advanceFilterInstance = new Vtiger_ConditionBuilder_Js(\n\t\t\t\tthis.contentsCotainer.find('.js-condition-builder'),\n\t\t\t\tthis.contentsCotainer.find('#sourceModule').val()\n\t\t\t);\n\t\t\tthis.advanceFilterInstance.registerEvents();\n\t\t\t//This will store the columns selection container\n\t\t\tthis.columnSelectElement = false;\n\t\t\tthis.registerEvents();\n\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t});\n\t}\n\n\tloadDateFilterValues() {\n\t\tlet selectedDateFilter = $('#standardDateFilter option:selected');\n\t\tlet currentDate = selectedDateFilter.data('currentdate');\n\t\tlet endDate = selectedDateFilter.data('enddate');\n\t\t$('#standardFilterCurrentDate').val(currentDate);\n\t\t$('#standardFilterEndDate').val(endDate);\n\t}\n\n\t/**\n\t * Function to get the contents container\n\t * @return : jQuery object of contents container\n\t */\n\tgetContentsContainer() {\n\t\tif (this.contentsCotainer == false) {\n\t\t\tthis.contentsCotainer = $('.js-filter-modal__container');\n\t\t}\n\t\treturn this.contentsCotainer;\n\t}\n\n\t/**\n\t * Function to get the view columns selection element\n\t * @return : jQuery object of view columns selection element\n\t */\n\tgetColumnSelectElement() {\n\t\tif (this.columnSelectElement == false) {\n\t\t\tthis.columnSelectElement = $('#viewColumnsSelect');\n\t\t}\n\t\treturn this.columnSelectElement;\n\t}\n\n\t/**\n\t * Function which will get the selected columns\n\t * @return : array of selected values\n\t */\n\tgetSelectedColumns() {\n\t\tlet columnListSelectElement = this.getColumnSelectElement();\n\t\treturn columnListSelectElement.val();\n\t}\n\n\tsaveFilter() {\n\t\tlet aDeferred = $.Deferred();\n\t\tlet formData = $('#CustomView').serializeFormData();\n\t\tAppConnector.request(formData, true)\n\t\t\t.done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function (error) {\n\t\t\t\taDeferred.reject(error);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\n\tsaveAndViewFilter() {\n\t\tthis.saveFilter().done(function (data) {\n\t\t\tlet response = data.result;\n\t\t\tif (response && response.success) {\n\t\t\t\tlet url;\n\t\t\t\tif (app.getParentModuleName() == 'Settings') {\n\t\t\t\t\turl = 'index.php?module=CustomView&parent=Settings&view=Index&sourceModule=' + $('#sourceModule').val();\n\t\t\t\t} else {\n\t\t\t\t\turl = response.listviewurl;\n\t\t\t\t}\n\t\t\t\twindow.location.href = url;\n\t\t\t} else {\n\t\t\t\t$.unblockUI();\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_DUPLICATE_RECORD'),\n\t\t\t\t\ttext: response.message,\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tregisterIconEvents() {\n\t\tthis.getContentsContainer()\n\t\t\t.find('.js-filter-preferences')\n\t\t\t.on('change', '.js-filter-preference', (e) => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet iconElement = currentTarget.next();\n\t\t\t\tif (currentTarget.prop('checked')) {\n\t\t\t\t\ticonElement.removeClass(iconElement.data('unchecked')).addClass(iconElement.data('check'));\n\t\t\t\t} else {\n\t\t\t\t\ticonElement.removeClass(iconElement.data('check')).addClass(iconElement.data('unchecked'));\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tregisterBlockToggleEvent() {\n\t\tconst container = this.getContentsContainer();\n\t\tcontainer.on('click', '.blockHeader', function (e) {\n\t\t\tconst target = $(e.target);\n\t\t\tif (\n\t\t\t\ttarget.is('input') ||\n\t\t\t\ttarget.is('button') ||\n\t\t\t\ttarget.parents().is('button') ||\n\t\t\t\ttarget.hasClass('js-stop-propagation') ||\n\t\t\t\ttarget.parents().hasClass('js-stop-propagation')\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst blockHeader = $(e.currentTarget);\n\t\t\tconst blockContents = blockHeader.next();\n\t\t\tconst iconToggle = blockHeader.find('.iconToggle');\n\t\t\tif (blockContents.hasClass('d-none')) {\n\t\t\t\tblockContents.removeClass('d-none');\n\t\t\t\ticonToggle.removeClass(iconToggle.data('hide')).addClass(iconToggle.data('show'));\n\t\t\t} else {\n\t\t\t\tblockContents.addClass('d-none');\n\t\t\t\ticonToggle.removeClass(iconToggle.data('show')).addClass(iconToggle.data('hide'));\n\t\t\t}\n\t\t});\n\t}\n\n\tregisterColorEvent() {\n\t\tconst container = this.getContentsContainer();\n\t\tlet picker = container.find('.js-color-picker');\n\t\tlet pickerField = picker.find('.js-color-picker__field');\n\t\tlet showPicker = () => {\n\t\t\tApp.Fields.Colors.showPicker({\n\t\t\t\tcolor: pickerField.val(),\n\t\t\t\tbgToUpdate: picker.find('.js-color-picker__color'),\n\t\t\t\tfieldToUpdate: pickerField\n\t\t\t});\n\t\t};\n\t\tpicker.on('click', showPicker);\n\t}\n\n\t/**\n\t * Get list of fields to duplicates\n\t * @returns {Array}\n\t */\n\tgetDuplicateFields() {\n\t\tlet fields = [];\n\t\tconst container = this.getContentsContainer();\n\t\tcontainer.find('.js-duplicates-container .js-duplicates-row').each(function () {\n\t\t\tfields.push({\n\t\t\t\tfieldid: $(this).find('.js-duplicates-field').val(),\n\t\t\t\tignore: $(this).find('.js-duplicates-ignore').is(':checked')\n\t\t\t});\n\t\t});\n\t\treturn fields;\n\t}\n\t/**\n\t * Register events for block \"Find duplicates\"\n\t */\n\tregisterDuplicatesEvents() {\n\t\tconst container = this.getContentsContainer();\n\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.js-duplicates-container .js-duplicates-field'));\n\t\tcontainer.on('click', '.js-duplicates-remove', function (e) {\n\t\t\t$(this).closest('.js-duplicates-row').remove();\n\t\t});\n\t\tcontainer.find('.js-duplicate-add-field').on('click', function () {\n\t\t\tlet template = container.find('.js-duplicates-field-template').clone();\n\t\t\ttemplate.removeClass('d-none');\n\t\t\ttemplate.removeClass('js-duplicates-field-template');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(template.find('.js-duplicates-field'));\n\t\t\tcontainer.find('.js-duplicates-container').append(template);\n\t\t});\n\t}\n\tregisterSubmitEvent(select2Element) {\n\t\t$('#CustomView').on('submit', (e) => {\n\t\t\tlet selectElement = this.getColumnSelectElement();\n\t\t\tif ($('#viewname').val().length > 100) {\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_VIEWNAME_ALERT'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//Mandatory Fields selection validation\n\t\t\t//Any one Mandatory Field should select while creating custom view.\n\t\t\tlet mandatoryFieldsList = JSON.parse($('#mandatoryFieldsList').val());\n\t\t\tlet selectedOptions = selectElement.val();\n\t\t\tlet mandatoryFieldsMissing = true;\n\t\t\tif (selectedOptions) {\n\t\t\t\tfor (let i = 0; i < selectedOptions.length; i++) {\n\t\t\t\t\tif ($.inArray(selectedOptions[i], mandatoryFieldsList) >= 0) {\n\t\t\t\t\t\tmandatoryFieldsMissing = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (mandatoryFieldsMissing) {\n\t\t\t\tselectElement.validationEngine(\n\t\t\t\t\t'showPrompt',\n\t\t\t\t\tapp.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_MANDATORY_FIELD'),\n\t\t\t\t\t'error',\n\t\t\t\t\t'topLeft',\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tselect2Element.validationEngine('hide');\n\t\t\t}\n\t\t\t//Mandatory Fields validation ends\n\t\t\tlet result = $(e.currentTarget).validationEngine('validate');\n\t\t\tif (result == true) {\n\t\t\t\t//handled standard filters saved values.\n\t\t\t\tlet stdfilterlist = {};\n\n\t\t\t\tif (\n\t\t\t\t\t$('#standardFilterCurrentDate').val() != '' &&\n\t\t\t\t\t$('#standardFilterEndDate').val() != '' &&\n\t\t\t\t\t$('select.standardFilterColumn option:selected').val() != 'none'\n\t\t\t\t) {\n\t\t\t\t\tstdfilterlist['columnname'] = $('select.standardFilterColumn option:selected').val();\n\t\t\t\t\tstdfilterlist['stdfilter'] = $('select#standardDateFilter option:selected').val();\n\t\t\t\t\tstdfilterlist['startdate'] = $('#standardFilterCurrentDate').val();\n\t\t\t\t\tstdfilterlist['enddate'] = $('#standardFilterEndDate').val();\n\t\t\t\t\t$('#stdfilterlist').val(JSON.stringify(stdfilterlist));\n\t\t\t\t}\n\t\t\t\t//handled advanced filters saved values.\n\t\t\t\tlet advfilterlist = this.advanceFilterInstance.getConditions();\n\t\t\t\t$('#advfilterlist').val(JSON.stringify(advfilterlist));\n\t\t\t\t$('[name=\"duplicatefields\"]').val(JSON.stringify(this.getDuplicateFields()));\n\t\t\t\t$('input[name=\"columnslist\"]', this.getContentsContainer()).val(JSON.stringify(this.getSelectedColumns()));\n\t\t\t\tthis.saveAndViewFilter();\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tapp.formAlignmentAfterValidation($(e.currentTarget));\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Block submit on press enter key\n\t */\n\tregisterDisableSubmitOnEnter() {\n\t\tthis.getContentsContainer()\n\t\t\t.find('#viewname, [name=\"color\"]')\n\t\t\t.keydown(function (e) {\n\t\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tregisterEvents() {\n\t\tthis.registerIconEvents();\n\t\tApp.Fields.Text.Editor.register(this.getContentsContainer().find('.js-editor'));\n\t\tApp.Fields.Tree.register(this.getContentsContainer());\n\t\tthis.registerBlockToggleEvent();\n\t\tthis.registerColorEvent();\n\t\tthis.registerDuplicatesEvents();\n\t\tlet select2Element = App.Fields.Picklist.showSelect2ElementView(this.getColumnSelectElement());\n\t\tthis.registerSubmitEvent(select2Element);\n\t\t$('.stndrdFilterDateSelect').datepicker();\n\t\t$('#standardDateFilter').on('change', () => {\n\t\t\tthis.loadDateFilterValues();\n\t\t});\n\t\t$('#CustomView').validationEngine(app.validationEngineOptions);\n\t\tthis.registerDisableSubmitOnEnter();\n\t}\n}\n"],"names":["CustomView","url","progressIndicatorElement","$","progressIndicator","app","showModalWindow","contentsCotainer","advanceFilterInstance","Vtiger_ConditionBuilder_Js","find","val","registerEvents","columnSelectElement","mode","selectedDateFilter","currentDate","data","endDate","columnListSelectElement","getColumnSelectElement","aDeferred","Deferred","formData","serializeFormData","AppConnector","request","done","resolve","fail","error","reject","promise","saveFilter","response","result","success","getParentModuleName","listviewurl","window","location","href","unblockUI","showNotify","title","vtranslate","text","message","type","getContentsContainer","on","e","currentTarget","iconElement","next","prop","removeClass","addClass","container","target","is","parents","hasClass","blockHeader","blockContents","iconToggle","picker","pickerField","showPicker","App","Fields","Colors","color","bgToUpdate","fieldToUpdate","fields","each","push","fieldid","ignore","Picklist","showSelect2ElementView","closest","remove","template","clone","append","select2Element","selectElement","length","preventDefault","mandatoryFieldsList","JSON","parse","selectedOptions","mandatoryFieldsMissing","i","inArray","validationEngine","stdfilterlist","stringify","advfilterlist","getConditions","getDuplicateFields","getSelectedColumns","saveAndViewFilter","formAlignmentAfterValidation","keydown","keyCode","registerIconEvents","Text","Editor","register","Tree","registerBlockToggleEvent","registerColorEvent","registerDuplicatesEvents","registerSubmitEvent","datepicker","loadDateFilterValues","validationEngineOptions","registerDisableSubmitOnEnter"],"mappings":"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"}