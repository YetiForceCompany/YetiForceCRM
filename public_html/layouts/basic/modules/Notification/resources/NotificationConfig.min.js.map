{"version":3,"file":"NotificationConfig.min.js","sources":["NotificationConfig.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Notification_NotificationConfig_Js',\n\t{},\n\t{\n\t\tregisterEventForModal: function (container) {\n\t\t\tconst self = this;\n\t\t\tlet table = app.registerDataTables(container.find('.js-watching-data-table'));\n\t\t\tapp.showPopoverElementView(container.find('.infoPopover'));\n\t\t\tcontainer.on('switchChange.bootstrapSwitch', '.sendNotificationsSwitch', function (e, state) {\n\t\t\t\tif (state) {\n\t\t\t\t\tcontainer.find('.schedule').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.find('.schedule').addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\t\tlet selectedModules = [];\n\t\t\t\tlet sendNoticeModules = [];\n\t\t\t\ttable.$('[type=\"checkbox\"]').each(function () {\n\t\t\t\t\tlet currentTarget = $(this);\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tselectedModules.push(currentTarget.val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\ttable.$('.sandNoticeOn').each(function (e) {\n\t\t\t\t\tlet value = $(this).closest('tr').data('id');\n\t\t\t\t\tsendNoticeModules.push(value);\n\t\t\t\t});\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: 'Notification',\n\t\t\t\t\taction: 'Notification',\n\t\t\t\t\tmode: 'saveWatchingModules',\n\t\t\t\t\tselctedModules: selectedModules,\n\t\t\t\t\tsendNotifications: sendNoticeModules,\n\t\t\t\t\tfrequency: container.find('select[name=\"frequency\"]').val()\n\t\t\t\t};\n\t\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function () {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.selectAllModules').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttable.$('.watchingModule:not(:disabled)').prop('checked', $(this).is(':checked'));\n\t\t\t});\n\t\t\tcontainer.find('.sentNoticeAll').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\t\tlet val = !element.hasClass('sandNoticeOn');\n\t\t\t\tself.changeSendNoticeState(element, val);\n\t\t\t\ttable.$('.sandNoticeOn,.sandNoticeOff').each(function () {\n\t\t\t\t\tself.changeSendNoticeState($(this), val);\n\t\t\t\t});\n\t\t\t});\n\t\t\ttable.$('.sentNotice').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\t\tself.changeSendNoticeState(element);\n\t\t\t});\n\t\t},\n\t\tchangeSendNoticeState: function (element, val) {\n\t\t\tif (val !== undefined) {\n\t\t\t\tif (val === true) {\n\t\t\t\t\telement.addClass('fa-bell').removeClass('fa-bell-slash');\n\t\t\t\t\telement.addClass('sandNoticeOn').removeClass('sandNoticeOff');\n\t\t\t\t} else {\n\t\t\t\t\telement.addClass('fa-bell-slash').removeClass('fa-bell');\n\t\t\t\t\telement.addClass('sandNoticeOff').removeClass('sandNoticeOn');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telement.toggleClass('fa-bell fa-bell-slash');\n\t\t\t\telement.toggleClass('sandNoticeOn sandNoticeOff');\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tlet container = $('.modalNotificationNotificationConfig');\n\t\t\tthis.registerEventForModal(container);\n\t\t}\n\t}\n);\njQuery(document).ready(function () {\n\tlet instance = new Notification_NotificationConfig_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","registerEventForModal","container","self","table","app","registerDataTables","find","showPopoverElementView","on","e","state","removeClass","addClass","selectedModules","sendNoticeModules","$","each","currentTarget","is","push","val","value","closest","data","params","module","action","mode","selctedModules","sendNotifications","frequency","progress","progressIndicator","AppConnector","request","done","hideModalWindow","fail","stopPropagation","prop","element","hasClass","changeSendNoticeState","toggleClass","registerEvents","document","ready","instance","Notification_NotificationConfig_Js"],"mappings":"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"}