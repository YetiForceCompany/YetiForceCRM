'use strict';

jQuery.Class('Notification_NotificationConfig_Js',{},{registerEventForModal:function d(a){var b=this,c=app.registerDataTables(a.find('.modalDataTable'));app.showPopoverElementView(a.find('.infoPopover')),a.on('switchChange.bootstrapSwitch','.sendNotificationsSwitch',function(b,c){c?a.find('.schedule').removeClass('d-none'):a.find('.schedule').addClass('d-none');}),a.find('[name="saveButton"]').on('click',function(){var b=[],d=[];c.$('[type="checkbox"]').each(function(){var a=$(this);a.is(':checked')&&b.push(a.val());}),c.$('.sandNoticeOn').each(function(){var a=$(this).closest('tr').data('id');d.push(a);});var e={module:app.getModuleName(),action:'Notification',mode:'saveWatchingModules',selctedModules:b,sendNotifications:d,frequency:a.find('select[name="frequency"]').val()},f=jQuery.progressIndicator();AppConnector.request(e).done(function(){f.progressIndicator({mode:'hide'}),app.hideModalWindow();}).fail(function(){f.progressIndicator({mode:'hide'}),app.hideModalWindow();});}),a.find('.selectAllModules').on('click',function(a){a.stopPropagation(),c.$('.watchingModule:not(:disabled)').prop('checked',$(this).is(':checked'));}),a.find('.sentNotice').on('click',function(a){a.stopPropagation();var d=jQuery(a.currentTarget),e=!d.hasClass('sandNoticeOn');b.changeSendNoticeState(d),c.$('.sandNoticeOn,.sandNoticeOff').each(function(){b.changeSendNoticeState($(this),e);});}),c.$('.sandNoticeOn,.sandNoticeOff').on('click',function(a){a.stopPropagation();var c=jQuery(a.currentTarget);b.changeSendNoticeState(c);});},changeSendNoticeState:function c(a,b){b===void 0?(a.toggleClass('fa-envelope fa-envelope-o'),a.toggleClass('sandNoticeOn sandNoticeOff')):!0===b?(a.addClass('fa-envelope').removeClass('fa-envelope-o'),a.addClass('sandNoticeOn').removeClass('sandNoticeOff')):(a.addClass('fa-envelope-o').removeClass('fa-envelope'),a.addClass('sandNoticeOff').removeClass('sandNoticeOn'));},registerEvents:function b(){var a=$('.modalNotificationNotificationConfig');this.registerEventForModal(a);}}),jQuery(document).ready(function(){var a=new Notification_NotificationConfig_Js;a.registerEvents();});
