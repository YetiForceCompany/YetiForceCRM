jQuery.Class("Notification_NotificationConfig_Js",{},{registerEventForModal:function(a){var c=this;var b=app.registerDataTables(a.find(".modalDataTable"));app.showBtnSwitch(a.find(".switchBtn"));app.showPopoverElementView(a.find(".infoPopover"));a.on("switchChange.bootstrapSwitch",".sendNotificationsSwitch",function(f,d){if(d){a.find(".schedule").removeClass("d-none")}else{a.find(".schedule").addClass("d-none")}});a.find('[name="saveButton"]').on("click",function(){var g=[];var e=[];b.$('[type="checkbox"]').each(function(){var h=$(this);if(h.is(":checked")){g.push(h.val())}});b.$(".sandNoticeOn").each(function(i){var h=$(this).closest("tr").data("id");e.push(h)});var f={module:app.getModuleName(),action:"Notification",mode:"saveWatchingModules",selctedModules:g,sendNotifications:e,frequency:a.find('select[name="frequency"]').val()};var d=jQuery.progressIndicator();AppConnector.request(f).then(function(h){d.progressIndicator({mode:"hide"});app.hideModalWindow()},function(i,h){d.progressIndicator({mode:"hide"});app.hideModalWindow();app.errorLog(i,h)})});a.find(".selectAllModules").on("click",function(d){d.stopPropagation();b.$(".watchingModule:not(:disabled)").prop("checked",$(this).is(":checked"))});a.find(".sentNotice").on("click",function(f){f.stopPropagation();var d=jQuery(f.currentTarget);var g=!d.hasClass("sandNoticeOn");c.changeSendNoticeState(d);b.$(".sandNoticeOn,.sandNoticeOff").each(function(){c.changeSendNoticeState($(this),g)})});b.$(".sandNoticeOn,.sandNoticeOff").on("click",function(f){f.stopPropagation();var d=jQuery(f.currentTarget);c.changeSendNoticeState(d)})},changeSendNoticeState:function(a,b){if(b!==undefined){if(b===true){a.addClass("fa-envelope").removeClass("fa-envelope-o");a.addClass("sandNoticeOn").removeClass("sandNoticeOff")}else{a.addClass("fa-envelope-o").removeClass("fa-envelope");a.addClass("sandNoticeOff").removeClass("sandNoticeOn")}}else{a.toggleClass("fa-envelope fa-envelope-o");a.toggleClass("sandNoticeOn sandNoticeOff")}},registerEvents:function(){var a=$(".modalNotificationNotificationConfig");this.registerEventForModal(a)}});jQuery(document).ready(function(){var a=new Notification_NotificationConfig_Js();a.registerEvents()});