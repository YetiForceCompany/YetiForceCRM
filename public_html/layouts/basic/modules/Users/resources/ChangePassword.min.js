
jQuery.Class("Users_ChangePassword_Js",{},{registerChangePass:function(){var b=this;var a=jQuery("#changePassword");var c=app.validationEngineOptionsForRecord;c.onValidationComplete=function(e,d){if(d){b.savePassword(e)}return false};a.validationEngine(app.validationEngineOptionsForRecord)},savePassword:function(d){var f=d.find('[name="new_password"]');var c=d.find('[name="confirm_password"]');var a=d.find('[name="old_password"]');var b=d.find('[name="userid"]').val();if(f.val()==c.val()){var e={module:"Users",action:"SaveAjax",mode:"savePassword",old_password:a.val(),new_password:f.val(),userid:b};AppConnector.request(e).then(function(g){if(g.success){app.hideModalWindow();Vtiger_Helper_Js.showPnotify({text:app.vtranslate(g.result.message),type:"success"})}else{Vtiger_Helper_Js.showPnotify(g.error.message);return false}})}else{f.validationEngine("showPrompt",app.vtranslate("JS_REENTER_PASSWORDS"),"error","topLeft",true);return false}},registerEvents:function(){this.registerChangePass()}});jQuery(document).ready(function(b){var a=new Users_ChangePassword_Js();a.registerEvents()});