'use strict';

$.Class('Base_TwoFactorAuthenticationModal_JS',{},{registerSubmitFrom:function registerSubmitFrom(data){data.find('button[name=saveButton]').prop('disabled',!0),data.find('input[name=user_code]').on('keyup',function(e){13!==e.keyCode&&data.find('button[name=saveButton]').prop('disabled',0===$(e.currentTarget).val().length);}),data.find('input[name=user_code]').on('change',function(e){data.find('button[name=saveButton]').prop('disabled',0===$(e.currentTarget).val().length);}),data.find('input[name=turn_off_2fa]').on('change',function(e){$(e.currentTarget).prop('checked')?(data.find('.js-qr-code,.js-user-code').addClass('hide'),data.find('input[name=mode]').val('off'),data.find('button[name=saveButton]').prop('disabled',!1)):(data.find('.js-qr-code,.js-user-code').removeClass('hide'),data.find('input[name=mode]').val('secret'),data.find('button[name=saveButton]').prop('disabled',!0),data.find('input[name=user_code]').val(''));});var form=data.find('form');form.on('submit',function(e){var progress=$.progressIndicator({blockInfo:{enabled:!0}});AppConnector.request(form.serializeFormData()).done(function(respons){if(respons.result.success)app.hideModalWindow(),Vtiger_Helper_Js.showPnotify({text:app.vtranslate(respons.result.message),type:'success',animation:'show'}),'Users'===app.getModuleName()&&location.reload();else{var wrongCode=form.find('.js-wrong-code');wrongCode.hasClass('hide')&&wrongCode.removeClass('hide');}progress.progressIndicator({mode:'hide'});}),e.preventDefault();});},registerEvents:function registerEvents(modalContainer){this.registerSubmitFrom(modalContainer);}});
//# sourceMappingURL=TwoFactorAuthenticationModal.min.js.map
