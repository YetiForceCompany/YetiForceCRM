{"version":3,"file":"SwitchUsers.min.js","sources":["SwitchUsers.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Vtiger_SwitchUsers_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\t\t/**\n\t\t * Register change user\n\t\t */\n\t\tregisterChangeUser: function () {\n\t\t\tthis.container.find('.js-switch-user').on('change', (e) => {\n\t\t\t\tlet showElement = $(e.currentTarget).find('option:selected').data('admin');\n\t\t\t\tlet subContainer = this.container.find('.js-sub-container');\n\t\t\t\tif (showElement) {\n\t\t\t\t\tsubContainer.removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tsubContainer.addClass('d-none');\n\t\t\t\t}\n\t\t\t\tsubContainer.find('.js-text-element').attr('disabled', !showElement);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register save\n\t\t */\n\t\tregisterSave: function () {\n\t\t\tlet form = this.container.find('form');\n\t\t\tthis.container.find('.js-switch-btn').on('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tdocument.progressLoader = jQuery.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar userId = form.find('[name=\"user\"]').val();\n\t\t\t\t\tform.find('[name=\"id\"]').val(userId);\n\t\t\t\t\tform.submit();\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('.js-switch-to-yourself').on('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tdocument.progressLoader = jQuery.progressIndicator({\n\t\t\t\t\tmessage: app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.container.find('.js-text-element').attr('disabled', true);\n\t\t\t\tform.submit();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register Events\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.container = jQuery('.switchUsersContainer');\n\t\t\tthis.registerSave();\n\t\t\tthis.registerChangeUser();\n\t\t}\n\t}\n);\n\njQuery(document).ready(function (e) {\n\tvar instance = new Vtiger_SwitchUsers_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","container","registerChangeUser","find","on","e","$","currentTarget","data","subContainer","showElement","removeClass","addClass","attr","registerSave","form","preventDefault","validationEngine","document","progressLoader","progressIndicator","message","app","vtranslate","position","blockInfo","enabled","val","userId","submit","registerEvents","ready","instance"],"mappings":";;AAGAA,OAAOC,KAAP,CACC,uBADD,CAEC,EAFD,CAGC;;KAICC,YAJD;;KAQCC,mBAAoB,6BAAY,gBAC/B,KAAKD,SAAL,CAAeE,IAAf,CAAoB,iBAApB,EAAuCC,EAAvC,CAA0C,QAA1C,CAAoD,SAACC,CAAD,CAAO,iBACxCC,EAAED,EAAEE,aAAJ,EAAmBJ,IAAnB,CAAwB,iBAAxB,EAA2CK,IAA3C,CAAgD,OAAhD,CADwC,CAEtDC,aAAe,MAAKR,SAAL,CAAeE,IAAf,CAAoB,mBAApB,CAFuC,CAGtDO,WAHsD,CAIzDD,aAAaE,WAAb,CAAyB,QAAzB,CAJyD,CAMzDF,aAAaG,QAAb,CAAsB,QAAtB,CANyD,CAQ1DH,aAAaN,IAAb,CAAkB,kBAAlB,EAAsCU,IAAtC,CAA2C,UAA3C,CAAuD,CAACH,WAAxD,EACA,CATD,EAUA,CAnBF;;KAuBCI,aAAc,uBAAY,iBACrBC,KAAO,KAAKd,SAAL,CAAeE,IAAf,CAAoB,MAApB,CADc,CAEzB,KAAKF,SAAL,CAAeE,IAAf,CAAoB,gBAApB,EAAsCC,EAAtC,CAAyC,OAAzC,CAAkD,SAACC,CAAD,CAAO,CAExD,GADAA,EAAEW,cAAF,EACA,CAAID,KAAKE,gBAAL,CAAsB,UAAtB,CAAJ,CAAuC,CACtCC,SAASC,cAAT,CAA0BpB,OAAOqB,iBAAP,CAAyB,CAClDC,QAASC,IAAIC,UAAJ,CAAe,wBAAf,CADyC,CAElDC,SAAU,MAFwC,CAGlDC,UAAW,CACVC,UADU,CAHuC,CAAzB,CADY,CAQtC,WAAaX,KAAKZ,IAAL,CAAU,eAAV,EAA2BwB,GAA3B,EAAb,CACAZ,KAAKZ,IAAL,CAAU,aAAV,EAAyBwB,GAAzB,CAA6BC,MAA7B,CATsC,CAUtCb,KAAKc,MAAL,GACA,CACD,CAdD,CAFyB,CAiBzB,KAAK5B,SAAL,CAAeE,IAAf,CAAoB,wBAApB,EAA8CC,EAA9C,CAAiD,OAAjD,CAA0D,SAACC,CAAD,CAAO,CAChEA,EAAEW,cAAF,EADgE,CAEhEE,SAASC,cAAT,CAA0BpB,OAAOqB,iBAAP,CAAyB,CAClDC,QAASC,IAAIC,UAAJ,CAAe,wBAAf,CADyC,CAElDC,SAAU,MAFwC,CAGlDC,UAAW,CACVC,UADU,CAHuC,CAAzB,CAFsC,CAShE,OAAKzB,SAAL,CAAeE,IAAf,CAAoB,kBAApB,EAAwCU,IAAxC,CAA6C,UAA7C,IATgE,CAUhEE,KAAKc,MAAL,GACA,CAXD,EAYA,CApDF;;KAwDCC,eAAgB,yBAAY,CAC3B,KAAK7B,SAAL,CAAiBF,OAAO,uBAAP,CADU,CAE3B,KAAKe,YAAL,EAF2B,CAG3B,KAAKZ,kBAAL,GACA,CA5DF,CAHD,EAmEAH,OAAOmB,QAAP,EAAiBa,KAAjB,CAAuB,UAAa,CACnC,aAAe,yBAAf,CACAC,SAASF,cAAT,GACA,CAHD"}