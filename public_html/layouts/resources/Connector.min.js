
var AppConnector = {requestPjax:function(a){return AppConnector._request(a, true)}, request:function(a, b){return AppConnector._request(a, false, b)}, _request:function(e, k, a){var i = jQuery.Deferred(); if (typeof a == "undefined"){a = false}if (typeof k == "undefined"){k = false}if (typeof e == "undefined"){e = {}}var m = ""; if (typeof e.data == "undefined" || a){if (typeof e == "string"){var j = m = e; var h = j.indexOf("?"); if (h !== - 1){var c = j.substr(0, h + 1); j = j.replace(c, "")}} else{j = jQuery.extend({}, e)}e = {}; e.data = j}if (typeof e.type == "undefined" || a){e.type = "POST"}if (typeof e.jsonp == "undefined" || a){e.jsonp = false}if (typeof e.dataType == "undefined" || a){var g = e.data; e.dataType = "json"; if (g.hasOwnProperty("view")){e.dataType = "html"} else{if (typeof g == "string" && g.indexOf("&view=") !== - 1){e.dataType = "html"}}if (typeof e.url != "undefined" && e.url.indexOf("&view=") !== - 1){e.dataType = "html"}}if (typeof e.url != "undefined" && e.url.indexOf("?") !== - 1){m = e.url; var f = e.url.split("?"); var b = f[1]; e.url = f[0]; var d = b.split("&"); for (var h = 0; h < d.length; h++){var n = d[h]; var l = n.split("="); e.data[l[0]] = l[1]}}if (typeof e.url == "undefined" || e.url.length <= 0){e.url = "index.php"}e.success = function(q, o, p){if (q !== null && typeof q === "object" && q.error){app.errorLog(q.error); if (q.error.message){Vtiger_Helper_Js.showMessage({text:q.error.message, type:"error"})}}i.resolve(q)}; e.error = function(p, s, q, r, o){app.errorLog(p, s, q); i.reject(s, q)}; jQuery.ajax(e); if (k){if (m === ""){m = "index.php?" + $.param(e.data)} else{if (m.indexOf("index.php?") === - 1){m = "index.php?" + m}}if (history.pushState && m !== ""){window.history.replaceState("text", "Title", m)}}return i.promise()}, requestForm:function(b, d){var a = "<form action=" + b + ' method="POST">'; if (typeof csrfMagicName !== "undefined"){a += '<input type="hidden" name="' + csrfMagicName + "\"  value='" + csrfMagicToken + "'>"}if (typeof d !== "undefined"){jQuery.each(d, function(e, f){a += '<input type="hidden" name="' + e + "\"  value='" + f + "'>"})}a += "</form>"; var c = new jQuery(a); c.appendTo("body").submit()}, };
