'use strict';

jQuery.Class("Vtiger_Base_Validator_Js",{moduleName:!1,invokeValidation:function invokeValidation(field,rules,k,options){if("undefined"==typeof options||!0!==options.isError)for(var listOfValidators=Vtiger_Base_Validator_Js.getValidator(field),i=0;i<listOfValidators.length;i++){var validatorList=listOfValidators[i],validatorName=validatorList.name,validatorInstance=new validatorName,result=void 0;if(validatorInstance.setElement(field),result=validatorList.hasOwnProperty("params")?validatorInstance.validate(validatorList.params):validatorInstance.validate(),!result)return validatorInstance.getError()}},getValidator:function getValidator(field){var listOfValidators=[],fieldData=field.data(),fieldInfo=fieldData.fieldinfo;"string"==typeof fieldInfo&&(fieldInfo=JSON.parse(fieldInfo));var moduleEle=field.closest("form").find("[name=\"module\"]");!1===Vtiger_Base_Validator_Js.moduleName&&0<moduleEle.length&&(Vtiger_Base_Validator_Js.moduleName=moduleEle.val());var key,value,fieldInstance=Vtiger_Field_Js.getInstance(fieldInfo),validatorsOfType=Vtiger_Base_Validator_Js.getValidatorsFromFieldType(fieldInstance);for(key in validatorsOfType)validatorsOfType.hasOwnProperty(key)&&(value=validatorsOfType[key],""!==value&&listOfValidators.push({name:value}));if(fieldData.hasOwnProperty("validator")){var specialValidators=fieldData.validator;for(key in specialValidators)if(specialValidators.hasOwnProperty(key)){var specialValidator=specialValidators[key],tempSpecialValidator=jQuery.extend({},specialValidator),validatorOfNames=Vtiger_Base_Validator_Js.getValidatorClassName(specialValidator.name);""!==validatorOfNames&&(tempSpecialValidator.name=validatorOfNames,!jQuery.isEmptyObject(tempSpecialValidator)&&listOfValidators.push(tempSpecialValidator));}}return listOfValidators},getValidatorsFromFieldType:function getValidatorsFromFieldType(fieldInstance){var fieldType=fieldInstance.getType(),validatorsOfType=[];return fieldType=fieldType.charAt(0).toUpperCase()+fieldType.slice(1).toLowerCase(),validatorsOfType.push(Vtiger_Base_Validator_Js.getValidatorClassName(fieldType)),validatorsOfType},getValidatorClassName:function getValidatorClassName(validatorName){var validatorsOfType="",className=Vtiger_Base_Validator_Js.getClassName(validatorName),fallBackClassName=Vtiger_Base_Validator_Js.getFallBackClassName(validatorName);return "undefined"==typeof window[className]?"undefined"!=typeof window[fallBackClassName]&&(validatorsOfType=window[fallBackClassName]):validatorsOfType=window[className],validatorsOfType},getClassName:function getClassName(validatorName){var moduleName;return moduleName=!1==Vtiger_Base_Validator_Js.moduleName?app.getModuleName():Vtiger_Base_Validator_Js.moduleName,moduleName+"_"+validatorName+"_Validator_Js"},getFallBackClassName:function getFallBackClassName(validatorName){return "Vtiger_"+validatorName+"_Validator_Js"}},{field:"",error:"",validate:function validate(){return !0},getError:function getError(){return null==this.error?"Validation Failed":this.error},setError:function setError(errorInfo){return this.error=errorInfo,this},setElement:function setElement(field){return this.field=field,this},getElement:function getElement(){return this.field},getFieldValue:function getFieldValue(){var field=this.getElement();return jQuery.trim(field.val())}});
//# sourceMappingURL=BaseValidator.min.js.map
