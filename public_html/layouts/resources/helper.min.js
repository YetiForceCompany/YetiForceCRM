'use strict';

$.Class('Vtiger_Helper_Js',{checkServerConfigResponseCache:'',langCode:'',setLangCode:function b(){var a=document.getElementsByTagName('html')[0];this.langCode=a.getAttribute('lang')?a.getAttribute('lang'):'en';},getLangCode:function a(){return this.langCode||this.setLangCode(),this.langCode},getEmailMassEditInstance:function b(){var a=new window.Emails_MassEdit_Js;return a},getDayFromDate:function c(a){var b=this.getDay(a);return this.getLabelDayFromDate(b)},getDay:function c(a){var b=new Date(a);return isNaN(b.getDay())&&(b=Date.parse(a)),b.getDay()},getLabelDayFromDate:function d(a){var b=a,c='';return 0===b?c='JS_SUN':1===b?c='JS_MON':2===b?c='JS_TUE':3===b?c='JS_WED':4===b?c='JS_THU':5===b?c='JS_FRI':6===b?c='JS_SAT':void 0,app.vtranslate(c)},getDateInstance:function p(a,b){var c=a.split(' '),d=c[0],e=c[1],f='00',g='-';-1!==b.indexOf('-')&&(g='-'),-1!==b.indexOf('.')&&(g='.'),-1!==b.indexOf('/')&&(g='/');var h=d.split(g),i=b.split(g),j=h[i.indexOf('yyyy')],k=h[i.indexOf('mm')],l=h[i.indexOf('dd')],m=Date.parse(j+g+k+g+l);if(4<j.length||2<k.length||2<l.length||null==m){var n=app.vtranslate('JS_INVALID_DATE');throw n}'undefined'==typeof e&&(e='00:00:00');var o=e.split(':');'undefined'!=typeof o[2]&&(f=o[2]),'undefined'!=typeof c[2]&&(e+=' '+c[2],'pm'==c[2].toLowerCase()&&'12'!=o[0]&&(o[0]=parseInt(o[0],10)+12),'am'==c[2].toLowerCase()&&'12'==o[0]&&(o[0]='00')),--k;var m=new Date(j,k,l,o[0],o[1],f);return m},showConfirmationBox:function d(a){var b=$.Deferred(),c=bootbox.confirm($.extend({callback:function c(a){a?b.resolve():b.reject();}},a));return c.on('hidden',function(){0<$('#'+Window.lastModalId).length&&$('body').addClass('modal-open');}),b.promise()},showMessage:function b(a){'undefined'==typeof a.type&&(a.type='info'),'undefined'==typeof a.title&&(a.title=app.vtranslate('JS_MESSAGE')),Vtiger_Helper_Js.showPnotify(a);},showPnotify:function d(a){var b=a;'string'==typeof a&&(b={},b.text=a);var c={target:document.body,data:{type:'error',hide:!1,delay:'2000',modules:{Buttons:{closerHover:!1,labels:{close:app.vtranslate('JS_CLOSE')}},Animate:{animate:!0,inClass:'zoomInLeft',outClass:'zoomOutRight'}}}};return 'undefined'!=typeof a.type&&'error'!=a.type&&(c.data.hide=!0),'undefined'!=typeof b&&(c.data=$.extend(c.data,b)),PNotify.defaults.styling='bootstrap4',PNotify.defaults.icons='fontawesome5',new PNotify(c)},hidePnotify:function b(a){'undefined'==typeof a&&(a=$('.ui-pnotify')),a.remove();},addClickOutSideEvent:function c(a,b){a.one('clickoutside',b);},showHorizontalTopScrollBar:function d(){var a=$('.contentsDiv'),b=$('.contents-topscroll',a),c=$('.contents-bottomscroll',a);$('.bottomscroll-div',a).attr('style',''),$('.topscroll-div',a).css('width',$('.bottomscroll-div',a).outerWidth()),$('.bottomscroll-div',a).css('width',$('.topscroll-div',a).outerWidth()),b.on('scroll',function(){c.scrollLeft(b.scrollLeft());}),c.on('scroll',function(){b.scrollLeft(c.scrollLeft());});},convertToDateString:function n(a,b,c,d){var e='-';-1!==b.indexOf('-')&&(e='-'),-1!==b.indexOf('.')&&(e='.'),-1!==b.indexOf('/')&&(e='/');var f=a.split(e),g=b.split(e),h=f[g.indexOf('yyyy')],i=f[g.indexOf('mm')],j=f[g.indexOf('dd')],k=new Date(h,i-1,j);if(4<h.length||2<i.length||2<j.length||null==k){var l=app.vtranslate('JS_INVALID_DATE');throw l}var m=k;return '0'==c?'Calendar'==d&&m.setDate(k.getDate()-1):'-1'==c?'Calendar'==d?m.setDate(k.getDate()-2):m.setDate(k.getDate()-1):'Calendar'!=d&&m.setTime(k.getTime()+1e3*(60*(60*(24*parseInt(c))))),app.getStringDate(m)},hideOptions:function e(a,b,c){var d='';a.find('option').each(function(a,e){e=$(e),c==e.data(b)?(''==d&&(d=e.val()),e.removeClass('d-none'),e.removeAttr('disabled')):(e.addClass('d-none'),e.attr('disabled','disabled'));}),a.val(d),a.trigger('chosen:updated');},unique:function b(a){return a.filter(function(a,b,c){return b===c.indexOf(a)})}},{});
