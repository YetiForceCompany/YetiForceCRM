
Vtiger_Detail_Js("Campaigns_Detail_Js",{},{loadRelatedList:function(a){var b=new Campaigns_RelatedList_Js(this.getRecordId(),app.getModuleName(),this.getSelectedTab(),this.getRelatedModuleName());var c={page:a};this.clearSelectedRecords();b.loadRelatedList(c)},clearSelectedRecords:function(){jQuery('[name="selectedIds"]').data("selectedIds","");jQuery('[name="excludedIds"]').data("excludedIds","")},registerEventForRelatedListPagination:function(){var b=this;var a=this.getContentHolder();a.on("click","#relatedListNextPageButton",function(g){var d=jQuery(g.currentTarget);if(d.attr("disabled")=="disabled"){return}var c=b.getSelectedTab();var h=b.getRelatedModuleName();var f=new Campaigns_RelatedList_Js(b.getRecordId(),app.getModuleName(),c,h);f.nextPageHandler().then(function(i){var e=jQuery(i).find('[name="emailEnabledModules"]').val();if(e){b.registerEmailEnabledActions()}})});a.on("click","#relatedListPreviousPageButton",function(){var c=b.getSelectedTab();var e=b.getRelatedModuleName();var d=new Campaigns_RelatedList_Js(b.getRecordId(),app.getModuleName(),c,e);d.previousPageHandler().then(function(g){var f=jQuery(g).find('[name="emailEnabledModules"]').val();if(f){b.registerEmailEnabledActions()}})});a.on("click","#relatedListPageJump",function(f){var c=b.getSelectedTab();var g=b.getRelatedModuleName();var d=new Campaigns_RelatedList_Js(b.getRecordId(),app.getModuleName(),c,g);d.getRelatedPageCount()});a.on("click","#relatedListPageJumpDropDown > li",function(c){c.stopImmediatePropagation()}).on("keypress","#pageToJump",function(f){var c=b.getSelectedTab();var g=b.getRelatedModuleName();var d=new Campaigns_RelatedList_Js(b.getRecordId(),app.getModuleName(),c,g);d.pageJumpHandler(f).then(function(h){var e=jQuery(h).find('[name="emailEnabledModules"]').val();if(e){b.registerEmailEnabledActions()}})})},registerEventForRelatedList:function(){var b=this;var a=this.getContentHolder();b.registerEventForAddingRelatedRecord(a);a.on("click",".relatedListHeaderValues",function(g){var d=jQuery(g.currentTarget);var c=b.getSelectedTab();var h=b.getRelatedModuleName();var f=new Campaigns_RelatedList_Js(b.getRecordId(),app.getModuleName(),c,h);f.sortHandler(d).then(function(i){var e=jQuery(i).find('[name="emailEnabledModules"]').val();if(e){b.registerEmailEnabledActions()}})});a.on("click","button.selectRelation",function(f){var c=b.getSelectedTab();var g=b.getRelatedModuleName();var d=new Campaigns_RelatedList_Js(b.getRecordId(),app.getModuleName(),c,g);d.showSelectRelationPopup().then(function(h){var e=jQuery(h).find('[name="emailEnabledModules"]').val();if(e){b.registerEmailEnabledActions()}})});a.on("click","a.relationDelete",function(h){h.stopImmediatePropagation();var f=jQuery(h.currentTarget);var c=Vtiger_Detail_Js.getInstance();var d=c.getDeleteMessageKey();var g=app.vtranslate(d);Vtiger_Helper_Js.showConfirmationBox({message:g}).then(function(l){var n=f.closest("tr");var j=n.data("id");var i=b.getSelectedTab();var m=b.getRelatedModuleName();var k=new Campaigns_RelatedList_Js(b.getRecordId(),app.getModuleName(),i,m);k.deleteRelation([j]).then(function(e){k.loadRelatedList().then(function(r){var p=jQuery(r).find('[name="emailEnabledModules"]').val();var q=Vtiger_List_Js.getInstance();var o=q.readSelectedIds();if(o!="all"){j=j.toString();var s=jQuery.inArray(j,o);if(s!=-1){o.splice(s,1);q.writeSelectedIds(o)}}if(p){b.registerEmailEnabledActions()}})})},function(e,i){})})},registerEventForAddingRelatedRecord:function(){var b=this;var a=this.getContentHolder();a.on("click",'[name="addButton"]',function(g){var d=jQuery(g.currentTarget);var c=b.getSelectedTab();var h=b.getRelatedModuleName();if(d.hasClass("quickCreateSupported")!=true){window.location.href=d.data("url");return}var f=new Vtiger_RelatedList_Js(b.getRecordId(),app.getModuleName(),c,h);f.addRelatedRecord(d).then(function(i){var e=jQuery(i).find('[name="emailEnabledModules"]').val();if(e){b.registerEmailEnabledActions()}})})},registerEmailEnabledActions:function(){var a=app.getModuleName();var b=a+"_List_Js";var c=new window[b]();c.registerEvents();c.markSelectedRecords()},registerEventForRelatedTabClick:function(){var c=this;var b=c.getContentHolder();var a=b.closest("div.detailViewInfo");jQuery(".related",a).on("click","li",function(j,i){var g=jQuery(j.currentTarget);if(!g.hasClass("dropdown")){var f=jQuery("<div></div>");f.progressIndicator({position:"html",blockInfo:{enabled:true,elementToBlock:a}});var d=g.data("url");if(typeof i!="undefined"){var h=i.callback;delete i.callback}c.loadContents(d,i).then(function(l){c.deSelectAllrelatedTabs();c.markTabAsSelected(g);f.progressIndicator({mode:"hide"});var e=jQuery(l).find('[name="emailEnabledModules"]').val();if(e){var k=new Campaigns_List_Js();k.registerEvents();c.registerRelatedListEvents()}if(typeof h=="function"){h(l)}if(g.data("linkKey")==c.detailViewSummaryTabLabel){c.loadWidgets()}c.registerBasicEvents()},function(){f.progressIndicator({mode:"hide"})})}})},registerRelatedListEvents:function(){var a=this.getSelectedTab();var c=this.getRelatedModuleName();var b=new Campaigns_RelatedList_Js(this.getRecordId(),app.getModuleName(),a,c);b.registerEvents()},registerEvents:function(){this.registerRelatedListEvents();this._super();var a=Vtiger_List_Js.getInstance();a.registerEvents()}});