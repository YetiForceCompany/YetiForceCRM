
Vtiger_Edit_Js("EmailTemplates_Edit_Js",{},{loadVariablePanel:function(c){var b=this;if(typeof c=="undefined"){c=this.getForm()}var a=c.find("#variablePanel");a.progressIndicator();AppConnector.request({module:"EmailTemplates",record:app.getRecordId(),view:"VariablePanel",type:"mail",selectedModule:c.find('[name="module_name"]').val()}).then(function(d){a.html(d);b.afterLoadVariablePanel(a)},function(e,d){a.progressIndicator({mode:"hide"})})},afterLoadVariablePanel:function(a){app.showSelect2ElementView(a.find("select.select2"))},registerVariablePanelEvent:function(b){var a=this;if(typeof b=="undefined"){b=this.getForm()}b.find('.blockContainer[data-label="LBL_CONTENT_MAIL"] .blockContent').prepend('<div id="variablePanel" class="col-md-12 paddingLRZero borderBottom bc-gray-lighter"></div>');a.loadVariablePanel(b);b.find('[name="module_name"]').on("change",function(c){a.loadVariablePanel(b)})},registerBasicEvents:function(a){this._super(a);this.registerVariablePanelEvent(a);app.registerCopyClipboard()}});