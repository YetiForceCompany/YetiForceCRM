var Settings_ActivityTypes_Js={initEvants:function(){$(".ActivityTypes .updateColor").click(Settings_ActivityTypes_Js.updateColor);$(".ActivityTypes .activeType").click(Settings_ActivityTypes_Js.updateActiveType);$(".ActivityTypes .generateColor").click(Settings_ActivityTypes_Js.generateColor)},generateColor:function(c){var b=$(c.currentTarget);var a=b.closest("tr");var d={viewtypesid:a.data("viewtypesid"),};app.saveAjax("generateColor",d).then(function(e){Settings_Vtiger_Index_Js.showMessage({type:"success",text:e.result.message});a.find(".calendarColor").css("background",e.result.color);a.data("color",e.result.color)})},updateActiveType:function(c){var b=$(c.currentTarget);var a=b.closest("tr");Settings_ActivityTypes_Js.registerSaveEvent("UpdateModuleActiveType",{active:b.is(":checked"),viewtypesid:a.data("viewtypesid"),})},updateColor:function(g){var f=$(g.currentTarget);var c=f.closest("tr");var a=jQuery(".ActivityTypes .editColorContainer");var b=a.clone(true,true);var d=function(e){e.find(".editColorContainer").removeClass("hide").show();var i=e.find(".selectedColor");i.val(c.data("color"));var h={flat:true,color:c.data("color"),onChange:function(j,l,k){i.val("#"+l)}};if(typeof customParams!="undefined"){h=jQuery.extend(h,customParams)}e.find(".calendarColorPicker").ColorPicker(h);e.find('[name="saveButton"]').click(function(k){var j=$.progressIndicator({message:app.vtranslate("Update labels"),blockInfo:{enabled:true}});Settings_ActivityTypes_Js.registerSaveEvent("UpdateModuleColor",{color:i.val(),viewtypesid:c.data("viewtypesid"),});c.find(".calendarColor").css("background",i.val());c.data("color",i.val());j.progressIndicator({mode:"hide"});app.hideModalWindow()})};app.showModalWindow(b,function(e){if(typeof d=="function"){d(e)}},{width:"1000px"})},registerSaveEvent:function(c,a){var b={};b.data={module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",mode:c,params:a};b.async=false;b.dataType="json";AppConnector.request(b).then(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(f)},function(e,d){})},registerEvents:function(){Settings_ActivityTypes_Js.initEvants()}};$(document).ready(function(){Settings_ActivityTypes_Js.registerEvents()});
