
Vtiger_Detail_Js("PriceBooks_Detail_Js",{},{listPriceUpdateContainer:false,getListPriceUpdateContainer:function(){return this.listPriceUpdateContainer},registerEventForSelectRecords:function(){var b=this;var a=this.getContentHolder();a.on("click","button.selectRelation",function(f){var c=b.getSelectedTab();var g=b.getRelatedModuleName();var d=new PriceBooks_RelatedList_Js(b.getRecordId(),app.getModuleName(),c,g);d.showSelectRelationPopup()})},registerEventforUpdateListPrice:function(){var b=this;var a=jQuery("#listPriceUpdate");a.on("submit",function(j){j.preventDefault();var i=a.data("jqv").InvalidFields;if((i.length)==0){var h=new Array();var d=a.find('input[name="relid"]').val();var g=a.find('input[name="currentPrice"]').val();h.push({id:d,price:g});var f=new PriceBooks_RelatedList_Js(b.getRecordId(),app.getModuleName(),b.getSelectedTab(),b.getRelatedModuleName());f.addRelations(h);app.hideModalWindow();var c=f.getCurrentPageNum();var k={page:c};f.loadRelatedList(k)}})},showListPriceUpdate:function(a){app.showModalWindow(a,{"text-align":"left"});jQuery("#listPriceUpdate").validationEngine(app.validationEngineOptions);this.registerEventforUpdateListPrice()},getListPriceEditForm:function(b){var a=jQuery.Deferred();var c=this;var d=this.getListPriceUpdateContainer();if(d!=false){a.resolve(d)}else{AppConnector.request(b).then(function(e){c.listPriceUpdateContainer=e;a.resolve(e)},function(f,e){a.reject(f,e)})}return a.promise()},registerEventForEditListPrice:function(){var b=this;var a=this.getContentHolder();a.on("click","a.editListPrice",function(f){f.stopPropagation();var d=jQuery(f.currentTarget);var c=d.data("url");b.getListPriceEditForm(c).then(function(i){var g=d.data("relatedRecordid");var e=d.data("listPrice");var h=jQuery(i);h.find('input[name="relid"]').val(g);h.find('input[name="currentPrice"]').val(e);b.showListPriceUpdate(h)},function(e,g){})})},registerBasicEvents:function(a){this._super(a);this.registerEventForSelectRecords();this.registerEventForEditListPrice()},registerEvents:function(){this._super();this.registerEventForSelectRecords()}});