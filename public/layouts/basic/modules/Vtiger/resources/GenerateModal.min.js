
jQuery.Class("Vtiger_GenerateModal_Js",{},{registerGenetateButton:function(a){var b=this;a.find("button.genetateButton").on("click",function(f){document.progressLoader=jQuery.progressIndicator({message:app.vtranslate("JS_LOADING_PLEASE_WAIT"),position:"html",blockInfo:{enabled:true}});var d=jQuery(f.currentTarget);var c=d.data("url");var h=jQuery('[name="method"]:checked');if(h.length<=0){window.location.href=c}else{var g={};g.data={module:app.getModuleName(),action:"GenerateRecords",records:jQuery('[name="all_records"]').val(),template:d.data("id"),target:d.data("name"),method:h.val()};g.dataType="json";AppConnector.request(g).then(function(l){var j=l.result;if(l.success){var e=j.ok;b.summary(a,j);document.progressLoader.progressIndicator({mode:"hide"});if(h.val()==1){for(var k in e){var m=window.open(c+e[k],"_blank")}}}},function(i,e){app.errorLog(i,e)})}})},summary:function(a,b){a.find(".modal-title").text(app.vtranslate("JS_SUMMARY"));a.find(".modal-body").html("<div>"+app.vtranslate("JS_SELECTED_RECORDS")+": <strong>"+b.all+"</strong></div>\n									<div>"+app.vtranslate("JS_SUCCESSFULLY_PERFORMED_ACTION_FOR")+": <strong>"+b.ok.length+"</strong></div>\n									<div>"+app.vtranslate("JS_ACTION_FAILED_FOR")+": <strong>"+b.fail.length+"</strong></div>")},registerEvents:function(){var a=jQuery(".generateMappingModal");app.showPopoverElementView(a.find(".popoverTooltip"));this.registerGenetateButton(a)}});jQuery(document).ready(function(b){var a=new Vtiger_GenerateModal_Js();a.registerEvents()});