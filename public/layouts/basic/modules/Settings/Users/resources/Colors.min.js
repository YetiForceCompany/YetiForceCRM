
var Colors_Js={initEvants:function(){$(".UserColors .updateColor").click(Colors_Js.updateColor);$(".UserColors .generateColor").click(Colors_Js.generateColor);$(".UserColors .activeColor").click(Colors_Js.activeColor)},updateColor:function(i){var h=$(i.currentTarget);var c=h.closest("tr");var f=h.closest("table");var a=jQuery(".UserColors .editColorContainer");var b=a.clone(true,true);var g=h.data("metod");var d=function(e){e.find(".editColorContainer").removeClass("hide").show();var k=e.find(".selectedColor");k.val(c.data("color"));var j={flat:true,color:c.data("color"),onChange:function(l,n,m){k.val("#"+n)}};if(typeof customParams!="undefined"){j=jQuery.extend(j,customParams)}e.find(".calendarColorPicker").ColorPicker(j);e.find('[name="saveButton"]').click(function(m){var l=$.progressIndicator({message:app.vtranslate("Update labels"),blockInfo:{enabled:true}});Colors_Js.registerSaveEvent(g,{color:k.val(),id:c.data("id"),table:c.data("table"),field:f.data("fieldname"),});c.find(".calendarColor").css("background",k.val());c.data("color",k.val());l.progressIndicator({mode:"hide"});app.hideModalWindow()})};app.showModalWindow(b,function(e){if(typeof d=="function"){d(e)}},{width:"1000px"})},generateColor:function(f){var d=$(f.currentTarget);var a=d.closest("tr");var b=d.closest("table");var c=d.data("metod");var g={module:app.getModuleName(),action:"SaveAjax",mode:"generateColor",params:{id:a.data("id"),table:a.data("table"),field:b.data("fieldname"),mode:c,}};AppConnector.request(g).then(function(h){var e=h.result;var i={text:e.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(i);a.find(".calendarColor").css("background",e.color);a.data("color",e.color)},function(h,e){})},registerSaveEvent:function(c,a){var b={};b.data={module:app.getModuleName(),action:"SaveAjax",mode:c,params:a};b.async=false;b.dataType="json";AppConnector.request(b).then(function(e){var d=e.result;var f={text:d.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(f);return d},function(e,d){})},activeColor:function(c){var b=$(c.currentTarget);var a=b.closest("tr");var d={};d.data={module:app.getModuleName(),action:"SaveAjax",mode:"activeColor",params:{status:b.is(":checked"),color:a.data("color"),id:a.data("id")}};d.async=false;d.dataType="json";AppConnector.request(d).then(function(f){var e=f.result;var g={text:e.message,animation:"show",type:"success"};Vtiger_Helper_Js.showPnotify(g);if(a.data("color")==""){a.find(".calendarColor").css("background",e.color);a.data("color",e.color)}})},registerEvents:function(){Colors_Js.initEvants()}};$(document).ready(function(){Colors_Js.registerEvents()});