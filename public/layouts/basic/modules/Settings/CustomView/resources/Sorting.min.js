
jQuery.Class("Settings_CustomView_Sorting_Js",{},{formElement:false,registerButtonsEvent:function(){var b=this;var a=this.getForm();a.find("button.clear").on("click",function(d){var c=jQuery(d.currentTarget);c.closest(".input-group").find("select").val("").trigger("change")});a.find("button.sortOrderButton").on("click",function(d){var c=jQuery(d.currentTarget);c.find(".glyphicon").each(function(g,f){if(jQuery(this).hasClass("hide")){jQuery(this).removeClass("hide");a.find('[name="sortOrder"]').val(jQuery(this).data("val"))}else{jQuery(this).addClass("hide")}})});a.on("submit",function(d){var c=jQuery(d.currentTarget);b.saveSorting(c);d.preventDefault()})},saveSorting:function(c){var b=this;var a=$.progressIndicator({message:app.vtranslate("JS_SAVE_LOADER_INFO"),blockInfo:{enabled:true}});var d=c.serializeFormData();var e={cvid:d.cvid,name:"sort",value:d.defaultOrderBy?d.defaultOrderBy+","+d.sortOrder:""};app.saveAjax("updateField",e).then(function(f){app.hideModalWindow();if(f.success){Vtiger_Helper_Js.showPnotify({text:f.result.message,type:"success"})}a.progressIndicator({mode:"hide"})})},getForm:function(){if(this.formElement==false){this.setForm(jQuery("#sortingCustomView"))}return this.formElement},setForm:function(a){this.formElement=a;return this},registerEvents:function(){this.registerButtonsEvent()}});jQuery(document).ready(function(b){var a=new Settings_CustomView_Sorting_Js();a.registerEvents()});