
Settings_Vtiger_List_Js("Settings_MappedFields_List_Js",{},{getListContainer:function(){return jQuery("#listViewContainer")},registerFilterChangeEvent:function(){var a=this;jQuery("#moduleFilter").on("change",function(b){jQuery("#pageNumber").val("1");jQuery("#pageToJump").val("1");jQuery("#orderBy").val("");jQuery("#sortOrder").val("");var c={module:app.getModuleName(),parent:app.getParentModuleName(),sourceModule:jQuery(b.currentTarget).val()};jQuery("#recordsCount").val("");jQuery("#totalPageCount").text("");a.getListViewRecords(c).then(function(d){a.updatePagination();a.registerBasic()})})},registerRowClickEvent:function(){var a=this.getListViewContentContainer();a.on("click",".listViewEntries td:not(.tdActions)",function(c){var b=jQuery(c.currentTarget).parent().find(".glyphicon-pencil").closest("a").attr("href");window.location.href=b})},getDefaultParams:function(){var a=jQuery("#pageNumber").val();var b=app.getModuleName();var c=app.getParentModuleName();var d={module:b,parent:c,page:a,view:"List",sourceModule:jQuery("#moduleFilter").val()};return d},registerAddNewTemplate:function(a){jQuery("#addButton",a).on("click",function(){var b=jQuery("#moduleFilter option:selected").val();window.location.href=jQuery(this).data("url")+((b)?"&source_module="+b:"")})},registerImportTemplate:function(a){var b=this;jQuery("#importButton",a).on("click",function(f){var d=jQuery(f.currentTarget);var c=d.data("url");if(typeof c!="undefined"){app.showModalWindow(null,c,function(g){var e=g.find("form");e.validationEngine(app.validationEngineOptions);e.on("submit",function(k){var i=jQuery(k.currentTarget);var h=i.data("jqv").InvalidFields;if(h.length>0){i.removeData("submit");return}var j=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});b.importSave(i).then(function(l){app.hideModalWindow();j.progressIndicator({mode:"hide"});Settings_Vtiger_Index_Js.showMessage({text:l.result.message,type:"info"});jQuery("#moduleFilter").trigger("change")},function(l,m){});k.preventDefault()})})}f.stopPropagation()})},importSave:function(b){var a=jQuery.Deferred();var c=new FormData(b[0]);if(typeof file!="undefined"){c.append("imported_xml",file);delete file}if(c){var d={url:"index.php",type:"POST",data:c,processData:false,contentType:false};AppConnector.request(d).then(function(e){a.resolve(e)},function(f,e){a.reject(f,e)})}return a.promise()},registerDeleteMap:function(){var a=this;this.getListContainer().find(".deleteMap").each(function(b){jQuery(this).on("click",function(d){d.stopPropagation();d.preventDefault();var c=jQuery(this).closest("tr").data("id");Vtiger_List_Js.deleteRecord(c).then(function(){a.registerBasic()})})})},registerBasic:function(){this.registerDeleteMap()},registerEvents:function(){this._super();var a=this.getListContainer();this.registerFilterChangeEvent();this.registerAddNewTemplate(a);this.registerImportTemplate(a);this.registerBasic()}});